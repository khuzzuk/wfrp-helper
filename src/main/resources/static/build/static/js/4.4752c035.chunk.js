(this["webpackJsonpwfrp-helper-web"]=this["webpackJsonpwfrp-helper-web"]||[]).push([[4],{376:function(e,t,a){e.exports=a.p+"static/media/A.8ca41e5c.png"},609:function(e,t,a){e.exports=a.p+"static/media/google-logo.36158af3.png"},659:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return zn}));var n=a(32),i=a(36),s=a(55),r=a(637),l=a(0),o=a.n(l),c=a(3),m=a(109),d=a(348),p=a(129),h=a.n(p),u=a(640),y=a(641),E=a(642),g=(a(13),a(48)),v=a(131);class w{updateWith(e){return Object.assign(this,e),this}updateProp(e,t){"undefined"!==typeof e[t]&&(this[t]=e[t])}updateNumProp(e,t){(e[t]||0===e[t]||""===e[t])&&(this[t]=e[t])}updateEntityProp(e,t,a){e[t]&&(this[t]=a(),this[t].updateWith(e[t]))}updateEntityList(e,t,a){e[t]&&(this[t]=e[t].map(e=>{const t=a();return t.updateWith(e),t}))}}const N="text",f="password",x="text_area",C="boolean",R="integer",T="float",I="enum_select",b="enum_combobox",S="entity_select",L="entity_combobox",O="price",A="action_time",D="determinant",P="modifier",W="blueprint_select",k="race_determinants",F="character_sheet";var V=class{};class H{constructor(e){this.loadData=()=>{U.fetching(this.entityName),fetch(this.entityName,{mode:"cors",headers:{"Access-Control-Allow-Origin":"*"}}).then(this.handleErrors).then(e=>e.json()).then(e=>e.map(e=>U.suppliers[this.entityName]().updateWith(e))).then(e=>{U.update({[this.entityName]:e}),U.fetchingFinished(this.entityName)})},this.save=(e,t)=>{fetch(this.entityName,{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this.handleErrors).then(this.loadData).then(t)},this.handleErrors=e=>{if(200!==e.status){let t=e.json();throw 400===e.status?t.then(e=>{window.confirm(Array.from(new Set(e.errors.map(e=>"cannot set field "+e.field+" with "+e.rejectedValue+", "+e.message))).join("\n"))}):409===e.status?t.then(e=>{window.confirm(e.errors[0].message)}):403!==e.status&&401!==e.status&&405!==e.status||U.updateUser({token:null}),e}return e},this.entityName=e}delete(e){fetch(this.entityName,{method:"delete",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this.handleErrors).then(()=>this.loadData())}}var j=class extends w{};const M=(e,t)=>{const a={filter:!1,sort:!1},n={name:e,options:a};switch(t){case N:case T:case R:case C:a.filter=!0,a.sort=!0;break;case O:case P:case A:a.filter=!1,a.sort=!0,a.customBodyRender=e=>e?e.toString():"";break;case S:case L:a.filter=!0,a.sort=!0,a.customBodyRender=e=>e?e.name:"";break;default:a.filter=!1,a.sort=!1}return n},K=(e,t,a,n,i)=>{const s=new V;return s.name=e,s.type=t,s.suggestions=a,s.toView=n,s.toModel=i,s},G=(e,t,a)=>{U.suppliers[e.entityName]=()=>new e,U.services[e.entityName]=new H(e.entityName),U.columns[e.entityName]=t,U.formFields[e.entityName]=a},U={data:{showTable:null,showForm:null,afterForm:null,fetching:new Set,currentUser:{username:null,password:null,token:!1}},services:{},formFields:{},columns:{},suppliers:{},onUpdate:e=>{},update(e){this.data=Object(v.a)({},this.data,{},e),this.onUpdate(this.data)},updateUser(e){this.data.currentUser=Object(v.a)({},this.data.currentUser,{},e),this.onUpdate(this.data)},showTable(e){this.update({entity:null,showForm:null,showTable:e,showScenario:!1})},showForm(e,t){this.update({entity:t,showForm:e,showTable:null,showScenario:!1})},updateScenario(e){this.update({entity:e,showForm:null,showTable:null,showScenario:!0})},updateEntity(e){this.data.entity.updateWith(e),this.update({entity:this.data.entity})},fetching(e){this.data.fetching.add(e),this.update({fetching:this.data.fetching})},fetchingFinished(e){this.data.fetching.delete(e),this.update({fetching:this.data.fetching})}},B=[401,403,405,302];class _{constructor(){this.handleRawResponse=e=>t=>{200===t.status?t.text().then(e):B.includes(t.status)?U.updateUser({token:null}):console.warn(t.status)},this.handleResponse=e=>t=>{200===t.status?t.json().then(e):B.includes(t.status)?U.updateUser({token:!1}):console.warn(t.status)}}requestFor(e,t,a){const n=JSON.stringify(e);fetch(t,{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:n}).then(this.handleResponse(a))}postRequestWithoutResponse(e,t,a){const n=JSON.stringify(e);fetch(t,{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:n}).then(this.handleRawResponse(a))}requestForPath(e,t){fetch(e,{method:"get",mode:"cors",headers:{}}).then(this.handleResponse(t)).catch(e=>console.log(e))}rawGetRequestFor(e,t){fetch(e,{method:"get",mode:"cors",headers:{}}).then(this.handleRawResponse(t))}rawPostRequest(e,t,a){fetch(e,{method:"post",mode:"cors",headers:{},body:t}).then(this.handleRawResponse(a))}}class Y extends j{}Y.entityName="role",U.suppliers.role=()=>new Y;class z extends j{}z.entityName="user",U.suppliers.user=()=>new z,U.columns.user=[M("username",N)],U.formFields.user=[K("authorities",L,Y.entityName)];const X=new H(z.entityName),q=new H(Y.entityName);class J extends _{refreshAuthorities(){this.requestForPath("authorities",e=>{U.updateUser({authorities:e}),J.updateAdminAuthoritiesIfNeeded()})}static hasAuthority(e){const t=U.data.currentUser.authorities;return t&&t.find(t=>t.authority.toLowerCase().endsWith(e.toLowerCase()))}updatePassword(e){this.postRequestWithoutResponse(Object(v.a)({},U.data.currentUser,{},{password:e}),"password",()=>U.updateUser({oneTimePassword:!1}))}static updateAdminAuthoritiesIfNeeded(){J.hasAuthority("admin")&&(q.loadData(),X.loadData(),U.services.user=X)}}var Q=a(333),Z=a(624),$=a(159),ee=a(162);class te extends l.Component{constructor(...e){super(...e),this.getLabel=e=>{let t;return"string"===typeof e?t=e:e.label&&(t=e.label),e.name?e.name:e?e.toString():o.a.createElement("div",null,"label")}}render(){const e=this.props,t=e.t,a=e.name,n=e.suggestions,i=void 0===n?a:n,s=e.value,r=e.label,l=void 0===r?t(a):r,c=e.data,d=void 0===c?U.data[i]:c,p=e.onChange,h=void 0===p?e=>U.updateEntity({[a]:e}):p,u=e.multi,y=e.editable;return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},o.a.createElement(Z.a,null,l)),o.a.createElement(m.a,{item:!0},o.a.createElement($.a,{textFieldProps:{label:l,InputLabelProps:{shrink:!1}},styles:te.style,options:d,components:Object(ee.a)(),onChange:h,value:u?s:{label:s,value:s},getOptionLabel:this.getLabel,getOptionValue:e=>e,isSearchable:!0,isClearable:!0,isMulti:u,isDisabled:!y})))}}te.style={control:(e,t)=>Object(v.a)({},e,{width:400,marginLeft:10})};var ae=Object(g.b)()(te),ne=a(126);class ie extends l.Component{constructor(...e){super(...e),this.updateInt=e=>t=>{let a=parseInt(t.target.value);(a||0===a)&&e(a)}}render(){const e=this.props,t=e.onChange,a=Object(ne.a)(e,["onChange"]);return o.a.createElement(Q.a,Object.assign({type:"number",onChange:this.updateInt(t)},a))}}var se=ie;const re={ACTION:"ACTION",ROUND:"ROUND",TURN:"TURN",allOf(){return[this.ACTION,this.ROUND,this.TURN]}};class le extends w{constructor(...e){super(...e),this.actionType=re.ACTION,this.amount=1}toString(){switch(this.actionType){case re.ACTION:return this.amount;case re.ROUND:return this.amount+"r";case re.TURN:return this.amount+"t";default:return this.amount}}}class oe extends l.Component{constructor(...e){super(...e),this.onUpdate=e=>{const t=this.props,a=t.name,n=t.value,i=void 0===n?U.data.entity[a]:n;Object.assign(i,e),U.updateEntity({[a]:i})}}render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.value,r=void 0===s?U.data.entity[a]:s,l=e.editable;return o.a.createElement(m.a,{container:!0,alignItems:"center",spacing:2},o.a.createElement(m.a,{item:!0},o.a.createElement(Z.a,null,i)),o.a.createElement(m.a,{item:!0},o.a.createElement(ae,{key:"actionType",label:t("type"),data:re.allOf(),value:r.type,onChange:e=>this.onUpdate({type:e}),editable:l})),o.a.createElement(m.a,{item:!0},o.a.createElement(se,{key:"amount",label:t("amount"),value:r.amount,onChange:e=>this.onUpdate({amount:e}),InputProps:{readOnly:!l}})))}}var ce=Object(g.b)()(oe);class me extends l.Component{render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.suggestions,r=void 0===s?a:s,l=e.data,c=void 0===l?U.data[r]:l,d=e.value,p=void 0===d?U.data.entity[a]:d,h=e.onChange,u=void 0===h?e=>U.updateEntity({[a]:e}):h,y=e.editable,E=p?o.a.createElement("div",null,t("price"),": ",p.suggestedPrice.toString(),",",t("wieght"),": ",p.suggestedWeight," kg"):o.a.createElement("div",null);return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},i),o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement($.a,{textFieldProps:{label:i,InputLabelProps:{shrink:!1}},options:c,components:Object(ee.a)(),getOptionLabel:e=>o.a.createElement("div",null,e.name),getOptionValue:e=>e.id,filterOption:(e,t)=>e.data.name.startsWith(t),onChange:u,value:p,isDisabled:!y})),o.a.createElement(m.a,{item:!0},E))}}var de=Object(g.b)()(me),pe=a(347),he=a(346),ue=a(633);const ye={K2:"K2",K3:"K3",K4:"K4",K6:"K6",K8:"K8",K10:"K10",K12:"K12",K20:"K20",K100:"K100",allOf(){return[this.K2,this.K3,this.K4,this.K6,this.K8,this.K10,this.K12,this.K20,this.K100]}};class Ee extends j{toString(){return this.rolls+this.dice}}U.data.dice=ye.allOf();const ge={REGULAR:"REGULAR",PROFESSION:"PROFESSION",EXPERIENCE:"EXPERIENCE",DICE:"DICE",allOf(){return[this.REGULAR,this.PROFESSION,this.EXPERIENCE,this.DICE]}};var ve=class extends j{constructor(...e){super(...e),this.type=ge.REGULAR,this.rolls=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"rolls",()=>new Ee),this}toString(){return this.type+" "+this.value+" "+this.rolls.map(e=>e.toString()).join(" ")}};class we extends j{constructor(...e){super(...e),this.value=0,this.modifiers=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"modifiers",()=>new ve),this}getExperienceExtensions(){return this.modifiers.filter(e=>e.type===ge.EXPERIENCE)}calculateExperienceValue(){return this.value+this.getExperienceExtensions().reduce((e,t)=>e+t.value,0)}calculateFinalValue(){return this.value+this.modifiers.reduce((e,t)=>e+t.value,0)}}const Ne={SPEED:"SPEED",BATTLE:"BATTLE",SHOOTING:"SHOOTING",STRENGTH:"STRENGTH",DURABILITY:"DURABILITY",HEALTH:"HEALTH",INITIATIVE:"INITIATIVE",ATTACK:"ATTACK",DEXTERITY:"DEXTERITY",LEADER_SKILLS:"LEADER_SKILLS",INTELLIGENCE:"INTELLIGENCE",CONTROL:"CONTROL",WILL:"WILL",CHARISMA:"CHARISMA",PARRY:"PARRY",OPPONENT_PARRY:"OPPONENT_PARRY",allOf(){return[this.SPEED,this.BATTLE,this.SHOOTING,this.STRENGTH,this.DURABILITY,this.HEALTH,this.INITIATIVE,this.ATTACK,this.DEXTERITY,this.LEADER_SKILLS,this.INTELLIGENCE,this.CONTROL,this.WILL,this.CHARISMA,this.PARRY,this.OPPONENT_PARRY]},personal(){return[this.SPEED,this.BATTLE,this.SHOOTING,this.STRENGTH,this.DURABILITY,this.HEALTH,this.INITIATIVE,this.ATTACK,this.DEXTERITY,this.LEADER_SKILLS,this.INTELLIGENCE,this.CONTROL,this.WILL,this.CHARISMA]}};class fe extends l.Component{constructor(...e){super(...e),this.updateDiceRoll=e=>{this.props.value.updateWith(e),U.update({currentDiceRollEdit:this.props.value})}}render(){const e=this.props,t=e.value,a=e.id,n=e.editable;return o.a.createElement("div",{key:a},o.a.createElement(ae,{key:a+"_type",label:"dice",data:ye.allOf(),value:t.dice,onChange:e=>this.updateDiceRoll({dice:e}),editable:n}),o.a.createElement(se,{key:a+"_rolls",label:"rolls",value:t.rolls,onChange:e=>this.updateDiceRoll({rolls:e}),InputProps:{readOnly:!n}}))}}class xe extends l.Component{constructor(...e){super(...e),this.update=e=>{this.props.value.updateWith(e),U.update({currentModifierEdit:this.props.value})},this.onAddDiceRoll=()=>{this.props.value.rolls.push(new Ee),U.update({currentModifierEdit:this.props.value})}}render(){const e=this.props,t=e.t,a=e.name,n=e.value,i=e.label,s=void 0===i?t(a):i,r=e.id,l=e.types,c=void 0===l?ge.allOf():l,d=e.editable;let p=o.a.createElement("div",null);return n.type===ge.DICE&&(p=o.a.createElement(m.a,{item:!0},n.rolls.map(e=>o.a.createElement(fe,{id:r,key:r,value:e,onChange:()=>U.update({currentModifierEdit:n}),editable:d})),d?o.a.createElement(pe.a,{onClick:this.onAddDiceRoll},t("newDice")):o.a.createElement("div",null))),o.a.createElement(m.a,{container:!0,item:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},o.a.createElement(se,{key:r+"_value",label:s+" \u2013 "+t("value"),value:n.value,onChange:e=>this.update({value:e}),InputProps:{readOnly:!d}})),o.a.createElement(m.a,{item:!0},o.a.createElement(ae,{key:r||a+"_type",label:t("modifierType")+" "+a?t(a):n.id,data:c,value:n.type,onChange:e=>this.update({type:e}),editable:d})),p)}}var Ce=Object(g.b)()(xe);class Re extends l.Component{constructor(...e){super(...e),this.deleteItem=e=>{const t=this.props.value;t.splice(t.indexOf(e),1),U.update({currentDeterminantEdit:t})},this.update=(e,t)=>{e.updateWith(t),U.updateEntity({[this.props.name]:this.props.value})},this.addDeterminant=()=>{const e=U.data.entity,t=this.props.name;e[t]?(e[t].push(new we),U.updateEntity({[t]:e[t]})):U.updateEntity({[t]:[new we]})},this.addModifierToDeterminant=e=>()=>{e.modifiers.push(new ve),U.updateEntity({[this.props.name]:this.props.value})},this.updateModifier=e=>t=>{e.updateWith(t),U.updateEntity({[this.props.name]:this.props.value})}}render(){const e=this.props,t=e.t,a=e.name,n=e.value,i=e.modifierTypes,s=void 0===i?ge.allOf():i,r=e.types,l=void 0===r?Ne.allOf():r,c=e.editable;return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},t(a)),o.a.createElement(m.a,{item:!0,container:!0,spacing:2,alignItems:"center"},n&&n.map(e=>(console.log(e),o.a.createElement(m.a,{item:!0,container:!0,spacing:2,alignItems:"center",key:e.id+e.type},o.a.createElement(m.a,{item:!0},o.a.createElement(ae,{key:e.id+e.type,label:t(a)+e.type,data:l,value:e.type,onChange:t=>this.update(e,{type:t}),editable:c})),o.a.createElement(m.a,{item:!0},o.a.createElement(se,{key:e.id+e.type+"value",label:"value",value:e.value,onChange:t=>this.update(e,{value:t}),InputProps:{readOnly:!c}})),o.a.createElement(m.a,{item:!0,container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},t("modifier")),o.a.createElement(m.a,{item:!0},e.modifiers&&e.modifiers.map(t=>o.a.createElement(he.a,{key:e.id+e.type+"_"+t.id},o.a.createElement(Ce,{id:e.id+e.type+t.id+t.type,value:t,types:s,editable:c})))),o.a.createElement(m.a,{item:!0},c?o.a.createElement(pe.a,{onClick:this.addModifierToDeterminant(e)},t("newModifier")):o.a.createElement("div",null))),c?o.a.createElement(d.a,{key:e.id+e.type+"remove",onClick:()=>this.deleteItem(e)},o.a.createElement(ue.a,null)):o.a.createElement("div",null))))),o.a.createElement(m.a,{item:!0},c?o.a.createElement(pe.a,{onClick:this.addDeterminant},t("newDeterminant")):o.a.createElement("div",null)))}}var Te=Object(g.b)()(Re);class Ie extends l.Component{constructor(...e){super(...e),this.updateEntity=e=>{const t=this.props.name,a=U.data.entity;a.updateWith({[t]:e}),U.update({entity:a})}}render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.suggestions,r=void 0===s?a:s,l=e.data,c=void 0===l?U.data[r]:l,m=e.value,d=void 0===m?U.data.entity[a]:m,p=e.multi,h=void 0!==p&&p,u=e.onChange,y=void 0===u?this.updateEntity:u,E=e.editable;return o.a.createElement("div",null,o.a.createElement(Z.a,null,i),o.a.createElement($.a,{textFieldProps:{label:i,InputLabelProps:{shrink:!1}},options:c,components:Object(ee.a)(),getOptionLabel:e=>o.a.createElement("div",null,e.name||e.authority),getOptionValue:e=>e.id,filterOption:(e,t)=>!e.data.name||e.data.name.startsWith(t),onChange:y,value:d,isMulti:h,isDisabled:!E}))}}var be=Object(g.b)()(Ie);class Se extends l.Component{constructor(...e){super(...e),this.updatePrice=(e,t)=>a=>{const n=this.props,i=n.name,s=n.value,r=void 0===s?U.data.entity[i]:s;let l=parseInt(a.target.value);(l||0===l)&&e(Object(v.a)({},r,{},{[t]:l}))}}render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.onChange,r=void 0===s?e=>U.updateEntity({[a]:e}):s,l=e.value,c=void 0===l?U.data.entity[a]:l,d=e.editable;return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},o.a.createElement(Z.a,{style:{marginRight:10}},i)),o.a.createElement(m.a,{item:!0},o.a.createElement(Q.a,{label:t("gold"),type:"number",value:c.gold,onChange:this.updatePrice(r,"gold"),InputProps:{readOnly:!d}})),o.a.createElement(m.a,{item:!0},o.a.createElement(Q.a,{label:t("silver"),type:"number",value:c.silver,onChange:this.updatePrice(r,"silver"),InputProps:{readOnly:!d}})),o.a.createElement(m.a,{item:!0},o.a.createElement(Q.a,{label:t("lead"),type:"number",value:c.lead,onChange:this.updatePrice(r,"lead"),InputProps:{readOnly:!d}})))}}var Le=Object(g.b)()(Se);const Oe=["SPEED","BATTLE","SHOOTING","STRENGTH","DURABILITY","HEALTH","INITIATIVE","ATTACK","DEXTERITY","LEADER_SKILLS","INTELLIGENCE","CONTROL","WILL","CHARISMA"];class Ae extends l.Component{constructor(...e){super(...e),this.regenerateDeterminants=e=>{e.determinants&&0!==e.determinants.length?(e.determinants.filter(e=>!e.modifiers).forEach(e=>{e.modifiers=[new ve]}),e.determinants.filter(e=>0===e.modifiers.length).forEach(e=>e.modifiers.push(new ve))):Oe.forEach(t=>{const a=new ve;a.type=ge.DICE;const n=new we;n.type=t,n.modifiers.push(a),e.determinants.push(n)})},this.updateDiceType=e=>t=>{t||1!==e.modifiers[0].rolls.length?t&&0===e.modifiers[0].rolls.length?(e.modifiers[0].rolls.push(new Ee),e.modifiers[0].rolls[0].dice=t):e.modifiers[0].rolls[0].dice=t:e.modifiers[0].rolls.length=0,U.updateEntity(U.data.entity)},this.updateDiceRolls=e=>t=>{0===t&&1===e.modifiers[0].rolls.length?e.modifiers[0].rolls.length=0:t>0&&0===e.modifiers[0].rolls.length?(e.modifiers[0].rolls.push(new Ee),e.modifiers[0].rolls[0].rolls=t):e.modifiers[0].rolls[0].rolls=t,U.updateEntity(U.data.entity)},this.updateBasicModifier=e=>t=>{e.modifiers[0].value=t,U.updateEntity(U.data.entity)}}render(){const e=this.props.t,t=U.data.entity;this.regenerateDeterminants(t);const a=t.determinants.map(t=>[o.a.createElement(m.a,{item:!0,xs:1},e(t.type)),o.a.createElement(m.a,{item:!0,xs:3},o.a.createElement(ae,{name:"dice",value:t.modifiers[0].rolls.length&&t.modifiers[0].rolls[0].dice,editable:!0,onChange:this.updateDiceType(t)})),o.a.createElement(m.a,{item:!0,xs:1},e("rolls")," ",o.a.createElement(se,{value:t.modifiers[0].rolls.length&&t.modifiers[0].rolls[0].rolls,onChange:this.updateDiceRolls(t)})),o.a.createElement(m.a,{item:!0,xs:1},e("plus")," ",o.a.createElement(se,{value:t.modifiers[0].value,onChange:this.updateBasicModifier(t)}))]);return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},a.map(e=>o.a.createElement(m.a,{item:!0,container:!0,xs:12,alignItems:"center"},e)))}}var De=Object(g.b)()(Ae),Pe=a(379),We=a(432),ke=a(380),Fe=a(268);class Ve extends j{updateWith(e){return super.updateWith(e)}}Ve.entityName="skill",G(Ve,[M("name",N),M("description",x)],[K("name",N),K("description",x)]);class He extends j{constructor(...e){super(...e),this.skills=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"skills",()=>new Ve),this}}He.entityName="professionClass",G(He,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("skills",L,Ve.entityName)]);class je extends j{constructor(...e){super(...e),this.determinants=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"determinants",()=>new we),this}}class Me extends je{constructor(...e){super(...e),this.skills=[],this.nextProfessions=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"professionClass",()=>new He),this.updateEntityList(e,"skills",()=>new Ve),this}}Me.entityName="profession",G(Me,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("professionClass",S,He.entityName),K("determinants",D),K("skills",L,Ve.entityName),K("nextProfessions",b,Me.entityName)]);class Ke{constructor(){this.determinants=[];const e=new we;e.type=Ne.SPEED;const t=new we;t.type=Ne.BATTLE;const a=new we;a.type=Ne.SHOOTING;const n=new we;n.type=Ne.STRENGTH;const i=new we;i.type=Ne.DURABILITY;const s=new we;s.type=Ne.HEALTH;const r=new we;r.type=Ne.ATTACK;const l=new we;l.type=Ne.INITIATIVE;const o=new we;o.type=Ne.DEXTERITY;const c=new we;c.type=Ne.LEADER_SKILLS;const m=new we;m.type=Ne.INTELLIGENCE;const d=new we;d.type=Ne.CONTROL;const p=new we;p.type=Ne.WILL;const h=new we;h.type=Ne.CHARISMA,this.determinants.push(e,t,a,n,i,s,r,l,o,c,m,d,p,h)}updateWith(e){return e.determinants&&e.determinants.forEach(e=>{const t=new we;t.updateWith(e),this.replaceDeterminant(t)}),this}updateDeterminantValue(e,t){this.findDeterminant(t).value=e}findDeterminant(e){return this.determinants.find(t=>e===t.type)}replaceDeterminant(e){const t=this.findDeterminant(e.type);let a=this.determinants.indexOf(t);this.determinants.splice(a,1),this.determinants.push(e)}}const Ge=["ABUNDANT","PLENTIFUL","COMMON","AVERAGE","SCARCE","RARE","VERY_RARE"];U.data.availability=Ge;class Ue extends j{constructor(...e){super(...e),this.availability=Ge[0]}}Ue.entityName="armorPattern",G(Ue,[M("name",N),M("description",x),M("strength",R),M("availability",N)],[K("name",N),K("description",x),K("priceMultiplier",T),K("weight",T),K("strength",T),K("availability",I,"availability")]);class Be extends w{constructor(...e){super(...e),this.gold=0,this.silver=0,this.lead=0}toString(){return this.gold+" "+this.silver+" "+this.lead}}U.suppliers.price=()=>new Be;class _e extends j{constructor(...e){super(...e),this.availability="COMMON"}}_e.entityName="resource",G(_e,[M("name",N),M("description",x),M("priceMultiplier",T),M("durability",T),M("strength",T),M("availability",N)],[K("name",N),K("description",x),K("priceMultiplier",T),K("weight",T),K("durability",T),K("strength",T),K("availability",I,"availability")]);const Ye={BODY:"BODY",HEAD:"HEAD",TORSO:"TORSO",HAND:"HAND",LEG:"LEG",BELT:"BELT",NECK:"NECK",FINGER:"FINGER",SHIELD:"SHIELD",BOTH_HANDS:"BOTH_HANDS",allOf(){return[this.BODY,this.HEAD,this.TORSO,this.HAND,this.LEG,this.BELT,this.NECK,this.FINGER,this.SHIELD,this.BOTH_HANDS]},armor(){return[this.BODY,this.HEAD,this.TORSO,this.HAND,this.LEG,this.BELT,this.SHIELD]},weapon(){return[this.HAND,this.BOTH_HANDS,this.SHIELD]},jewelry(){return[this.NECK,this.FINGER]}};U.data.placement=Ye.allOf(),U.data.placementArmor=Ye.armor(),U.data.placementWeapon=Ye.weapon(),U.data.placementJewelry=Ye.jewelry();class ze extends je{constructor(...e){super(...e),this.suggestedPrice=new Be,this.placement=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"suggestedPrice",()=>new Be),this}}ze.entityName="armorBlueprint",G(ze,[M("name",N),M("description",x),M("armor",R),M("placement",N),M("suggestedPrice",O)],[K("name",N),K("description",x),K("armor",R),K("suggestedPrice",O),K("suggestedWeight",R),K("placement",b,"placementArmor"),K("determinants",D)]);class Xe extends je{constructor(...e){super(...e),this.price=new Be,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Be),this.updateEntityProp(e,"primaryResource",()=>new _e),this.updateEntityProp(e,"secondaryResource",()=>new _e),this.updateEntityProp(e,"type",()=>new ze),this.updateEntityProp(e,"armorPattern",()=>new Ue),this}}Xe.entityName="armor",G(Xe,[M("name",N),M("description",x),M("price",O),M("type",S),M("armorPattern",S)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability"),K("primaryResource",S,_e.entityName),K("secondaryResource",S,_e.entityName),K("type",W,ze.entityName),K("armorPattern",S,Ue.entityName),K("determinants",D)]);class qe extends j{constructor(...e){super(...e),this.price=new Be,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Be),this}}qe.entityName="miscItem",G(qe,[M("name",N),M("description",x),M("weight",T),M("price",O),M("availability",I)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability")]);class Je extends j{constructor(...e){super(...e),this.amount=1}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"item",()=>new qe),this}}class Qe extends je{constructor(...e){super(...e),this.suggestedPrice=new Be,this.damage=new ve,this.prepareTime=new le,this.placement=Ye.HAND}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"suggestedPrice",()=>new Be),this.updateEntityProp(e,"damage",()=>new ve),this.updateEntityProp(e,"prepareTime",()=>new le),this}}Qe.entityName="meleeWeaponBlueprint",G(Qe,[M("name",N),M("description",x),M("damage",P),M("placement",N),M("suggestedPrice",O),M("suggestedWeight",T)],[K("name",N),K("description",x),K("suggestedPrice",O),K("suggestedWeight",R),K("damage",P),K("prepareTime",A),K("placement",b,"placementWeapon"),K("determinantes",D)]);class Ze extends je{constructor(...e){super(...e),this.price=new Be,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Be),this.updateEntityProp(e,"primaryResource",()=>new _e),this.updateEntityProp(e,"secondaryResource",()=>new _e),this.updateEntityProp(e,"type",()=>new Qe),this}getFinalValueForType(e){return wt.sumValueByTypeIn(this.type.determinants,e)+wt.sumValueByTypeIn(this.determinants,e)}}Ze.entityName="meleeWeapon",G(Ze,[M("name",N),M("description",x),M("price",O),M("type",S)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability"),K("primaryResource",S,_e.entityName),K("secondaryResource",S,_e.entityName),K("type",W,Qe.entityName),K("determinants",D)]);class $e extends j{constructor(...e){super(...e),this.levels=0}updateWith(e){return super.updateWith(e)}}$e.entityName="spellSchool",G($e,[M("name",N),M("description",x),M("levels",R)],[K("name",N),K("description",x),K("levels",R)]);class et extends j{constructor(...e){super(...e),this.prepareTime=new le,this.durationTime=new le,this.ingredients=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"prepareTime",()=>new le),this.updateEntityProp(e,"durationTime",()=>new le),this.updateEntityProp(e,"spellSchool",()=>new $e),this.updateEntityList(e,"ingredients",()=>new qe),this}}et.entityName="spell",G(et,[M("name",N),M("description",x),M("level",R),M("manaCost",R),M("range",R)],[K("name",N),K("description",x),K("effect",x),K("level",R),K("manaCost",R),K("range",R),K("prepareTime",A),K("durationTime",A),K("spellSchool",S,$e.entityName),K("ingredients",L,qe.entityName)]);class tt extends j{constructor(...e){super(...e),this.level=0}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"spellSchool",()=>new $e),this}}class at extends j{constructor(...e){super(...e),this.names=[]}}at.entityName="nation";G(at,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("names",x,null,e=>e.join("\n"),e=>e.replace("\r","").split("\n"))]);class nt extends j{updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new at),this}}nt.entityName="worldLanguage",G(nt,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("nations",L,at.entityName)]);class it extends j{updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new at),this}}it.entityName="currency",G(it,[M("name",N),M("description",x),M("valueMultiplier",T)],[K("name",N),K("description",x),K("valueMultiplier",T),K("nations",L,at.entityName)]);class st extends j{constructor(...e){super(...e),this.amount=new Be}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"currency",U.suppliers.currency),this.updateEntityProp(e,"amount",U.suppliers.price),this}}U.suppliers.money=()=>new st;class rt extends je{updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new at),this}}rt.entityName="race",G(rt,[M("name",N),M("specialFeature",x)],[K("name",N),K("specialFeatures",x),K("nations",L,at.entityName),K("determinants",k)]);class lt extends j{constructor(...e){super(...e),this.nations=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new at),this}}lt.entityName="religion",G(lt,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("nations",L,at.entityName)]);class ot extends je{}ot.entityName="animalKind",G(ot,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("determinants",D)]);class ct extends je{updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"animalKind",()=>new ot),this}}ct.entityName="animal",G(ct,[M("name",N),M("description",x),M("animalKind",S)],[K("name",N),K("description",x),K("animalKind",S,ot.entityName),K("determinants",D)]);class mt extends j{}mt.entityName="character",G(mt,[M("name",N),M("description",x)],[K("name",N),K("description",x)]);class dt extends j{}dt.entityName="eyeColor",G(dt,[M("name",N),M("description",x)],[K("name",N),K("description",x)]);class pt extends j{}pt.entityName="hairColor",G(pt,[M("name",N),M("description",x)],[K("name",N),K("description",x)]);class ht extends je{constructor(...e){super(...e),this.suggestedPrice=new Be,this.damage=new ve,this.prepareTime=new le,this.placement=[Ye.HAND],this.minimumRange=0,this.mediumRange=0,this.maximumRange=0}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"suggestedPrice",()=>new Be),this.updateEntityProp(e,"damage",()=>new ve),this.updateEntityProp(e,"prepareTime",()=>new le),this}}ht.entityName="rangedWeaponBlueprint",G(ht,[M("name",N),M("description",x),M("damage",P),M("minimumRange",R),M("mediumRange",R),M("maximumRange",R),M("prepareTime",A),M("suggestedPrice",O),M("suggestedWeight",T)],[K("name",N),K("description",x),K("suggestedPrice",O),K("suggestedWeight",R),K("damage",P),K("prepareTime",A),K("placement",b,"placementWeapon"),K("minimumRange",R),K("mediumRange",R),K("maximumRange",R),K("determinants",D)]);class ut extends je{constructor(...e){super(...e),this.price=new Be,this.availability="COMMON",this.weaponTypes=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Be),this.updateEntityProp(e,"primaryResource",()=>new _e),this.updateEntityProp(e,"secondaryResource",()=>new _e),this.updateEntityList(e,"weaponTypes",()=>new ht),this}}ut.entityName="ammunition",G(ut,[M("name",N),M("description",x),M("price",O),M("type",S),M("availability",N)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability"),K("primaryResource",S,_e.entityName),K("secondaryResource",S,_e.entityName),K("weaponTypes",L,ht.entityName),K("determinants",D)]);class yt extends je{constructor(...e){super(...e),this.price=new Be,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Be),this.updateEntityProp(e,"primaryResource",()=>new _e),this.updateEntityProp(e,"secondaryResource",()=>new _e),this.updateEntityProp(e,"type",()=>new ht),this}}yt.entityName="rangedWeapon",G(yt,[M("name",N),M("description",x),M("price",O),M("type",S)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability"),K("primaryResource",S,_e.entityName),K("secondaryResource",S,_e.entityName),K("type",W,ht.entityName),K("determinants",D)]);class Et extends j{constructor(...e){super(...e),this.ammunitionAmount=0}updateWith(e){return super.updateWith(e),super.updateEntityProp(e,"rangedWeapon",()=>new yt),super.updateEntityProp(e,"ammunition",()=>new ut),this}}class gt extends je{}gt.entityName="physicalFeature",G(gt,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("determinants",D)]);class vt extends j{constructor(...e){super(...e),this.physicalFeatures=[],this.determinants=new Ke,this.professions=[],this.skills=[],this.inventory=[],this.meleeWeapons=[],this.rangedWeapons=[],this.armor=[],this.spellSchools=[],this.spells=[],this.animals=[],this.money=[],this.languages=[]}updateWith(e){return this.updateProp(e,"id"),this.updateProp(e,"uuid"),this.updateProp(e,"version"),this.updateProp(e,"name"),this.updateProp(e,"gender"),this.updateNumProp(e,"age"),this.updateNumProp(e,"height"),this.updateNumProp(e,"weight"),this.updateNumProp(e,"fatePoints"),this.updateNumProp(e,"mana"),this.updateNumProp(e,"currentMana"),this.updateNumProp(e,"sanityPoints"),this.updateNumProp(e,"totalExperience"),this.updateNumProp(e,"experience"),this.updateProp(e,"birthplace"),this.updateProp(e,"parents"),this.updateProp(e,"family"),this.updateProp(e,"health"),this.updateEntityProp(e,"nation",()=>new at),this.updateEntityProp(e,"religion",()=>new lt),this.updateEntityProp(e,"hairColor",()=>new pt),this.updateEntityProp(e,"eyeColor",()=>new dt),this.updateEntityProp(e,"race",()=>new rt),this.updateEntityProp(e,"personality",()=>new mt),this.updateEntityProp(e,"determinants",()=>new Ke),this.updateEntityProp(e,"professionClass",()=>new He),this.updateEntityProp(e,"currentProfession",()=>new Me),this.updateEntityList(e,"physicalFeatures",()=>new gt),this.updateEntityList(e,"professions",()=>new Me),this.updateEntityList(e,"skills",()=>new Ve),this.updateEntityList(e,"inventory",()=>new Je),this.updateEntityList(e,"meleeWeapons",()=>new Ze),this.updateEntityList(e,"rangedWeapons",()=>new Et),this.updateEntityList(e,"armor",()=>new Xe),this.updateEntityList(e,"spellSchools",()=>new tt),this.updateEntityList(e,"spells",()=>new et),this.updateEntityList(e,"animals",()=>new ct),this.updateEntityList(e,"money",()=>new st),this.updateEntityList(e,"languages",()=>new nt),this}}vt.entityName="person",G(vt,[M("name",N),M("race",S),M("nation",S),M("currentProfession",S),M("totalExperience",N)],[K("person",F)]);class wt extends _{addExperienceExtension(e,t){this.requestFor(e,"determinant/addExperienceExtension",e=>wt.afterResponse(e,t))}removeExperienceExtension(e,t){this.requestFor(e,"determinant/removeExperienceExtension",e=>wt.afterResponse(e,t))}static afterResponse(e,t){const a=new we;a.updateWith(e),t(a)}static findDeterminantIn(e,t){return e.find(e=>t===e.type)}static removeModifiersByType(e,t){let a=wt.findModifierByType(e,t);for(;a;)e.splice(e.indexOf(a),1),a=wt.findModifierByType(e,t);return e}static findModifierByType(e,t){return e.find(e=>e.type===t)}static sumValueByTypeIn(e,t){return e.filter(e=>t===e.type).reduce((e,t)=>e+t.calculateFinalValue(),0)}static updateProfessionExtensions(e,t){t.determinants=t.determinants.map(t=>(wt.setProfessionExtensions(e,t),t))}static setProfessionExtensions(e,t){const a=wt.findDeterminantIn(e.determinants,t.type);a&&(t.modifiers=wt.removeModifiersByType(t.modifiers,ge.PROFESSION),a.modifiers.forEach(e=>{const a=new ve;a.type=e.type,a.value=e.value,t.modifiers.push(a)}))}rollForRace(e){const t=U.data.entity;console.assert(t.type===vt);const a=t.determinants;this.requestForPath("determinant/generateDeterminants/"+t.race.id,e=>{e.determinants.forEach(e=>{a.updateDeterminantValue(e.value,e.type)}),U.updateEntity({determinants:a})})}}class Nt extends _{calculateMeleeDamage(e,t){this.rawGetRequestFor("gear/getMeleeWeaponDamage/".concat(e),t)}calculateArmorValue(e,t){this.rawGetRequestFor("gear/getArmorValue/".concat(e),t)}calculatePersonArmorValue(e,t){this.requestFor(e,"gear/getArmorValuesForGear",t)}static addPersonalRangedWeapon(e){const t=U.data.entity.rangedWeapons,a=new Et;a.rangedWeapon=e,t.push(a),U.updateEntity({rangedWeapons:t})}}class ft extends j{constructor(...e){super(...e),this.nations=[],this.spellSchools=[],this.persons=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new at),this.updateEntityList(e,"races",()=>new rt),this.updateEntityList(e,"spellSchools",()=>new $e),this.updateEntityList(e,"persons",()=>new vt),this}}ft.entityName="realm",G(ft,[M("name",N)],[K("name",N),K("nations",L,at.entityName),K("spellSchools",L,$e.entityName),K("persons",L,vt.entityName)]);class xt{constructor(){this.currentSpellSchools=[],this.currentSkills=[]}}const Ct=(e,t)=>e.filter(e=>!t.find(t=>e.name===t.name)),Rt=(e,t)=>{const a=e.indexOf(t);return a>=0&&e.splice(a,1),e},Tt=(e,t)=>(t.find(t=>t.id===e.id)||t.push(e),t),It=(e,t)=>e.find(e=>e.name===t.name);function bt(e,t,a=[],n=a){let i=t;return a.forEach(e=>i=i[e]),e.find(e=>{let t=e;return n.forEach(e=>t=t[e]),t===i})}function St(e,t){const a=e.indexOf(t);return a>=0&&e.splice(a,1),e}class Lt extends _{getAvailableSpellSchools(e,t){this.requestFor(e,"magic/getAvailableSpellSchools",t)}static getRelevantSpells(){const e=U.data.entity,t=e.spells,a=e.spellSchools;return U.data.spell.filter(e=>!bt(t,e,["name"])).filter(e=>{const t=bt(a,e,["spellSchool","name"]);return t&&t.level>=e.level})}}var Ot=a(376),At=a.n(Ot);const Dt={MALE:"MALE",FEMALE:"FEMALE",allOf(){return[this.MALE,this.FEMALE]}};U.data.gender=Dt.allOf();class Pt{static addItemToInventory(e){let t=U.data.entity.inventory;if(!bt(t,e,["name"],["item","name"])){const a=new Je;a.item=e,a.amount=0,t.push(a),U.updateEntity({inventory:t})}}static inventoryWeight(){return(U.data.entity.inventory.map(e=>e.item.weight*e.amount).reduce((e,t)=>e+t,0)+U.data.entity.meleeWeapons.map(e=>e.weight).reduce((e,t)=>e+t,0)+U.data.entity.rangedWeapons.map(e=>Pt.calculateRangedWeaponWeight(e)).reduce((e,t)=>e+t,0)+U.data.entity.armor.map(e=>e.weight).reduce((e,t)=>e+t,0)).toFixed(2)}static calculateRangedWeaponWeight(e){let t=0;return e.rangedWeapon&&(t+=e.rangedWeapon.weight),e.ammunition&&(t+=e.ammunition.weight*e.ammunitionAmount),t}}class Wt{static addMoney(e){const t=new st;t.currency=e,U.data.entity.money.push(t),U.updateEntity({money:U.data.entity.money})}}class kt{static getProfessions(){const e=U.data.entity.professionClass,t=U.data[Me.entityName];return e?t.filter(t=>t.professionClass&&t.professionClass.id===e.id):U.data[Me.entityName]}static updateProfession(e){const t=U.data.entity,a=t.professions,n=t.determinants,i=wt.updateProfessionExtensions(e,n);Tt(e,a),U.updateEntity({currentProfession:e,professions:a,determinants:i})}static removeProfessionFromHistory(e){const t=U.data.entity,a=t.professions,n=t.currentProfession;Rt(a,e),n&&e.id===n.id&&(U.data.entity.currentProfession=null),U.updateEntity({professions:a})}static nextProfessions(){const e=U.data.entity.currentProfession;return e&&e.nextProfessions?e.nextProfessions:[]}}class Ft extends l.Component{render(){const e=this.props,t=e.animal,a=Object(ne.a)(e,["animal"]);return o.a.createElement("div",Object.assign({},a,{onContextMenu:e=>{e.preventDefault(),U.updateEntity({animals:St(U.data.entity.animals,t)})}}),o.a.createElement("div",null,t.name))}}class Vt{constructor(){this.armorValues=new Map,Ye.allOf().forEach(e=>{this.armorValues.set(e,0)})}getArmorValue(e){return this.armorValues.get(e)}updateWith(e){this.armorValues=new Map,Ye.allOf().map(t=>this.armorValues.set(t,e[t]))}}const Ht={position:"absolute",width:20,textAlign:"center"},jt={container:{position:"relative"},shield:Object(v.a)({},Ht,{left:130,top:85}),head:Object(v.a)({},Ht,{left:15,top:100}),rightHand:Object(v.a)({},Ht,{left:15,top:170}),leftHand:Object(v.a)({},Ht,{left:155,top:162}),torso:Object(v.a)({},Ht,{left:155,top:230}),rightLeg:Object(v.a)({},Ht,{left:15,top:295}),leftLeg:Object(v.a)({},Ht,{left:155,top:295})},Mt=new Nt;class Kt extends l.Component{constructor(...e){super(...e),this.state={armorValues:new Vt},this.updateArmorValues=()=>{Mt.calculatePersonArmorValue(U.data.entity.armor.map(e=>e.id),e=>{const t=new Vt;t.updateWith(e),this.setState({armorValues:t,armor:U.data.entity.armor})})}}render(){const e=this.props,t=e.classes,a=e.className,n=Object(ne.a)(e,["classes","className"]);return U.data.entity.armor!==this.state.armor&&this.updateArmorValues(),o.a.createElement("div",Object.assign({className:"".concat(t.container," ").concat(a)},n),o.a.createElement("p",{className:t.shield},this.state.armorValues.getArmorValue(Ye.SHIELD)),o.a.createElement("p",{className:t.head},this.state.armorValues.getArmorValue(Ye.HEAD)),o.a.createElement("p",{className:t.rightHand},this.state.armorValues.getArmorValue(Ye.HAND)),o.a.createElement("p",{className:t.leftHand},this.state.armorValues.getArmorValue(Ye.HAND)),o.a.createElement("p",{className:t.torso},this.state.armorValues.getArmorValue(Ye.TORSO)),o.a.createElement("p",{className:t.rightLeg},this.state.armorValues.getArmorValue(Ye.LEG)),o.a.createElement("p",{className:t.leftLeg},this.state.armorValues.getArmorValue(Ye.LEG)))}}var Gt=h()(jt)(Kt);const Ut={display:"flex",flexDirection:"row"};class Bt extends l.Component{constructor(...e){super(...e),this.updateEntity=e=>t=>{t.preventDefault(),U.updateEntity({armor:Rt(U.data.entity.armor,e)})}}render(){const e=this.props,t=e.t,a=e.armor,n=e.disabled;let i=[o.a.createElement("div",{style:{width:150}},a.name),o.a.createElement("div",{style:{width:210}},t(a.type.placement)),o.a.createElement("div",{style:{width:50}},a.weight)];return n?o.a.createElement("div",{style:Ut},i):o.a.createElement("div",{style:Ut,onContextMenu:this.updateEntity(a)},i)}}var _t=Object(g.b)()(Bt);class Yt extends l.PureComponent{constructor(...e){super(...e),this.parse=e=>t=>{const a=this.props,n=a.name,i=a.variant,s=t.target.value;if(""!==s)if(i===Xt.INT){const a=parseInt(s);a||0===a?e(a):t.target.value=U.data.entity[n]||""}else if(i===Xt.FLOAT){const a=parseFloat(s);a||0===a?e(a):t.target.value=U.data.entity[n]||""}else e(s);else e(s)}}render(){const e=this.props,t=e.name,a=e.value,n=void 0===a?U.data.entity[t]:a,i=e.classes,s=e.customStyle,r=e.onChange,l=void 0===r?e=>U.updateEntity({[t]:e}):r;return e.multiline?o.a.createElement("textarea",{className:i.input,style:s,value:n,onChange:this.parse(l)}):o.a.createElement("input",{className:i.input,style:s,value:n,onChange:this.parse(l)})}}var zt=h()({input:{backgroundColor:"transparent",border:0,width:"100%",fontFamily:"wfrp",fontSize:"24px",textAlign:"center",outline:"none"}})(Yt);const Xt={TEXT:"TEXT",INT:"INT",FLOAT:"FLOAT"};class qt extends l.Component{constructor(...e){super(...e),this.updateAmount=e=>{this.props.inventory.amount=e,U.updateEntity({inventory:U.data.entity.inventory})}}render(){const e=this.props.inventory;return o.a.createElement("div",{style:{width:290,display:"flex"},onContextMenu:t=>{t.preventDefault();const a=U.data.entity.inventory;St(a,e),U.updateEntity({inventory:a})}},o.a.createElement("div",{style:{width:150,minWidth:150}},e.item.name),o.a.createElement("div",{style:{width:70,textAlign:"center"}},qt.calculateWeight(e)),o.a.createElement(zt,{style:{width:50,textAlign:"center"},variant:Xt.FLOAT,value:e.amount,onChange:this.updateAmount}))}}qt.calculateWeight=e=>(e.amount*e.item.weight).toFixed(2);var Jt=qt;class Qt extends l.Component{constructor(...e){super(...e),this.updateAmount=e=>t=>{this.props.money.amount[e]=t,U.updateEntity({money:U.data.entity.money})}}render(){const e=this.props,t=e.money,a=Object(ne.a)(e,["money"]);return o.a.createElement("div",Object.assign({},a,{style:{display:"flex"},onContextMenu:e=>{e.preventDefault(),U.updateEntity({money:St(U.data.entity.money,t)})}}),o.a.createElement("div",{style:{width:145}},t.currency.name),o.a.createElement(zt,{customStyle:{width:40},value:t.amount.gold,onChange:this.updateAmount("gold"),variant:Xt.INT}),o.a.createElement(zt,{customStyle:{width:45},value:t.amount.silver,onChange:this.updateAmount("silver"),variant:Xt.INT}),o.a.createElement(zt,{customStyle:{width:50},value:t.amount.lead,onChange:this.updateAmount("lead"),variant:Xt.INT}))}}var Zt=a(660),$t=a(378),ea=a.n($t);const ta=new wt,aa=e=>o.a.createElement(ea.a,Object.assign({style:{fontSize:14,margin:-2}},e));class na extends l.Component{constructor(...e){super(...e),this.addExtension=()=>{ta.addExperienceExtension(this.props.ext,this.props.onChange)},this.removeExtension=()=>{ta.removeExperienceExtension(this.props.ext,this.props.onChange)}}render(){const e=this.props,t=e.ext,a=e.classes,n=e.customClassName,i=(e.onChange,Object(ne.a)(e,["ext","classes","customClassName","onChange"]));let s="0",r=[];if(t){r=t.getExperienceExtensions();const e=t?t.modifiers.find(e=>e.type===ge.PROFESSION):null;e&&(s=e.value)}return o.a.createElement("div",Object.assign({className:"".concat(a.fieldContainer," ").concat(n)},i,{onClick:this.addExtension,onContextMenu:e=>{e.preventDefault(),this.removeExtension()}}),o.a.createElement("p",{className:a.extension},"+"+s),o.a.createElement("div",{className:a.checkboxContainer},r.map(e=>o.a.createElement(aa,{key:e.value+"-"+e.type}))))}}var ia=Object(Zt.a)({fieldContainer:{position:"relative"},extension:{position:"absolute",top:"-10px",textAlign:"center",width:"100%"},checkboxContainer:{position:"absolute",right:"5px",display:"flex",flexFlow:"row",flexWrap:"wrap",maxWidth:40,zIndex:1}})(na);const sa={row1:{paddingTop:10,maxHeight:35,minHeight:35,width:"100%",display:"flex"},row2:{maxHeight:50,minHeight:50,width:"100%",display:"flex"},row3:{maxHeight:50,minHeight:50,width:"100%",display:"flex",textAlign:"center"},firstInRow:{minHeight:50,maxHeight:50,minWidth:47,maxWidth:47},otherInRow:{maxHeight:50,minHeight:50,minWidth:47,maxWidth:47},otherInRow2:{maxHeight:50,minHeight:50,minWidth:46,maxWidth:46},lastRowChild:{margin:"15px 0 0 0"}};class ra extends l.Component{constructor(...e){super(...e),this.updateDeterminant=e=>t=>{e.value=t,U.updateEntity({determinants:U.data.entity.determinants})},this.updateDeterminantExperience=e=>{const t=U.data.entity.determinants;t.replaceDeterminant(e),U.updateEntity({determinants:t})}}render(){const e=this.props,t=e.classes,a=Object(ne.a)(e,["classes"]),n=U.data.entity.determinants,i=n.findDeterminant(Ne.SPEED),s=n.findDeterminant(Ne.BATTLE),r=n.findDeterminant(Ne.SHOOTING),l=n.findDeterminant(Ne.STRENGTH),c=n.findDeterminant(Ne.DURABILITY),m=n.findDeterminant(Ne.HEALTH),d=n.findDeterminant(Ne.ATTACK),p=n.findDeterminant(Ne.INITIATIVE),h=n.findDeterminant(Ne.DEXTERITY),u=n.findDeterminant(Ne.LEADER_SKILLS),y=n.findDeterminant(Ne.INTELLIGENCE),E=n.findDeterminant(Ne.CONTROL),g=n.findDeterminant(Ne.WILL),v=n.findDeterminant(Ne.CHARISMA);return o.a.createElement("div",a,o.a.createElement("div",{className:t.row1},o.a.createElement(zt,{className:t.firstInRow,value:i.value,onChange:this.updateDeterminant(i),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow,value:s.value,onChange:this.updateDeterminant(s),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow,value:r.value,onChange:this.updateDeterminant(r),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow,value:l.value,onChange:this.updateDeterminant(l),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow,value:c.value,onChange:this.updateDeterminant(c),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow2,value:m.value,onChange:this.updateDeterminant(m),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow,value:p.value,onChange:this.updateDeterminant(p),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow2,value:d.value,onChange:this.updateDeterminant(d),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow2,value:h.value,onChange:this.updateDeterminant(h),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow2,value:u.value,onChange:this.updateDeterminant(u),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow2,value:y.value,onChange:this.updateDeterminant(y),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow2,value:E.value,onChange:this.updateDeterminant(E),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow2,value:g.value,onChange:this.updateDeterminant(g),variant:Xt.INT}),o.a.createElement(zt,{className:t.otherInRow,value:v.value,onChange:this.updateDeterminant(v),variant:Xt.INT})),o.a.createElement("div",{className:t.row2},o.a.createElement(ia,{ext:i,customClassName:t.firstInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:s,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:r,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:l,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:c,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:m,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:p,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:d,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:h,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:u,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:y,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:E,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:g,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(ia,{ext:v,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience})),o.a.createElement("div",{className:t.row3},o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.firstInRow," ")},i.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},s.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},r.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},l.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},c.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},m.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},p.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},d.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},h.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},u.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},y.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},E.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},g.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},v.calculateExperienceValue())))}}var la=Object(Zt.a)(sa)(ra);const oa={control:(e,t)=>({width:"100%",display:"flex"}),dropdownIndicator:(e,t)=>({color:"transparent"}),indicatorSeparator:(e,t)=>({color:"transparent"})},ca={control:(e,t)=>({width:"100%",display:"flex"}),dropdownIndicator:(e,t)=>({color:"transparent"}),indicatorSeparator:(e,t)=>({color:"transparent"}),clearIndicator:(e,t)=>({color:"transparent"}),multiValueRemove:(e,t)=>({color:"ghostwhite",maxHeight:"1px"}),singleValue:(e,t)=>({color:"black",maxHeight:"1px"}),multiValueLabel:(e,t)=>({background:"transparent",display:"inline-flex","&::after":{content:'","'}}),multiValue:(e,t)=>({background:"transparent",display:"inline-flex",height:"14px"})};class ma extends l.Component{render(){const e=this.props,t=e.name,a=e.propName,n=void 0===a?t:a,i=e.value,s=void 0===i?U.data.entity[n]:i,r=e.options,l=void 0===r?U.data[t]:r,c=e.multi,m=e.className,d=e.customStyle,p=e.onChange,h=void 0===p?e=>U.updateEntity({[n]:e}):p;return o.a.createElement(Pe.a,{title:s&&s.description?s.description:""},o.a.createElement("div",{style:Object(v.a)({},{display:"inline-block"},{},d)},o.a.createElement($.a,{className:m,styles:c?ca:oa,value:s,options:l,onChange:h,components:Object(ee.a)(),getOptionLabel:e=>o.a.createElement("div",null,e.name),getOptionValue:e=>e.id,filterOption:(e,t)=>e.data.name.startsWith(t),placeholder:o.a.createElement("div",null),isSearchable:!0,isMulti:c})))}}class da extends l.Component{render(){const e=this.props.pWep,t=e.rangedWeapon,a=t.type,n=a.prepareTime.toString();return o.a.createElement("div",{style:{display:"flex",flexDirection:"column"},onContextMenu:t=>{t.preventDefault(),U.updateEntity({rangedWeapons:Rt(U.data.entity.rangedWeapons,e)})}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:{width:190}},t.name),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.minimumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.mediumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.maximumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.damage.value),o.a.createElement("div",{style:{width:38,textAlign:"center"}},n)),o.a.createElement("div",{style:{width:170,height:45,marginLeft:10,display:"flex"}},o.a.createElement(ma,{name:ut.entityName,customStyle:{width:140,height:45},value:e.ammunition,onChange:t=>{e.ammunition=t,this.setState({newAmmunition:t})}}),o.a.createElement("div",{onContextMenu:t=>{t.preventDefault(),e.ammunition=null,e.ammunitionAmount=0,this.setState({newAmmunition:null})}},e.ammunition?o.a.createElement(zt,{customStyle:{width:40},value:e.ammunitionAmount,variant:Xt.INT,onChange:t=>{e.ammunitionAmount=t,this.setState({currentAmount:t})}}):o.a.createElement("div",null))))}}var pa=h()({ammunitionAmountField:{minWidth:40,maxWidth:40}})(da);a(502);class ha extends l.Component{render(){const e=this.props,t=e.classes,a=e.customStyle,n=e.listStyle,i=e.name,s=e.propName,r=void 0===s?i:s,l=e.value,c=(void 0===l&&U.data.entity[i],e.data),m=void 0===c?U.data[i]:c,d=e.onGearAdd,p=void 0===d?e=>U.updateEntity({[r]:Tt(e,U.data.entity[r])}):d,h=e.children,u=Object(ne.a)(e,["classes","customStyle","listStyle","name","propName","value","data","onGearAdd","children"]);Object(v.a)({},t,{},a);return o.a.createElement("div",Object.assign({style:{width:"100%"}},u),o.a.createElement(ma,{name:i,options:m,customStyle:{width:"100%"},onChange:p,value:null}),o.a.createElement(Fe.a,{style:Object(v.a)({},{height:"100%",width:"100%"},{},n)},h))}}var ua=h()({container:{width:"100%"},selectComponent:{width:"100%"},itemsList:{height:"100%",width:"100%",overflow:"auto"},itemContainer:{display:"flex",flexDirection:"row"}})(ha);const ya={control:(e,t)=>({width:"100%",display:"flex"}),dropdownIndicator:(e,t)=>({color:"transparent"}),indicatorSeparator:(e,t)=>({color:"white"})};class Ea extends l.Component{constructor(...e){super(...e),this.getData=e=>e.map(e=>({label:e,value:e})),this.onSelected=e=>{this.props.onChange(e&&e.value)}}render(){const e=this.props,t=e.name,a=e.value,n=void 0===a?U.data.entity[t]:a,i=e.options,s=void 0===i?U.data[t]:i,r=Object(ne.a)(e,["name","value","options"]);return o.a.createElement($.a,Object.assign({},r,{styles:ya,options:s,value:{label:n,value:n},getOptionLabel:e=>o.a.createElement("div",null,e.label?e.label:"string"===typeof e?e:void 0),getOptionValue:e=>e,onChange:e=>U.updateEntity({[t]:e}),components:Object(ee.a)(),isSearchable:!0}))}}class ga extends l.Component{constructor(...e){super(...e),this.state={anchorEl:null,currentElement:null},this.handleClick=e=>t=>{this.setState({anchorEl:t.currentTarget,currentElement:e})},this.onRemove=e=>()=>{this.handleClose(),this.props.onRemove(e)},this.handleClose=()=>{this.setState({anchorEl:null,currentElement:null})}}render(){const e=this.props,t=e.name,a=e.data,n=void 0===a?U.data.entity[t]:a,i=(e.onRemove,e.listStyle,Object(ne.a)(e,["name","data","onRemove","listStyle"]));return o.a.createElement("div",i,n.map((e,t)=>{const a=e.name||e;return o.a.createElement("div",{key:"listed-entity-"+a,style:{display:"inline-block"}},e.name?e.description?o.a.createElement(Pe.a,{title:e.description},o.a.createElement("p",{onClick:this.handleClick(e),style:{margin:0}},(t>0?", ":"")+a)):o.a.createElement("p",{onClick:this.handleClick(e),style:{margin:0}},(t>0?", ":"")+a):o.a.createElement("p",{style:{margin:0}},(t>0?", ":"")+a),e.name&&o.a.createElement(We.a,{id:"listed-menu-item-"+e.name,anchorEl:this.state.anchorEl,open:e===this.state.currentElement&&null!==this.state.anchorEl,onClose:this.handleClose},o.a.createElement(ke.a,{onClick:this.onRemove(e)},"Remove")))}))}}class va extends l.Component{constructor(...e){super(...e),this.calc=(e,t)=>[e*t,e*t*6,e*t*360/1e3],this.calculateSpeed=e=>[this.calc(e,2),this.calc(e,4),this.calc(e,16)]}render(){const e=this.props,t=e.classes,a=e.entity,n=void 0===a?U.data.entity:a,i=this.calculateSpeed(n.determinants.findDeterminant(Ne.SPEED).calculateExperienceValue());return o.a.createElement("div",{className:t.container},o.a.createElement("div",{className:t.firstRow},o.a.createElement("div",{className:t.cell},i[0][0]),o.a.createElement("div",{className:t.cell},i[0][1]),o.a.createElement("div",{className:t.cell},i[0][2])),o.a.createElement("div",{className:t.nextRow},o.a.createElement("div",{className:t.cell},i[1][0]),o.a.createElement("div",{className:t.cell},i[1][1]),o.a.createElement("div",{className:t.cell},i[1][2])),o.a.createElement("div",{className:t.nextRow},o.a.createElement("div",{className:t.cell},i[2][0]),o.a.createElement("div",{className:t.cell},i[2][1]),o.a.createElement("div",{className:t.cell},i[2][2])))}}var wa=h()({container:{height:160,width:200,paddingLeft:140,paddingTop:80,display:"flex",flexFlow:"column"},firstRow:{display:"flex",height:45,width:"100%"},nextRow:{display:"flex",height:45,width:"100%"},cell:{width:70,textAlign:"center",alignSelf:"center"}})(va);class Na extends l.Component{constructor(...e){super(...e),this.onContextMenu=e=>t=>{t.preventDefault(),U.updateEntity({spells:St(U.data.entity.spells,e)})}}render(){const e=this.props,t=e.spell,a=e.disabled,n=t.ingredients.map(e=>e.name).join(", "),i=[o.a.createElement("div",{style:{width:155}},t.name),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.level),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.manaCost),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.range),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.durationTime.toString()),o.a.createElement("div",{style:{width:140}},n),o.a.createElement("div",{style:{width:130}},t.effect)];return a?o.a.createElement("div",{style:{display:"flex"}},i):o.a.createElement("div",{style:{display:"flex"},onContextMenu:this.onContextMenu(t)},i)}}var fa=Na;class xa extends l.Component{constructor(...e){super(...e),this.state={availableSpellSchools:new Map},this.onSpellSchoolAdd=e=>{const t=U.data.entity.spellSchools,a=t.indexOf(t.find(t=>t.spellSchool.name===e.name));a>=0&&t.splice(a,1);let n=this.state.availableSpellSchools.get(e);U.updateEntity({spellSchools:[...t,n]})},this.onSpellSchoolRemove=e=>t=>{t.preventDefault();let a=St(U.data.entity.spellSchools,e);this.refreshRelevantMagicSchools(),U.updateEntity({spellSchools:a})},this.refreshRelevantMagicSchools=()=>{const e=new xt;e.currentSpellSchools=U.data.entity.spellSchools,e.realm=U.data.currentRealm,xa.magicService.getAvailableSpellSchools(e,this.setSpellSchools)},this.setSpellSchools=e=>{this.setState({availableSpellSchools:this.assembleSpellSchools(e),currentSpellSchools:U.data.entity.spellSchools})},this.assembleSpellSchools=e=>{const t=this.state.availableSpellSchools;return t.clear(),e.forEach(e=>t.set(e.spellSchool,e)),t}}render(){const e=U.data.entity;this.state.currentSpellSchools!==e.spellSchools&&this.refreshRelevantMagicSchools();const t=[...this.state.availableSpellSchools.keys()];return o.a.createElement("div",null,o.a.createElement(ua,{style:{height:400,width:200,paddingTop:10},listStyle:{height:300,width:"100%",overflow:"auto"},data:t,onGearAdd:this.onSpellSchoolAdd},e.spellSchools.map(e=>o.a.createElement("p",{key:xa.spellSchoolLevelText(e),style:{margin:0},onContextMenu:this.onSpellSchoolRemove(e)},xa.spellSchoolLevelText(e)))))}}xa.magicService=new Lt,xa.spellSchoolLevelText=e=>e.spellSchool.name+" p. "+e.level;var Ca=xa;const Ra=new Nt;class Ta extends l.Component{constructor(...e){super(...e),this.state={damageText:""},this.updateDamageValue=()=>{Ra.calculateMeleeDamage(this.props.weapon.id,e=>this.setState({damageText:e,weapon:this.props.weapon}))},this.onRightClick=(e,t)=>a=>{a.preventDefault(),U.updateEntity({[e]:Rt(U.data.entity[e],t)})}}render(){const e=this.props,t=e.name,a=e.classes,n=e.customStyle,i=e.weapon,s=e.disabled,r=Object(v.a)({},a,{},n);i!==this.state.weapon&&this.updateDamageValue();const l=[o.a.createElement("div",{className:r.itemName},i.name),o.a.createElement("div",{className:r.itemVariable},i.getFinalValueForType(Ne.INITIATIVE)),o.a.createElement("div",{className:r.itemVariable},i.getFinalValueForType(Ne.BATTLE)),o.a.createElement("div",{className:r.damageText},this.state.damageText),o.a.createElement("div",{className:r.itemVariable},i.getFinalValueForType(Ne.PARRY))];return s?o.a.createElement("div",{className:r.itemContainer},l):o.a.createElement("div",{className:r.itemContainer,onContextMenu:this.onRightClick(t,i)},l)}}var Ia=h()({itemContainer:{display:"flex",flexDirection:"row"},itemName:{minWidth:180,maxWidth:180},itemVariable:{minWidth:51,maxWidth:51,textAlign:"center"},damageText:{minWidth:51,maxWidth:51,textAlign:"center",fontSize:12,paddingTop:5}})(Ta);class ba extends l.Component{constructor(...e){super(...e),this.determinantService=new wt,this.state={anchorEl:null,currentElement:null,generateStatsAction:()=>{const e=U.data.entity.race;e&&this.determinantService.rollForRace(e)}},this.handleClose=()=>{this.setState({anchorEl:null,showMenu:""})}}render(){const e=this.props,t=e.classes,a=e.t,n=U.data.entity;return o.a.createElement("div",{className:t.root},o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:33,paddingLeft:33,width:860}},o.a.createElement(zt,{name:"name",customStyle:{width:200}}),o.a.createElement(ma,{name:rt.entityName,customStyle:{width:140,paddingLeft:20},options:U.data.currentRealmData.races}),o.a.createElement(Ea,{name:"gender",className:t.genderSelect}),o.a.createElement(ma,{name:He.entityName,customStyle:{width:240}}),o.a.createElement(ma,{name:mt.entityName,propName:"personality",customStyle:{width:148}})),o.a.createElement("div",{style:{paddingTop:30,paddingLeft:33,width:860}},o.a.createElement(zt,{name:"age",variant:Xt.INT,customStyle:{width:80}}),o.a.createElement(zt,{name:"height",variant:Xt.INT,customStyle:{width:100,paddingLeft:10}}),o.a.createElement(zt,{name:"weight",variant:Xt.FLOAT,customStyle:{width:90,paddingLeft:20}}),o.a.createElement(ma,{name:pt.entityName,customStyle:{width:110,paddingLeft:10}}),o.a.createElement(ma,{name:dt.entityName,customStyle:{width:90,paddingLeft:0}}),o.a.createElement(ma,{name:gt.entityName,propName:"physicalFeatures",multi:!0,customStyle:{width:280,paddingLeft:60,maxHeight:70,position:"relative",top:-30,fontSize:"14px"}})),o.a.createElement("div",{style:{paddingTop:30,paddingLeft:33,width:860,height:40,display:"flex"}},o.a.createElement(ma,{name:Me.entityName,propName:"currentProfession",options:kt.getProfessions(),onChange:kt.updateProfession,customStyle:{width:235,paddingLeft:0}}),o.a.createElement(Fe.a,{style:{width:360,height:40}},o.a.createElement(ga,{name:"professions",onRemove:kt.removeProfessionFromHistory,style:{display:"inline-block",width:350,fontSize:"14px"}})),o.a.createElement(Fe.a,{style:{width:200,height:40}},o.a.createElement(ga,{name:"outgoingProfessions",data:kt.nextProfessions(),onRemove:kt.removeProfessionFromHistory,style:{display:"inline-block",width:200,height:40,fontSize:"14px"}}))),o.a.createElement("div",{style:{paddingTop:43,width:890,display:"flex"}},o.a.createElement("div",{style:{width:230,height:50},onContextMenu:e=>{e.preventDefault(),this.setState({anchorEl:e.target,currentElement:["generateStats"]})}}),o.a.createElement(la,{style:{width:650}})),o.a.createElement("div",{style:{paddingTop:10,paddingLeft:20,width:860,display:"flex"}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:0,width:430}},o.a.createElement(ua,{style:{width:400,height:220,paddingLeft:40,paddingTop:10},listStyle:{height:180},name:Ze.entityName,propName:"meleeWeapons"},n.meleeWeapons.map(e=>o.a.createElement(Ia,{key:e.name,name:"meleeWeapons",weapon:e}))),o.a.createElement(ua,{style:{width:400,height:230,paddingLeft:30,paddingTop:10},listStyle:{height:180},name:yt.entityName,onGearAdd:Nt.addPersonalRangedWeapon},n.rangedWeapons.map(e=>o.a.createElement(pa,{key:e.rangedWeapon.name,name:"meleeWeapons",pWep:e}))),o.a.createElement(ua,{style:{width:400,height:220,paddingLeft:20},name:Xe.entityName},n.armor.map(e=>o.a.createElement(_t,{key:e.name,name:"meleeWeapons",armor:e})))),o.a.createElement("div",{style:{paddingTop:0,paddingLeft:10,width:210}},o.a.createElement(ua,{style:{width:200,height:360,paddingLeft:0,paddingTop:10},listStyle:{height:300},name:Ve.entityName,propName:"skills",data:Ct(U.data.skill,n.skills)},n.skills.map(e=>o.a.createElement(Pe.a,{title:e.description},o.a.createElement("p",{key:e.name,style:{margin:0},onContextMenu:t=>{t.preventDefault(),U.updateEntity({skills:Rt(n.skills,e)})}},e.name)))),o.a.createElement(Gt,null)),o.a.createElement(Ca,null))),o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840,display:"flex"}},o.a.createElement(ua,{style:{width:630},listStyle:{height:220},name:et.entityName,propName:"spells",data:Lt.getRelevantSpells()},n.spells.map(e=>o.a.createElement(fa,{spell:e}))),o.a.createElement("div",{style:{width:200}},o.a.createElement(zt,{name:"fatePoints",variant:Xt.INT,customStyle:{width:"100%",height:50,paddingTop:55}}),o.a.createElement(zt,{name:"mana",variant:Xt.INT,customStyle:{width:"100%",height:50,paddingTop:30}}),o.a.createElement(zt,{name:"currentMana",variant:Xt.INT,customStyle:{width:"100%",height:50,paddingTop:35}}))),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:300,paddingTop:20}},o.a.createElement(ua,{style:{width:300},listStyle:{height:370},name:qe.entityName,onGearAdd:Pt.addItemToInventory},n.inventory.map(e=>o.a.createElement(Jt,{key:e.item.name,inventory:e}))),o.a.createElement("div",{style:{paddingLeft:200}},Pt.inventoryWeight()," kg"),o.a.createElement(ua,{style:{width:285},listStyle:{height:150},name:it.entityName,data:U.data.currentRealmData.currencies,onGearAdd:Wt.addMoney},n.money.map(e=>o.a.createElement(Qt,{key:e.currency.name,money:e})))),o.a.createElement("div",null,o.a.createElement(wa,null),o.a.createElement("div",{style:{width:350,height:160,paddingTop:10,display:"flex"}},o.a.createElement(ua,{style:{width:100,paddingTop:15},listStyle:{height:100},name:nt.entityName,propName:"languages",data:U.data.currentRealmData.languages},n.languages.map(e=>o.a.createElement("div",{onContextMenu:t=>{t.preventDefault(),U.updateEntity({languages:St(n.languages,e)})}},e.name))),o.a.createElement(zt,{name:"health",variant:Xt.TEXT,multiline:!0,customStyle:{width:130,height:100,alignSelf:"flex-end"}}),o.a.createElement(zt,{name:"sanityPoints",variant:Xt.INT,customStyle:{width:100,paddingLeft:10}})),o.a.createElement("div",{style:{width:350}},o.a.createElement(ma,{name:at.entityName,customStyle:{width:170,height:50,marginLeft:170,marginTop:50},options:U.data.currentRealmData.nations}),o.a.createElement(zt,{name:"parents",variant:Xt.TEXT,customStyle:{width:120,height:35,marginTop:0,marginLeft:220}}),o.a.createElement(zt,{name:"family",variant:Xt.TEXT,customStyle:{width:220,height:80,marginLeft:110}})),o.a.createElement("div",{style:{width:350,display:"flex"}},o.a.createElement(zt,{name:"socialLevel",variant:Xt.TEXT,customStyle:{width:80,height:60,marginTop:10,marginLeft:110}}),o.a.createElement(ma,{name:lt.entityName,customStyle:{width:150,marginTop:35,marginLeft:5},data:U.data.currentRealmData.religions}))),o.a.createElement("div",{style:{marginLeft:20,marginTop:50}},o.a.createElement("div",{style:{marginTop:20}},"aktualnie:"),o.a.createElement(zt,{name:"experience",variant:Xt.INT,customStyle:{width:150,height:150}}),o.a.createElement("div",{style:{marginTop:20}},"ca\u0142kowicie:"),o.a.createElement(zt,{name:"totalExperience",variant:Xt.INT,customStyle:{width:150,height:150}}))),o.a.createElement(ua,{style:{width:700},listStyle:{height:100},name:ct.entityName,propName:"animals"},n.animals.map(e=>o.a.createElement(Ft,{animal:e}))))),o.a.createElement(We.a,{anchorEl:this.state.anchorEl,open:this.state.currentElement&&null!==this.state.anchorEl,onClose:this.handleClose},this.state.currentElement&&this.state.currentElement.map(e=>o.a.createElement(ke.a,{onClick:()=>{this.handleClose(),this.state[e+"Action"]()}},a(e)))))}}var Sa=h()(()=>({root:{marginTop:5,background:"url(".concat(At.a,")"),fontFamily:"wfrp",fontSize:"24px",backgroundSize:"cover",height:"1231px",width:"1800px",display:"flex"},genderSelect:{display:"inline-block",width:85}}))(Object(g.b)()(ba));const La=e=>o.a.createElement(ea.a,Object.assign({style:{fontSize:14,margin:-2}},e));class Oa extends l.Component{render(){const e=this.props,t=e.ext,a=e.classes,n=e.customClassName,i=Object(ne.a)(e,["ext","classes","customClassName"]);let s="0",r=[];if(t){r=t.getExperienceExtensions();const e=t?t.modifiers.find(e=>e.type===ge.PROFESSION):null;e&&(s=e.value)}return o.a.createElement("div",Object.assign({className:"".concat(a.fieldContainer," ").concat(n)},i),o.a.createElement("p",{className:a.extension},"+"+s),o.a.createElement("div",{className:a.checkboxContainer},r.map(e=>o.a.createElement(La,{key:e.value+"-"+e.type}))))}}var Aa=Object(Zt.a)({fieldContainer:{position:"relative"},extension:{position:"absolute",top:"-10px",textAlign:"center",width:"100%"},checkboxContainer:{position:"absolute",right:"5px",display:"flex",flexFlow:"row",flexWrap:"wrap",maxWidth:40,zIndex:1}})(Oa);class Da extends l.Component{render(){const e=this.props,t=e.classes,a=Object(ne.a)(e,["classes"]),n=U.data.entity.determinants,i=n.findDeterminant(Ne.SPEED),s=n.findDeterminant(Ne.BATTLE),r=n.findDeterminant(Ne.SHOOTING),l=n.findDeterminant(Ne.STRENGTH),c=n.findDeterminant(Ne.DURABILITY),m=n.findDeterminant(Ne.HEALTH),d=n.findDeterminant(Ne.ATTACK),p=n.findDeterminant(Ne.INITIATIVE),h=n.findDeterminant(Ne.DEXTERITY),u=n.findDeterminant(Ne.LEADER_SKILLS),y=n.findDeterminant(Ne.INTELLIGENCE),E=n.findDeterminant(Ne.CONTROL),g=n.findDeterminant(Ne.WILL),v=n.findDeterminant(Ne.CHARISMA);return o.a.createElement("div",a,o.a.createElement("div",{className:t.row1,style:{paddingLeft:15}},o.a.createElement("div",{className:t.firstInRow},i.value),o.a.createElement("div",{className:t.otherInRow},s.value),o.a.createElement("div",{className:t.otherInRow},r.value),o.a.createElement("div",{className:t.otherInRow},l.value),o.a.createElement("div",{className:t.otherInRow},c.value),o.a.createElement("div",{className:t.otherInRow2},m.value),o.a.createElement("div",{className:t.otherInRow},p.value),o.a.createElement("div",{className:t.otherInRow2},d.value),o.a.createElement("div",{className:t.otherInRow2},h.value),o.a.createElement("div",{className:t.otherInRow2},u.value),o.a.createElement("div",{className:t.otherInRow2},y.value),o.a.createElement("div",{className:t.otherInRow2},E.value),o.a.createElement("div",{className:t.otherInRow2},g.value),o.a.createElement("div",{className:t.otherInRow},v.value)),o.a.createElement("div",{className:t.row2},o.a.createElement(Aa,{ext:i,customClassName:t.firstInRow}),o.a.createElement(Aa,{ext:s,customClassName:t.otherInRow}),o.a.createElement(Aa,{ext:r,customClassName:t.otherInRow}),o.a.createElement(Aa,{ext:l,customClassName:t.otherInRow}),o.a.createElement(Aa,{ext:c,customClassName:t.otherInRow}),o.a.createElement(Aa,{ext:m,customClassName:t.otherInRow2}),o.a.createElement(Aa,{ext:p,customClassName:t.otherInRow}),o.a.createElement(Aa,{ext:d,customClassName:t.otherInRow2}),o.a.createElement(Aa,{ext:h,customClassName:t.otherInRow2}),o.a.createElement(Aa,{ext:u,customClassName:t.otherInRow2}),o.a.createElement(Aa,{ext:y,customClassName:t.otherInRow2}),o.a.createElement(Aa,{ext:E,customClassName:t.otherInRow2}),o.a.createElement(Aa,{ext:g,customClassName:t.otherInRow2}),o.a.createElement(Aa,{ext:v,customClassName:t.otherInRow})),o.a.createElement("div",{className:t.row3},o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.firstInRow," ")},i.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},s.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},r.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},l.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},c.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},m.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},p.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},d.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},h.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},u.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},y.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},E.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},g.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},v.calculateExperienceValue())))}}var Pa=Object(Zt.a)(sa)(Da);class Wa extends l.Component{render(){const e=this.props.pWep,t=e.rangedWeapon,a=t.type,n=a.prepareTime.toString();return o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:{width:190}},t.name),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.minimumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.mediumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.maximumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.damage.value),o.a.createElement("div",{style:{width:38,textAlign:"center"}},n)),o.a.createElement("div",{style:{width:170,height:45,marginLeft:10,display:"flex"}},o.a.createElement("div",{style:{width:140,height:45}},e.ammunition&&e.ammunition.name),o.a.createElement("div",null,e.ammunition?o.a.createElement("div",{style:{width:40}},e.ammunitionAmount):o.a.createElement("div",null))))}}var ka=Wa;class Fa extends l.Component{render(){const e=this.props,t=e.children,a=e.data,n=e.listStyle,i=Object(ne.a)(e,["children","data","listStyle"]);return o.a.createElement("div",i,o.a.createElement(Fe.a,{style:Object(v.a)({},{height:"100%",width:"100%"},{},n)},t,a&&a.map(e=>o.a.createElement("div",null,e.name||e))))}}var Va=Fa;class Ha extends l.Component{constructor(...e){super(...e),this.determinantService=new wt,this.state={anchorEl:null,currentElement:null,generateStatsAction:()=>{const e=U.data.entity.race;e&&this.determinantService.rollForRace(e)}},this.handleClose=()=>{this.setState({anchorEl:null,showMenu:""})},this.listToDivs=e=>e?e.map(e=>o.a.createElement("div",null,e.name)):o.a.createElement("div",null)}render(){const e=this.props,t=e.classes,a=e.t,n=(e.editable,U.data.entity);return o.a.createElement("div",{className:t.root},o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:40,paddingLeft:33,width:860,display:"flex"}},o.a.createElement("div",{style:{width:200}},n.name),o.a.createElement("div",{style:{width:140,paddingLeft:20}},n.race&&n.race.name),o.a.createElement("div",{style:{display:"inline-block",width:85}},"MALE"===n.gender?"M":"K"),o.a.createElement("div",{style:{width:240}},n.professionClass&&n.professionClass.name),o.a.createElement("div",{style:{width:148}},a(n.personality&&n.personality.name))),o.a.createElement("div",{style:{paddingTop:40,paddingLeft:33,width:860,display:"flex"}},o.a.createElement("div",{style:{width:80,paddingLeft:5}},n.age),o.a.createElement("div",{style:{width:100,paddingLeft:10}},n.height," cm"),o.a.createElement("div",{style:{width:90,paddingLeft:20}},n.weight," kg"),o.a.createElement("div",{style:{width:110,paddingLeft:10}},n.hairColor&&n.hairColor.name),o.a.createElement("div",{style:{width:90,paddingLeft:0}},n.eyeColor&&n.eyeColor.name),o.a.createElement("div",{style:{width:265,paddingLeft:70,maxHeight:70,position:"relative",top:-30,fontSize:"14px"}},this.listToDivs(n.physicalFeatures))),o.a.createElement("div",{style:{paddingTop:40,paddingLeft:33,width:860,display:"flex"}},o.a.createElement("div",{style:{width:240,paddingLeft:10}},n.currentProfession&&n.currentProfession.name),o.a.createElement(Va,{data:n.professions,style:{display:"inline-block",width:350,fontSize:"14px"}}),o.a.createElement(ga,{name:"outgoingProfessions",data:kt.nextProfessions(),onRemove:kt.removeProfessionFromHistory,style:{display:"inline-block",width:200,height:40,fontSize:"14px"}})),o.a.createElement("div",{style:{paddingTop:50,width:890,display:"flex"}},o.a.createElement("div",{style:{width:230,height:50}}),o.a.createElement(Pa,{style:{width:650}})),o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:860,display:"flex"}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:0,width:430}},o.a.createElement(Va,{style:{width:400,height:170,paddingLeft:40,paddingTop:60}},n.meleeWeapons.map(e=>o.a.createElement(Ia,{key:e.name,name:"meleeWeapons",weapon:e,disabled:!0}))),o.a.createElement(Va,{style:{width:400,height:180,paddingLeft:30,paddingTop:60}},n.rangedWeapons.map(e=>o.a.createElement(ka,{key:e.rangedWeapon.name,pWep:e}))),o.a.createElement(Va,{style:{width:400,height:230,paddingLeft:20,paddingTop:50}},n.armor.map(e=>o.a.createElement(_t,{key:e.name,name:"meleeWeapons",armor:e,disabled:!0})))),o.a.createElement("div",{style:{paddingTop:0,paddingLeft:10,width:210}},o.a.createElement(Va,{style:{width:200,height:315,paddingLeft:0,paddingTop:60}},n.skills.map(e=>o.a.createElement(Pe.a,{title:e.description},o.a.createElement("p",{key:e.name,style:{margin:0}},e.name)))),o.a.createElement(Gt,null)),o.a.createElement(Va,{style:{height:350,width:200,paddingTop:60},listStyle:{height:250,width:"100%",overflow:"auto"}},n.spellSchools.map(e=>o.a.createElement("p",{key:Ca.spellSchoolLevelText(e),style:{margin:0}},Ca.spellSchoolLevelText(e)))))),o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840,display:"flex"}},o.a.createElement(Va,{style:{width:630,height:170,paddingTop:50}},n.spells.map(e=>o.a.createElement(fa,{spell:e,disabled:!0}))),o.a.createElement("div",{style:{width:200}},o.a.createElement("div",{style:{width:"100%",height:50,paddingTop:60,textAlign:"center"}},n.fatePoints),o.a.createElement("div",{style:{width:"100%",height:50,paddingTop:35,textAlign:"center"}},n.mana),o.a.createElement("div",{style:{width:"100%",height:50,paddingTop:40,textAlign:"center"}},n.currentMana))),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:300,paddingTop:20}},o.a.createElement(Va,{style:{width:300,height:368,paddingTop:30}},n.inventory.map(e=>o.a.createElement("div",{key:e.id,style:{width:290,display:"flex"}},o.a.createElement("div",{style:{width:150,minWidth:150}},e.item.name),o.a.createElement("div",{style:{width:70,textAlign:"center"}},Jt.calculateWeight(e)," kg"),o.a.createElement("div",{style:{width:50,textAlign:"center"}},e.amount)))),o.a.createElement("div",{style:{paddingLeft:200}},Pt.inventoryWeight()," kg"),o.a.createElement(Va,{style:{width:285,height:150,paddingTop:50}},n.money.map(e=>o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:150}},e.currency.name),o.a.createElement("div",{style:{width:35,textAlign:"center"}},e.amount.gold),o.a.createElement("div",{style:{width:35,textAlign:"center"}},e.amount.silver),o.a.createElement("div",{style:{width:50,textAlign:"center"}},e.amount.lead))))),o.a.createElement("div",null,o.a.createElement(wa,null),o.a.createElement("div",{style:{width:350,height:160,paddingTop:55,display:"flex"}},o.a.createElement(Va,{style:{width:90,height:100}},n.languages.map(e=>o.a.createElement("div",null,e.name))),o.a.createElement("div",{style:{width:130,height:100,paddingLeft:10}},n.health),o.a.createElement("div",{style:{width:100,paddingLeft:10,textAlign:"center"}},n.sanityPoints)),o.a.createElement("div",{style:{width:350}},o.a.createElement("div",{style:{width:170,height:50,marginLeft:170,marginTop:50}},n.nation&&n.nation.name),o.a.createElement("div",{style:{width:120,height:35,marginTop:0,marginLeft:220}},n.parents),o.a.createElement("div",{style:{width:220,height:80,marginLeft:110}},n.family)),o.a.createElement("div",{style:{width:350,display:"flex"}},o.a.createElement("div",{style:{width:80,height:60,marginTop:10,marginLeft:110}},n.socialLevel),o.a.createElement("div",{style:{width:150,marginTop:35,marginLeft:5}},n.religion&&n.religion.name))),o.a.createElement("div",{style:{marginLeft:20,marginTop:50}},o.a.createElement("div",{style:{marginTop:20}},"aktualnie:"),o.a.createElement("div",{style:{width:150,height:150}},n.experience),o.a.createElement("div",{style:{marginTop:20}},"ca\u0142kowicie:"),o.a.createElement("div",{style:{width:150,height:150}},n.totalExperience))),o.a.createElement(Va,{style:{width:700},listStyle:{height:100},name:ct.entityName,propName:"animals"},n.animals.map(e=>o.a.createElement(Ft,{animal:e}))))),o.a.createElement(We.a,{anchorEl:this.state.anchorEl,open:this.state.currentElement&&null!==this.state.anchorEl,onClose:this.handleClose},this.state.currentElement&&this.state.currentElement.map(e=>o.a.createElement(ke.a,{onClick:()=>{this.handleClose(),this.state[e+"Action"]()}},a(e)))))}}var ja=h()(()=>({root:{marginTop:5,background:"url(".concat(At.a,")"),fontFamily:"wfrp",fontSize:"24px",backgroundSize:"cover",height:"1231px",width:"1800px",display:"flex"},genderSelect:{display:"inline-block",width:85}}))(Object(g.b)()(Ha));const Ma={root:{display:"flex"},field:{width:"100%"}},Ka=(e,t,a)=>{const n=e.name,i=e.type,s=e.suggestions,r=e.toView,l=e.toModel;let c=U.data.entity[n];c=r?r(c):c;const m=Ga(n,l);switch(i){case N:return o.a.createElement(Q.a,{key:n,label:t(n),value:c||"",onChange:m,style:Ma.field,InputProps:{readOnly:!a}});case f:return o.a.createElement(Q.a,{key:n,label:t(n),value:c||"",onChange:m,style:Ma.field,type:"password",InputProps:{readOnly:!a}});case x:return o.a.createElement(Q.a,{key:n,label:t(n),value:c||"",onChange:m,multiline:!0,style:Ma.field,InputProps:{readOnly:!a}});case R:return o.a.createElement(se,{key:n,label:t(n),value:c||"",onChange:m,style:Ma.field,InputProps:{readOnly:!a}});case T:return o.a.createElement(Q.a,{key:n,label:t(n),value:c||"",type:"number",onChange:m,style:Ma.field,InputProps:{readOnly:!a}});case D:return o.a.createElement(Te,{key:n,name:n,value:c,editable:a});case S:return o.a.createElement(be,{key:n,name:n,suggestions:s,editable:a});case L:return o.a.createElement(be,{key:n,name:n,suggestions:s,multi:!0,editable:a});case I:return o.a.createElement(ae,{key:n,name:n,suggestions:s,value:c,editable:a});case b:return o.a.createElement(ae,{key:n,name:n,suggestions:s,value:c,multi:!0,editable:a});case O:return o.a.createElement(Le,{key:n,name:n,editable:a});case A:return o.a.createElement(ce,{key:n,name:n,editable:a});case P:return o.a.createElement(Ce,{id:n,name:n,value:c,editable:a});case W:return o.a.createElement(de,{key:n,name:n,suggestions:s,editable:a});case k:return o.a.createElement(De,{key:n});case F:return a?o.a.createElement(Sa,null):o.a.createElement(ja,null)}throw e},Ga=(e,t)=>a=>{const n=a.target?a.target.value:a,i=t?t(n):n,s=U.data.entity;s.updateWith({[e]:i}),U.update({entity:s})};class Ua extends l.Component{constructor(...e){super(...e),this.saveForm=()=>{const e=this.props,t=e.entity,a=e.entityName;U.services[a].save(t,()=>U.showTable(a))},this.getFormFields=()=>{const e=this.props,t=e.entityName,a=e.t,n=J.hasAuthority(t);return U.formFields[t].map(e=>Ka(e,a,n)).map(e=>o.a.createElement(m.a,{key:e.key,item:!0},e))},this.updateEntity=(e,t)=>a=>{const n=t?t(a.target.value):a.target.value;this.updateForm({[e]:n})},this.updateForm=e=>{this.props.entity.updateWith(e),this.setState({entity:this.props.entity})}}render(){const e=this.props,t=e.entityName,a=e.classes,n=J.hasAuthority(t);return o.a.createElement(m.a,{container:!0,direction:"column",className:a.root},this.getFormFields(),o.a.createElement(m.a,{item:!0},n?[o.a.createElement(d.a,{onClick:this.saveForm},o.a.createElement(u.a,null)),o.a.createElement(d.a,{onClick:()=>U.showTable(t)},o.a.createElement(y.a,null))]:o.a.createElement(d.a,{onClick:()=>{U.data.afterForm?U.data.afterForm():U.showTable(t)}},o.a.createElement(E.a,null))))}}var Ba=Object(g.b)()(h()(e=>({root:{width:"95%",margin:"auto"}}))(Ua)),_a=a(612);class Ya extends j{updateWith(e){return super.updateWith(e),this.updateEntityProp("nation",()=>new at),this}}Ya.entityName="place",G(Ya,[M("name",N),M("description",x),M("nation",S)],[K("name",N),K("description",x),K("nation",S,at.entityName)]);class za extends j{updateWith(e){return super.updateWith(e),this.updateEntityProp("place",()=>new Ya),this}}za.entityName="picture",G(za,[M("name",N),M("place",S)],[]);const Xa=new class extends _{uploadPicture(e,t){this.rawPostRequest(za.entityName,e,t)}updateMetadata(e,t){this.postRequestWithoutResponse(e,za.entityName,t)}};class qa extends l.Component{constructor(...e){super(...e),this.onResponse=()=>{U.showTable(za.entityName),U.services.picture.loadData()},this.upload=e=>{const t=e[0];if(!t)return;const a=new FormData;a.append("file",t),Xa.uploadPicture(a,this.onResponse)},this.setName=e=>{const t=e.target.value;this.props.value.name=t,this.setState({name:t})},this.setPlace=e=>{this.props.value.place=e,this.setState({place:e})},this.save=()=>{const e=this.props.value,t={id:e.id,name:e.name};e.place&&(t.placeId=e.place.id),Xa.updateMetadata(t,this.onResponse)}}render(){const e=this.props,t=e.value,a=e.t,n=J.hasAuthority(za.entityName);return o.a.createElement("div",{style:{margin:10}},t?o.a.createElement(m.a,{container:!0,spacing:2},o.a.createElement(m.a,{item:!0,container:!0,xs:12,alignItems:"center"},o.a.createElement(m.a,{item:!0,xs:4},o.a.createElement(Q.a,{value:t?t.name:"",onChange:this.setName,disabled:!t})),o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(be,{name:Ya.entityName,onChange:this.setPlace,value:t.place,editable:!0})),o.a.createElement(m.a,{item:!0,xs:2},n?o.a.createElement(pe.a,{onClick:this.save},a("save")):o.a.createElement("div",null))),o.a.createElement(m.a,{item:!0,xs:12},o.a.createElement("img",{src:za.entityName+"/"+t.id,alt:t.name,style:{maxWidth:"80vw",maxHeight:"50vh"}}))):o.a.createElement(_a.a,{acceptedFiles:["image/jpeg","image/jpg","image/png"],onChange:this.upload}),o.a.createElement(d.a,{onClick:()=>U.showTable(za.entityName)},o.a.createElement(y.a,null)))}}var Ja=Object(g.b)()(qa),Qa=a(411),Za=a(611);class $a extends j{constructor(...e){super(...e),this.places=[],this.persons=[]}updateWith(e){return this.updateProp(e,"id"),this.updateProp(e,"uuid"),this.updateProp(e,"name"),this.updateEntityProp(e,"realm",()=>new ft),this.updateEntityList(e,"places",()=>new Ya),this.updateEntityList(e,"persons",()=>new vt),this}}$a.entityName="scenario",G($a,[M("name",N),M("realm",S)],[K("name",N),K("realm",S,ft.entityName),K("places",L,Ya.entityName),K("persons",L,vt.entityName)]);class en extends l.Component{constructor(...e){super(...e),this.state={currentScenario:void 0,images:[],imgStyle:{maxWidth:"40vw",height:"30vh"},viewerIsOpen:!1,currentImage:null},this.fetchImages=e=>{(class{static fetchPicturesForScenario(e,t){fetch("".concat(za.entityName,"/").concat($a.entityName,"/").concat(e.id),{method:"get"}).then(e=>{e.ok?e.json().then(t):alert(e.status)})}}).fetchPicturesForScenario(e,e=>{const t=e.map(e=>"picture/".concat(e));this.setState({images:t})})}}render(){const e=U.data.entity,t=this.state,a=t.images,n=t.imgStyle,i=t.viewerIsOpen,s=t.currentImage;return o.a.createElement("div",{style:{paddingTop:10}},e?o.a.createElement(m.a,{container:!0,spacing:2},o.a.createElement(m.a,{item:!0,container:!0,xs:3},e.persons.map(t=>o.a.createElement(m.a,{item:!0,xs:3},o.a.createElement(pe.a,{onClick:()=>{U.showForm(vt.entityName,t),U.update({afterForm:()=>U.updateScenario(e)})}},t.name)))),o.a.createElement(m.a,{item:!0,container:!0,xs:9,spacing:2},a.map((e,t)=>o.a.createElement(m.a,{item:!0},o.a.createElement(he.a,{elevation:6},o.a.createElement("img",{src:e,alt:e,style:n,onClick:()=>this.setState({currentImage:t,viewerIsOpen:!0})})))))):o.a.createElement("div",null,o.a.createElement(be,{name:$a.entityName,onChange:e=>{U.updateScenario(e),this.fetchImages(e)},value:null,editable:!0})),o.a.createElement(Za.a,null,o.a.createElement(Qa.a,{onClose:()=>this.setState({viewerIsOpen:!1,currentImage:null}),open:i},o.a.createElement(Za.b,{currentIndex:s,views:a.map(e=>({source:e}))}))))}}var tn=Object(g.b)()(en),an=a(655),nn=a(656),sn=a(657),rn=a(658),ln=a(591),on=a.n(ln);const cn=[at.entityName,nt.entityName,lt.entityName,it.entityName,rt.entityName,$e.entityName,vt.entityName],mn={nation:"nations",worldLanguage:"languages",religion:"religions",currency:"currencies",race:"races",spellSchool:"spellSchools",person:"persons"};class dn extends _{constructor(...e){super(...e),this.getRealmData=e=>{e&&this.requestForPath("realmData/".concat(e.id),t=>U.update({currentRealmData:t,currentRealm:e}))}}static hasRealmData(e){return U.data.currentRealm&&U.data.currentRealmData&&cn.includes(e)}static getRealmData(e){return U.data.currentRealmData[mn[e]]}}class pn extends l.Component{constructor(...e){super(...e),this.options={filterType:"textField",selectableRows:"single",selectableRowsOnClick:!0,disableToolbarSelect:!0,selectableRowsHeader:!1,customToolbarSelect:(e,t,a)=>{if(e.data.length>0){const a=U.data.showTable,n=t[e.data[0].index].data[0],i=It(U.data[a],{name:n});return J.hasAuthority(a)?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(d.a,{onClick:()=>U.showForm(a,i)},o.a.createElement(an.a,null)),o.a.createElement(d.a,{onClick:()=>U.services[a].delete(i)},o.a.createElement(nn.a,null)))):o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{onClick:()=>U.showForm(a,i)},o.a.createElement(sn.a,null)))}return o.a.createElement(o.a.Fragment,null)}},this.translateColumns=e=>{const t=this.props.t;return e.forEach(e=>e.label=t(e.name)),e}}render(){const e=U.data.showTable,t=this.props.t,a=J.hasAuthority(e),n=o.a.createElement("div",null,t(e),a?o.a.createElement(d.a,{onClick:()=>U.update({showTable:null,showForm:e,entity:U.suppliers[e]()})},o.a.createElement(rn.a,null)):o.a.createElement("div",null)),i=dn.hasRealmData(e)?dn.getRealmData(e):U.data[e];return o.a.createElement(on.a,{title:n,options:this.options,columns:this.translateColumns(U.columns[e]),data:i})}}var hn=Object(g.b)()(pn);class un extends l.Component{render(){const e=U.data,t=e.showTable,a=e.showForm,n=e.showScenario,i=e.entity;let s=o.a.createElement("div",null);return t?s=o.a.createElement(hn,null):a?s="picture"===a?o.a.createElement(Ja,{value:i.id?i:void 0}):o.a.createElement(Ba,{entity:i,entityName:a}):n&&(s=o.a.createElement(tn,null)),s}}var yn=un,En=a(654),gn=a(404),vn=a(111),wn=a(607),Nn=a.n(wn);class fn extends je{constructor(...e){super(...e),this.price=new Be,this.availability="COMMON",this.placement=Ye.NECK}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Be),this.updateEntityProp(e,"primaryResource",()=>new _e),this.updateEntityProp(e,"secondaryResource",()=>new _e),this}}fn.entityName="jewelry",G(fn,[M("name",N),M("description",x),M("price",O),M("availability",N)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability"),K("primaryResource",S,_e.entityName),K("secondaryResource",S,_e.entityName),K("placement",I,"placementJewelry")]);const xn={[at.entityName]:[],[it.entityName]:[at.entityName],[nt.entityName]:[at.entityName],[rt.entityName]:[],[lt.entityName]:[at.entityName],[Ya.entityName]:[at.entityName],[mt.entityName]:[],[dt.entityName]:[],[pt.entityName]:[],[gt.entityName]:[],[ot.entityName]:[],[ct.entityName]:[ot.entityName],[Ve.entityName]:[],[$e.entityName]:[],[et.entityName]:[$e.entityName],[He.entityName]:[],[Me.entityName]:[He.entityName],[qe.entityName]:[],[Xe.entityName]:[_e.entityName,ze.entityName,Ue.entityName],[Ze.entityName]:[_e.entityName,Qe.entityName],[yt.entityName]:[_e.entityName,ht.entityName],[ut.entityName]:[_e.entityName,ht.entityName],[ze.entityName]:[],[Qe.entityName]:[],[ht.entityName]:[],[Ue.entityName]:[],[fn.entityName]:[_e.entityName],[_e.entityName]:[],[ft.entityName]:[],[$a.entityName]:[Ya.entityName,vt.entityName],[za.entityName]:[],[vt.entityName]:[it.entityName,nt.entityName,rt.entityName,lt.entityName,gt.entityName,ct.entityName,Ve.entityName,$e.entityName,et.entityName,Me.entityName,qe.entityName,Xe.entityName,Ze.entityName,yt.entityName,fn.entityName]};class Cn{static refreshData(){Object.keys(U.services).forEach(e=>U.services[e].loadData())}static refreshForEntity(e){U.services[e].loadData(),xn[e].forEach(e=>this.refreshForEntity(e))}}class Rn extends l.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.handleClick=e=>{this.setState({anchorEl:e.currentTarget})},this.handleClose=()=>{this.setState({anchorEl:null})},this.handleItemClick=e=>()=>{this.handleClose(),Cn.refreshForEntity(e),U.showTable(e)}}render(){const e=this.props,t=e.t,a=e.name,n=e.entities;return o.a.createElement("div",null,o.a.createElement(pe.a,{id:a,onClick:this.handleClick},t(a)),o.a.createElement(We.a,{id:a,anchorEl:this.state.anchorEl,open:null!==this.state.anchorEl,onClose:this.handleClose},n.map(e=>o.a.createElement(ke.a,{key:e,onClick:this.handleItemClick(e)},t(e)))))}}var Tn=Object(g.b)()(Rn),In=a(608),bn=a.n(In);class Sn extends l.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.handleClick=e=>{this.setState({anchorEl:e.currentTarget})},this.handleClose=()=>{this.setState({anchorEl:null})},this.showPictureForm=()=>{this.handleClose(),U.showTable(za.entityName)},this.showScenarioView=()=>{this.handleClose(),U.updateScenario(null)},this.showUsersTable=()=>{this.handleClose(),U.showTable(z.entityName)}}render(){const e=this.props.t,t=J.hasAuthority("admin");return o.a.createElement("div",null,o.a.createElement(d.a,{"aria-label":"More","aria-owns":null!==this.state.anchorEl?"app-tools-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},o.a.createElement(bn.a,null)),o.a.createElement(We.a,{id:"app-tools-menu",anchorEl:this.state.anchorEl,open:null!==this.state.anchorEl,onClose:this.handleClose},t&&o.a.createElement(ke.a,{onClick:this.showUsersTable},e("user")),o.a.createElement(ke.a,{onClick:this.showPictureForm},e("picture")),o.a.createElement(ke.a,{onClick:this.showScenarioView},e("scenario"))))}}var Ln=Object(g.b)()(Sn);const On=new dn;class An extends l.Component{constructor(...e){super(...e),this.showTable=e=>()=>{U.update({showTable:e})}}render(){const e=this.props,t=e.i18n,a=e.classes,n=J.hasAuthority("gamemaster")?[o.a.createElement(Tn,{name:"world",entities:[at.entityName,it.entityName,nt.entityName,rt.entityName,lt.entityName,Ya.entityName,ft.entityName,$a.entityName]}),o.a.createElement(Tn,{name:"knowledge",entities:[Ve.entityName,He.entityName,Me.entityName,$e.entityName,et.entityName]}),o.a.createElement(Tn,{name:"crafting",entities:[qe.entityName,Xe.entityName,Ze.entityName,yt.entityName,ut.entityName,fn.entityName]}),o.a.createElement(Tn,{name:"types",entities:[ze.entityName,Qe.entityName,ht.entityName,Ue.entityName,_e.entityName]}),o.a.createElement(Tn,{name:"creature",entities:[...U.data.currentRealm?[vt.entityName]:[],mt.entityName,dt.entityName,pt.entityName,gt.entityName,ct.entityName,ot.entityName]})]:o.a.createElement("div",null);return o.a.createElement(En.a,{position:"relative"},o.a.createElement(gn.a,null,o.a.createElement(Ln,null),n,o.a.createElement("div",{className:a.languageIcon},U.data.fetching.size>0&&o.a.createElement(d.a,null,o.a.createElement(vn.a,{color:"secondary"})),o.a.createElement($.a,{className:a.realmSelect,options:U.data.realm,getOptionLabel:e=>o.a.createElement("div",null,e.name),getOptionValue:e=>e.id,filterOption:(e,t)=>e.data.name.startsWith(t),value:U.data.currentRealm,onChange:e=>On.getRealmData(e)}),o.a.createElement(d.a,{onClick:()=>t.changeLanguage("en")},o.a.createElement(Nn.a,{code:"gb",height:16})),o.a.createElement(d.a,{onClick:()=>t.changeLanguage("pl")},o.a.createElement(Nn.a,{code:"pl",height:16})))))}}var Dn=h()(e=>({languageIcon:{marginLeft:"auto",display:"flex"},realmSelect:{width:200}}))(Object(g.b)()(An)),Pn=a(105),Wn=a(609),kn=a.n(Wn);const Fn=new V;Fn.name="username",Fn.type=N;const Vn=new V;Vn.name="password",Vn.type=f;class Hn extends l.Component{constructor(...e){super(...e),this.login=()=>{const e=U.data.entity;e&&e.username&&e.password&&fetch("login",{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{e&&(U.updateUser(Object(v.a)({},e,{token:!0})),J.updateAdminAuthoritiesIfNeeded(),Cn.refreshData())})}}render(){const e=this.props.t;return(new V).name="username",o.a.createElement(m.a,{container:!0,alignItems:"center",spacing:2,xs:12,direction:"column"},o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(Pn.a,null,"WFRP Helper")),o.a.createElement(m.a,{item:!0,xs:6},Ka(Fn,e,!0)),o.a.createElement(m.a,{item:!0,xs:6},Ka(Vn,e,!0)),o.a.createElement(m.a,{item:!0,xs:8},o.a.createElement(pe.a,{onClick:this.login},e("login")),o.a.createElement(pe.a,null,e("signup"))),o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(pe.a,null,o.a.createElement("img",{src:kn.a,alt:e("login with Google"),style:{width:50,height:50}}),o.a.createElement("a",{href:"/oauth2/authorization/google?redirect_uri=http://localhost:8080/index.html",style:{fontSize:18}},e("login with Google")))))}}var jn=Object(g.b)()(Hn);class Mn extends l.Component{render(){const e=new RegExp("[\\?&]token=([^&#]*)").exec(this.props.location.search)[1];return U.updateUser({token:e}),o.a.createElement(c.a,{to:"/"})}}var Kn=Mn;const Gn=new J;class Un extends l.Component{constructor(...e){super(...e),this.state={password:null,repeat:null},this.onChange=e=>t=>{this.setState({[e]:t.target.value})},this.savePassword=()=>{const e=this.state,t=e.password;t===e.repeat&&Gn.updatePassword(t)}}render(){const e=this.state,t=e.password,a=e.repeat,n=this.props.t;return o.a.createElement("div",null,o.a.createElement(Q.a,{key:"password",label:n("password"),value:t||"",type:"password",onChange:this.onChange("password")}),o.a.createElement(Q.a,{key:"passwordRepeat",label:n("passwordRepeat"),value:a||"",type:"password",onChange:this.onChange("repeat")}),o.a.createElement(pe.a,{onClick:this.savePassword},n("save")))}}var Bn=Object(g.b)()(Un);const _n=Object(s.a)({palette:{primary:n.a,secondary:i.a}}),Yn=new J;class zn extends l.Component{constructor(e,t){super(e,t),U.onUpdate=e=>{this.setState({data:e})},U.data.entity=new z}render(){const e=U.data.currentUser,t=e.token,a=e.oneTimePassword;return t?a?o.a.createElement(r.a,{theme:_n},o.a.createElement(Bn,null)):(U.data.currentUser.authorities||Yn.refreshAuthorities(),U.data.initialized||(Cn.refreshData(),U.data.initialized=!0),o.a.createElement(r.a,{theme:_n},o.a.createElement(Dn,null),o.a.createElement(yn,null))):o.a.createElement(r.a,{theme:_n},o.a.createElement(c.d,null,o.a.createElement(c.b,{exact:!0,path:"/index.html",component:jn}),o.a.createElement(c.b,{exact:!0,path:"/",component:jn}),o.a.createElement(c.b,{path:"/oauth2/redirect",component:Kn})))}}}}]);
//# sourceMappingURL=4.4752c035.chunk.js.map