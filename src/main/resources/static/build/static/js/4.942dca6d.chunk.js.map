{"version":3,"sources":["img/A.png","user/google-logo.png","model/ModelElement.js","form/FormFieldType.js","form/FormFieldData.js","client/Service.js","model/Entity.js","state/State.js","client/RemoteService.js","user/Role.js","user/User.js","user/AuthoritiesService.js","form/field/EnumSelect.js","form/field/IntegerField.js","model/rule/ActionTime.js","form/field/ActionTimeField.js","form/field/BlueprintSelect.js","model/rule/DiceRoll.js","model/rule/Modifier.js","model/rule/Determinant.js","form/field/DiceRollField.js","form/field/ModifierField.js","form/field/DeterminantField.js","form/field/EntitySelect.js","form/field/PriceField.js","form/field/RaceDeterminantsField.js","model/knowledge/Skill.js","model/professions/ProfessionClass.js","model/rule/DeterminantContainer.js","model/professions/Profession.js","model/creature/CreatureDeterminants.js","model/crafting/Availability.js","model/crafting/ArmorPattern.js","model/world/Price.js","model/crafting/Resource.js","model/crafting/Placement.js","model/crafting/ArmorBlueprint.js","model/crafting/Armor.js","model/crafting/Item.js","model/crafting/Inventory.js","model/crafting/MeleeWeaponBlueprint.js","model/crafting/MeleeWeapon.js","model/knowledge/SpellSchool.js","model/knowledge/Spell.js","model/knowledge/SpellSchoolLevel.js","model/world/Nation.js","model/world/Language.js","model/world/Currency.js","model/world/Money.js","model/world/Race.js","model/world/Religion.js","model/creature/AnimalKind.js","model/creature/Animal.js","model/creature/Character.js","model/creature/EyeColor.js","model/creature/HairColor.js","model/crafting/RangedWeaponBlueprint.js","model/crafting/Ammunition.js","model/crafting/RangedWeapon.js","model/creature/PersonalRangedWeapon.js","model/creature/PhysicalFeature.js","model/creature/Person.js","client/DeterminantService.js","client/GearService.js","model/realm/Realm.js","model/knowledge/CurrentMagicKnowledge.js","util/Collections.js","client/MagicService.js","model/creature/Gender.js","service/ItemService.js","service/MoneyService.js","service/ProfessionService.js","form/sheet/field/AnimalElement.js","model/creature/CreatureArmorValues.js","form/sheet/field/ArmorCalculationsComponent.js","form/sheet/field/ArmorElement.js","form/sheet/field/SimpleTextField.js","form/sheet/field/ItemElement.js","form/sheet/field/MoneyElement.js","form/sheet/field/ProfessionExtensionField.js","form/sheet/field/PersonalDeterminantsField.js","form/sheet/field/SimpleEntitySelect.js","form/sheet/field/RangedWeaponElement.js","form/sheet/field/SelectableList.js","form/sheet/field/SimpleEnumSelect.js","form/sheet/field/SimpleList.js","form/sheet/field/SpeedComponent.js","form/sheet/field/SpellElement.js","form/sheet/field/SpellSchoolList.js","form/sheet/field/WeaponElement.js","form/sheet/CharacterSheetForm.js","form/sheet/field/ProfessionExtensionView.js","form/sheet/field/PersonalDeterminantsView.js","form/sheet/field/RangedWeaponElementView.js","form/sheet/field/SimpleListView.js","form/sheet/CharacterSheetView.js","form/FormFieldGenerator.js","form/EntityEditor.js","model/world/Place.js","img/Picture.js","img/PictureUploadForm.js","client/PictureService.js","model/realm/Scenario.js","scenario/ScenarioView.js","client/ScenarioService.js","content/Table.js","content/ContentPane.js","model/crafting/Jewelry.js","menu/MenuComponent.js","menu/ToolsMenu.js","menu/TopMenu.js","client/RealmDataService.js","state/DataLoader.js","user/LoginComponent.js","user/OAuth2RedirectComponent.js","user/PasswordChangeComponent.js","App.js"],"names":["module","exports","ModelElement","updateWith","entity","Object","assign","this","updateProp","prop","updateNumProp","updateEntityProp","supplier","updateEntityList","map","val","newVal","FormFieldType","FormFieldData","Service","constructor","entityName","loadData","State","fetching","fetch","mode","headers","then","handleErrors","response","json","data","suppliers","update","fetchingFinished","save","onSuccess","method","body","JSON","stringify","status","message","value","window","confirm","Array","from","Set","errors","e","field","rejectedValue","join","updateUser","token","delete","Entity","CreateColumn","name","type","options","filter","sort","column","customBodyRender","toString","CreateFormField","suggestions","toView","toModel","formField","RegisterEntity","entityClass","columns","fields","services","formFields","showTable","showForm","afterForm","currentUser","username","password","onUpdate","user","showScenario","updateScenario","scenario","updateEntity","updates","add","RemoteService","handleRawResponse","onResponse","text","console","warn","handleResponse","requestFor","uri","jsonBody","postRequestWithoutResponse","requestForPath","rawGetRequestFor","rawPostRequest","Role","role","User","userService","roleService","AuthoritiesService","refreshAuthorities","authorities","updateAdminAuthoritiesIfNeeded","find","authority","toLowerCase","endsWith","updatePassword","newPassword","oneTimePassword","hasAuthority","EnumSelect","Component","render","props","t","label","onChange","selected","multi","editable","Grid","container","spacing","alignItems","item","FormLabel","textFieldProps","InputLabelProps","shrink","styles","style","components","makeAnimated","getOptionLabel","undefined","getOptionValue","isSearchable","isClearable","isMulti","isDisabled","control","provided","state","width","marginLeft","withTranslation","IntegerField","updateInt","event","number","parseInt","target","other","TextField","ActionType","ACTION","ROUND","TURN","allOf","ActionTime","actionType","amount","ActionTimeField","key","InputProps","readOnly","BlueprintSelect","desc","suggestedPrice","suggestedWeight","xs","option","id","filterOption","input","startsWith","Dice","K2","K3","K4","K6","K8","K10","K12","K20","K100","DiceRoll","rolls","dice","ModifierType","REGULAR","PROFESSION","EXPERIENCE","DICE","Modifier","super","roll","Determinant","modifiers","getExperienceExtensions","mod","calculateExperienceValue","reduce","a","b","calculateFinalValue","DeterminantType","SPEED","BATTLE","SHOOTING","STRENGTH","DURABILITY","HEALTH","INITIATIVE","ATTACK","DEXTERITY","LEADER_SKILLS","INTELLIGENCE","CONTROL","WILL","CHARISMA","PARRY","OPPONENT_PARRY","personal","DiceRollField","updateDiceRoll","currentDiceRollEdit","ModifierField","currentModifierEdit","onAddDiceRoll","push","types","dices","diceRoll","Button","onClick","DeterminantField","deleteItem","splice","indexOf","currentDeterminantEdit","determinant","addDeterminant","addModifierToDeterminant","updateModifier","modifier","newModifier","modifierTypes","log","currentModifier","Paper","IconButton","Remove","EntitySelect","newValue","PriceField","updatePrice","part","price","marginRight","gold","silver","lead","determinantsNames","RaceDeterminantsField","regenerateDeterminants","determinants","length","forEach","updateDiceType","updateDiceRolls","updateBasicModifier","Skill","ProfessionClass","skills","DeterminantContainer","Profession","nextProfessions","CreatureDeterminants","speed","battle","shooting","strength","durability","health","attack","initiative","dexterity","leaderSkills","intelligence","will","charisma","newDeterminant","replaceDeterminant","updateDeterminantValue","findDeterminant","toReplace","determinantIndex","Availability","ArmorPattern","availability","Price","Resource","Placement","BODY","HEAD","TORSO","HAND","LEG","BELT","NECK","FINGER","SHIELD","BOTH_HANDS","armor","weapon","jewelry","ArmorBlueprint","placement","Armor","Item","Inventory","MeleeWeaponBlueprint","damage","prepareTime","MeleeWeapon","getFinalValueForType","determinantType","DeterminantService","sumValueByTypeIn","SpellSchool","levels","Spell","durationTime","ingredients","SpellSchoolLevel","level","Nation","names","namesFromModel","namesAsString","replace","split","Language","Currency","Money","currency","Race","Religion","nations","AnimalKind","Animal","Character","EyeColor","HairColor","RangedWeaponBlueprint","minimumRange","mediumRange","maximumRange","Ammunition","weaponTypes","RangedWeapon","PersonalRangedWeapon","ammunitionAmount","PhysicalFeature","Person","physicalFeatures","professions","inventory","meleeWeapons","rangedWeapons","spellSchools","spells","animals","money","languages","addExperienceExtension","onAdded","afterResponse","removeExperienceExtension","onRemoved","afterUpdate","findModifierByType","det","profession","creatureDeterminants","setProfessionExtensions","professionExtensions","findDeterminantIn","removeModifiersByType","newMod","rollForRace","race","creature","assert","currentDeterminant","resolved","GearService","calculateMeleeDamage","weaponId","calculateArmorValue","armorId","calculatePersonArmorValue","armorIds","rangedWeapon","pWeps","newPWep","Realm","persons","CurrentMagicKnowledge","currentSpellSchools","currentSkills","Collections","except","element","to","findIn","array","toMatchPath","elementsPath","toMatch","removeFrom","MagicService","getAvailableSpellSchools","currentMagicKnowledge","spell","spellSchool","Gender","MALE","FEMALE","ItemService","incomingInventory","weight","p","calculateRangedWeaponWeight","toFixed","ammunition","MoneyService","newMoney","ProfessionService","currentClass","professionClass","prof","newDeterminants","updateProfessionExtensions","currentProfession","AnimalElement","animal","onContextMenu","preventDefault","CreatureArmorValues","armorValues","Map","set","getArmorValue","get","values","defaultComponentStyle","position","textAlign","defaultStyle","shield","left","top","head","rightHand","leftHand","torso","rightLeg","leftLeg","gearService","ArmorCalculationsComponent","updateArmorValues","armorCalcs","setState","classes","className","withStyles","containerStyle","display","flexDirection","ArmorElement","disabled","content","SimpleTextField","PureComponent","parse","variant","change","TextFieldType","INT","FLOAT","parseFloat","customStyle","multiline","backgroundColor","border","fontFamily","fontSize","outline","TEXT","ItemElement","updateAmount","allInventory","minWidth","calculateWeight","MoneyElement","amountType","determinantService","ExtMark","margin","ProfessionExtensionField","addExtension","ext","removeExtension","customClassName","professionValue","extended","professionModifier","fieldContainer","extension","checkboxContainer","right","flexFlow","flexWrap","maxWidth","zIndex","PersonalDeterminantFieldStyle","row1","paddingTop","maxHeight","minHeight","row2","row3","firstInRow","otherInRow","otherInRow2","lastRowChild","PersonalDeterminantsField","updateDeterminant","updateDeterminantExperience","simpleStyle","dropdownIndicator","color","indicatorSeparator","simpleStyleMulti","clearIndicator","multiValueRemove","singleValue","multiValueLabel","background","multiValue","height","SimpleEntitySelect","propName","Tooltip","title","description","placeholder","RangedWeaponElement","pWep","weaponType","newAmmunition","currentAmount","ammunitionAmountField","SelectableList","listStyle","onGearAdd","children","selectComponent","itemsList","overflow","itemContainer","SimpleEnumSelect","getData","source","onSelected","SimpleList","anchorEl","currentElement","handleClick","currentTarget","onRemove","handleClose","index","Menu","open","onClose","MenuItem","SpeedComponent","calc","tempo","calculateSpeed","firstRow","cell","nextRow","paddingLeft","alignSelf","SpellElement","ingredientsText","manaCost","range","effect","SpellSchoolList","availableSpellSchools","onSpellSchoolAdd","magicSchool","currentLevelIndex","newSpellSchool","onSpellSchoolRemove","newSpellSchools","refreshRelevantMagicSchools","realm","currentRealm","magicService","setSpellSchools","assembleSpellSchools","clear","spellSchoolLevel","keys","spellSchoolLevelText","weaponService","WeaponElement","damageText","updateDamageValue","onRightClick","currentStyle","itemName","itemVariable","CharacterSheetForm","generateStatsAction","showMenu","root","currentRealmData","races","genderSelect","getProfessions","updateProfession","removeProfessionFromHistory","addPersonalRangedWeapon","skill","getRelevantSpells","addItemToInventory","eq","inventoryWeight","currencies","addMoney","lang","marginTop","religions","elementName","FrontCharacterSheet","backgroundSize","ProfessionExtensionView","SimpleListView","CharacterSheetView","listToDivs","gender","personality","age","hairColor","eyeColor","PersonalDeterminantsView","RangedWeaponElementView","fatePoints","mana","currentMana","sanityPoints","nation","parents","family","socialLevel","religion","experience","totalExperience","basicStyle","fieldData","updateProperty","EntityEditor","saveForm","getFormFields","component","updateForm","direction","Save","Cancel","KeyboardReturn","theme","Place","Picture","pictureService","uploadPicture","picture","updateMetadata","PictureUploadForm","upload","files","selectedFile","formData","FormData","append","setName","setPlace","place","placeId","src","alt","acceptedFiles","Scenario","places","ScenarioView","currentScenario","images","imgStyle","viewerIsOpen","currentImage","fetchImages","onData","ok","alert","fetchPicturesForScenario","num","person","url","elevation","Modal","currentIndex","views","Table","filterType","selectableRows","selectableRowsOnClick","disableToolbarSelect","selectableRowsHeader","customToolbarSelect","selectedRows","displayData","setSelectedRows","dataIndex","Fragment","Edit","Delete","OpenInNew","translateColumns","ContentPane","Jewelry","MenuComponent","handleItemClick","entities","ToolsMenu","showPictureForm","showScenarioView","showUsersTable","isAdmin","aria-label","aria-owns","aria-haspopup","realmDataService","getRealmData","TopMenu","i18n","menuItems","AppBar","Toolbar","languageIcon","size","CircularProgress","realmSelect","changeLanguage","code","DataLoader","serviceName","loginFieldData","passwordFieldData","LoginComponent","login","res","authData","refreshData","Typography","googleLogo","href","OAuth2RedirectComponent","RegExp","exec","location","search","authoritiesService","PasswordChangeComponent","repeat","savePassword","createMuiTheme","palette","primary","grey","secondary","orange","App","context","initialized","exact","path"],"mappings":"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","file":"static/js/4.942dca6d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/A.8ca41e5c.png\";","module.exports = __webpack_public_path__ + \"static/media/google-logo.36158af3.png\";","export default class ModelElement {\r\n    updateWith(entity: any): ModelElement {\r\n        Object.assign(this, entity);\r\n        return this;\r\n    }\r\n\r\n    updateProp(entity: any, prop: string) {\r\n        if (entity[prop] || entity[prop] === '') {\r\n            this[prop] = entity[prop];\r\n        }\r\n    }\r\n\r\n    updateNumProp(entity: any, prop: string) {\r\n        if (entity[prop] || entity[prop] === 0 || entity[prop] === '') {\r\n            this[prop] = entity[prop];\r\n        }\r\n    }\r\n\r\n    updateEntityProp(entity: any, prop: string, supplier: () => mixed) {\r\n        if (entity[prop]) {\r\n            this[prop] = supplier();\r\n            this[prop].updateWith(entity[prop]);\r\n        }\r\n    }\r\n\r\n    updateEntityList(entity: any, prop: string, supplier: () => mixed) {\r\n        if (entity[prop]) {\r\n            this[prop] = entity[prop]\r\n                .map(val => {\r\n                    const newVal = supplier();\r\n                    newVal.updateWith(val);\r\n                    return newVal;\r\n                });\r\n        }\r\n    }\r\n}","export const FormFieldType = {\r\n    TEXT: 'text',\r\n    PASSWORD: 'password',\r\n    TEXT_AREA: 'text_area',\r\n    BOOLEAN: 'boolean',\r\n    INTEGER: 'integer',\r\n    FLOAT: 'float',\r\n    ENUM_SELECT: 'enum_select',\r\n    ENUM_COMBOBOX: 'enum_combobox',\r\n    ENTITY_SELECT: 'entity_select',\r\n    ENTITY_COMBOBOX: 'entity_combobox',\r\n    PRICE: 'price',\r\n    ACTION_TIME: 'action_time',\r\n    DETERMINANT: 'determinant',\r\n    MODIFIER: 'modifier',\r\n    BLUEPRINT_SELECT: 'blueprint_select',\r\n    RACE_DETERMINANTS: 'race_determinants',\r\n    CHARACTER_SHEET: 'character_sheet',\r\n};\r\n","import {func, object} from \"prop-types\";\r\n\r\nclass FormFieldData {\r\n    type: string;\r\n    name: string;\r\n    suggestions: object[];\r\n    toView: func;\r\n    toModel: func;\r\n}\r\nexport default FormFieldData;","import {State} from \"../state/State\";\r\nimport {object} from \"prop-types\";\r\n\r\nexport default class Service {\r\n    entityName: string;\r\n\r\n    constructor(entityName: string) {\r\n        this.entityName = entityName;\r\n    }\r\n\r\n    loadData = () => {\r\n        State.fetching(this.entityName);\r\n        fetch(this.entityName, {\r\n            mode: 'cors',\r\n            headers: {\r\n                'Access-Control-Allow-Origin': '*',\r\n                // 'Authorization': 'Bearer ' + State.data.currentUser.token\r\n            }\r\n        })\r\n            .then(this.handleErrors)\r\n            .then(response => response.json())\r\n            .then(data => data.map(entity => State.suppliers[this.entityName]().updateWith(entity)))\r\n            .then(data => {\r\n                State.update({[this.entityName]: data});\r\n                State.fetchingFinished(this.entityName);\r\n            })\r\n    };\r\n    save = (entity: object, onSuccess: VoidFunction) => {\r\n        fetch(this.entityName, {\r\n            method: 'post',\r\n            mode: 'cors',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                // 'Authorization': 'Bearer ' + State.data.currentUser.token\r\n            },\r\n            body: JSON.stringify(entity)\r\n        })\r\n            .then(this.handleErrors)\r\n            .then(this.loadData)\r\n            .then(onSuccess);\r\n    };\r\n    delete(entity: object) {\r\n        fetch(this.entityName, {\r\n            method: 'delete',\r\n            mode: 'cors',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                // 'Authorization': 'Bearer ' + State.data.currentUser.token\r\n            },\r\n            body: JSON.stringify(entity)\r\n        })\r\n            .then(this.handleErrors)\r\n            .then(() => this.loadData())\r\n    }\r\n\r\n    handleErrors = (response) => {\r\n        if (response.status !== 200) {\r\n            let message = response.json();\r\n\r\n            if (response.status === 400) {\r\n                message.then(value => {\r\n                    window.confirm(Array.from(new Set(value.errors\r\n                        .map(e => 'cannot set field ' + e.field + ' with ' + e.rejectedValue + ', ' + e.message)))\r\n                        .join('\\n'));\r\n                });\r\n            } else if (response.status === 409) {\r\n                message.then(value => {\r\n                    window.confirm(value.errors[0].message);\r\n                });\r\n            } else if (response.status === 403 || response.status === 401) {\r\n                State.updateUser({token: null})\r\n            }\r\n            throw response;\r\n        }\r\n        return response;\r\n    };\r\n}","import ModelElement from \"./ModelElement\";\r\nimport {FormFieldType} from \"../form/FormFieldType\";\r\nimport FormFieldData from \"../form/FormFieldData\";\r\nimport {State} from \"../state/State\";\r\nimport Service from \"../client/Service\";\r\n\r\nclass Entity extends ModelElement {\r\n    id: number;\r\n    version: number;\r\n    uuid: string;\r\n}\r\n\r\nexport default Entity;\r\n\r\nexport const CreateColumn = (name: string, type: string) => {\r\n    const options = {filter: false, sort: false};\r\n    const column = {name: name, options: options};\r\n\r\n    switch (type) {\r\n        case FormFieldType.TEXT:\r\n        case FormFieldType.FLOAT:\r\n        case FormFieldType.INTEGER:\r\n        case FormFieldType.BOOLEAN:\r\n            options.filter = true;\r\n            options.sort = true;\r\n            break;\r\n        case FormFieldType.PRICE:\r\n        case FormFieldType.MODIFIER:\r\n        case FormFieldType.ACTION_TIME:\r\n            options.filter = false;\r\n            options.sort = true;\r\n            options.customBodyRender = val => val ? val.toString() : '';\r\n            break;\r\n        case FormFieldType.ENTITY_SELECT:\r\n        case FormFieldType.ENTITY_COMBOBOX:\r\n            options.filter = true;\r\n            options.sort = true;\r\n            options.customBodyRender = val => val ? val.name : '';\r\n            break;\r\n        default:\r\n            options.filter = false;\r\n            options.sort = false;\r\n    }\r\n\r\n    return column;\r\n};\r\n\r\nexport const CreateFormField = (name: string, type: string, suggestions: string, toView: string => string, toModel: string => string) => {\r\n    const formField = new FormFieldData();\r\n    formField.name = name;\r\n    formField.type = type;\r\n    formField.suggestions = suggestions;\r\n    formField.toView = toView;\r\n    formField.toModel = toModel;\r\n    return formField;\r\n};\r\n\r\nexport const RegisterEntity = (entityClass: any, columns: FormFieldData[], fields: FormFieldData[]) => {\r\n    State.suppliers[entityClass.entityName] = () => new entityClass();\r\n    State.services[entityClass.entityName] = new Service(entityClass.entityName);\r\n    State.columns[entityClass.entityName] = columns;\r\n    State.formFields[entityClass.entityName] = fields;\r\n};\r\n","import Entity from \"../model/Entity\";\r\n\r\nexport const State = {\r\n    data: {\r\n        showTable: null,\r\n        showForm: null,\r\n        afterForm: null,\r\n        fetching: new Set(),\r\n        currentUser: {\r\n            username: null,\r\n            password: null,\r\n            token: true\r\n        }\r\n    },\r\n    services: {},\r\n    formFields: {},\r\n    columns: {},\r\n    suppliers: {},\r\n    onUpdate: data => {},\r\n    update(data: any) {\r\n        this.data = {...this.data, ...data};\r\n        this.onUpdate(this.data);\r\n    },\r\n    updateUser(user: any) {\r\n        this.data.currentUser = {...this.data.currentUser, ...user};\r\n        this.onUpdate(this.data);\r\n    },\r\n    showTable(name: string) {\r\n        this.update({entity: null, showForm: null, showTable: name, showScenario: false});\r\n    },\r\n    showForm(name: string, entity: Entity) {\r\n        this.update({entity: entity, showForm: name, showTable: null, showScenario: false})\r\n    },\r\n    updateScenario(scenario: Entity) {\r\n        this.update({entity: scenario, showForm: null, showTable: null, showScenario: true})\r\n    },\r\n    updateEntity(updates: any) {\r\n        this.data.entity.updateWith(updates);\r\n        this.update({entity: this.data.entity});\r\n    },\r\n    fetching(entityName: string) {\r\n        this.data.fetching.add(entityName);\r\n        this.update({fetching: this.data.fetching});\r\n    },\r\n    fetchingFinished(entityName: string) {\r\n        this.data.fetching.delete(entityName);\r\n        this.update({fetching: this.data.fetching});\r\n    }\r\n};\r\n","import {State} from \"../state/State\";\r\n\r\nexport default class RemoteService {\r\n    requestFor(data: object, uri: string, onResponse: VoidFunction) {\r\n        const jsonBody = JSON.stringify(data);\r\n        fetch(uri, {\r\n            method: 'post',\r\n            mode: 'cors',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                // 'Authorization': 'Bearer ' + State.data.currentUser.token\r\n            },\r\n            body: jsonBody\r\n        }).then(this.handleResponse(onResponse));\r\n    }\r\n\r\n    postRequestWithoutResponse(data: object, uri: string, onResponse: VoidFunction) {\r\n        const jsonBody = JSON.stringify(data);\r\n        fetch(uri, {\r\n            method: 'post',\r\n            mode: 'cors',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                // 'Authorization': 'Bearer ' + State.data.currentUser.token\r\n            },\r\n            body: jsonBody\r\n        }).then(this.handleRawResponse(onResponse));\r\n    }\r\n\r\n    requestForPath(uri: string, onResponse: VoidFunction) {\r\n        fetch(uri, {\r\n            method: 'get',\r\n            mode: 'cors',\r\n            headers: {\r\n                // 'Authorization': 'Bearer ' + State.data.currentUser.token\r\n            },\r\n        }).then(this.handleResponse(onResponse));\r\n    }\r\n\r\n    rawGetRequestFor(uri: string, onResponse: VoidFunction) {\r\n        fetch(uri, {\r\n            method: 'get',\r\n            mode: 'cors',\r\n            headers: {\r\n                // 'Authorization': 'Bearer ' + State.data.currentUser.token\r\n            },\r\n        }).then(this.handleRawResponse(onResponse))\r\n    }\r\n\r\n    rawPostRequest(uri: string, data: object, onResponse: VoidFunction) {\r\n        fetch(uri, {\r\n            method: 'post',\r\n            mode: 'cors',\r\n            headers: {\r\n                // 'Authorization': 'Bearer ' + State.data.currentUser.token\r\n            },\r\n            body: data,\r\n        }).then(this.handleRawResponse(onResponse))\r\n    }\r\n\r\n    handleRawResponse = onResponse => response => {\r\n        if (response.status === 200) {\r\n            response.text().then(onResponse);\r\n        } else if (response.status === 403 || response.status === 401) {\r\n            State.updateUser({token: null})\r\n        } else {\r\n            console.warn(response.status);\r\n        }\r\n    };\r\n\r\n    handleResponse = onResponse => response => {\r\n        if (response.status === 200) {\r\n            response.json().then(onResponse);\r\n        } else if (response.status === 403 || response.status === 401) {\r\n            State.updateUser({token: false})\r\n        } else {\r\n            console.warn(response.status);\r\n        }\r\n    };\r\n}","import Entity from \"../model/Entity\";\r\nimport {State} from \"../state/State\";\r\n\r\nexport default class Role extends Entity {\r\n  static entityName: string = 'role';\r\n\r\n  authority: string;\r\n}\r\n\r\nState.suppliers.role = () => new Role();\r\n","import {FormFieldType} from \"../form/FormFieldType\";\r\nimport Entity, {CreateColumn, CreateFormField} from \"../model/Entity\";\r\nimport {State} from \"../state/State\";\r\nimport Role from \"./Role\";\r\n\r\nexport default class User extends Entity {\r\n  static entityName: string = 'user';\r\n\r\n  username: string;\r\n  password: string;\r\n  authorities: Role[];\r\n}\r\n\r\nState.suppliers.user = () => new User();\r\nState.columns.user    = [CreateColumn('username', FormFieldType.TEXT)];\r\nState.formFields.user = [CreateFormField('authorities', FormFieldType.ENTITY_COMBOBOX, Role.entityName)];","import RemoteService from \"../client/RemoteService\";\r\nimport Service from \"../client/Service\";\r\nimport {State} from \"../state/State\";\r\nimport Role from \"./Role\";\r\nimport User from \"./User\";\r\n\r\nconst userService = new Service(User.entityName);\r\nconst roleService = new Service(Role.entityName);\r\n\r\nexport default class AuthoritiesService extends RemoteService {\r\n  refreshAuthorities() {\r\n    this.requestForPath('authorities', authorities => {\r\n      State.updateUser({authorities: authorities});\r\n      AuthoritiesService.updateAdminAuthoritiesIfNeeded();\r\n    });\r\n  }\r\n\r\n  static hasAuthority(entityName: string) {\r\n    const authorities = State.data.currentUser.authorities;\r\n    return authorities && authorities.find(role => role.authority.toLowerCase()\r\n                                                       .endsWith(entityName.toLowerCase()));\r\n  }\r\n\r\n  updatePassword(newPassword: string) {\r\n    this.postRequestWithoutResponse({...State.data.currentUser, ...{password: newPassword}},\r\n                                    'password',\r\n                                    () => State.updateUser({oneTimePassword: false}))\r\n  }\r\n\r\n  static updateAdminAuthoritiesIfNeeded() {\r\n    if (AuthoritiesService.hasAuthority('admin')) {\r\n      roleService.loadData();\r\n      userService.loadData();\r\n      State.services.user = userService;\r\n    }\r\n  }\r\n}","import React, {Component} from \"react\";\r\nimport Select from \"react-select\";\r\nimport makeAnimated from 'react-select/animated'\r\nimport {FormLabel} from \"@material-ui/core\";\r\nimport {State} from \"../../state/State\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nclass EnumSelect extends Component {\r\n  static style = {\r\n    control: (provided, state) => ({\r\n      ...provided,\r\n      width: 400,\r\n      marginLeft: 10\r\n    })\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      t,\r\n      name,\r\n      suggestions = name,\r\n      value,\r\n      label = t(name),\r\n      data = State.data[suggestions],\r\n      onChange = selected => State.updateEntity({[name]: selected}),\r\n      multi,\r\n      editable\r\n    } = this.props;\r\n\r\n    return <Grid container spacing={2} alignItems={\"center\"}>\r\n      <Grid item>\r\n        <FormLabel>{label}</FormLabel>\r\n      </Grid>\r\n      <Grid item>\r\n        <Select\r\n            textFieldProps={{label: label, InputLabelProps: {shrink: false}}}\r\n            styles={EnumSelect.style}\r\n            options={data}\r\n            components={makeAnimated()}\r\n            onChange={onChange}\r\n            value={multi ? value : {label: value, value: value}}\r\n            getOptionLabel={val => <div>{val.label ? val.label : (typeof val === \"string\" ? val : undefined)}</div>}\r\n            getOptionValue={val => val}\r\n            isSearchable\r\n            isClearable\r\n            isMulti={multi}\r\n            isDisabled={!editable}/>\r\n      </Grid>\r\n    </Grid>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(EnumSelect);","import {TextField} from \"@material-ui/core\";\r\nimport React, {Component} from \"react\";\r\n\r\nclass IntegerField extends Component {\r\n  updateInt = onChange => event => {\r\n    let number = parseInt(event.target.value);\r\n    if (number || number === 0) {\r\n      onChange(number)\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {onChange, ...other} = this.props;\r\n    return <TextField type='number' onChange={this.updateInt(onChange)} {...other}/>;\r\n  }\r\n}\r\n\r\nexport default IntegerField;","import ModelElement from \"../ModelElement\";\r\n\r\nexport const ActionType = {\r\n    ACTION: 'ACTION',\r\n    ROUND: 'ROUND',\r\n    TURN: 'TURN',\r\n\r\n    allOf() {\r\n        return [this.ACTION, this.ROUND, this.TURN];\r\n    }\r\n};\r\n\r\nexport default class ActionTime extends ModelElement {\r\n    actionType: string = ActionType.ACTION;\r\n    amount: number = 1;\r\n\r\n    toString(): string {\r\n        switch (this.actionType) {\r\n            case ActionType.ACTION:\r\n                return this.amount;\r\n            case ActionType.ROUND:\r\n                return this.amount + 'r';\r\n            case ActionType.TURN:\r\n                return this.amount + 't';\r\n            default:\r\n                return this.amount;\r\n        }\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {FormLabel, TextField} from \"@material-ui/core\";\r\nimport EnumSelect from \"./EnumSelect\";\r\nimport IntegerField from \"./IntegerField\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport {State} from \"../../state/State\";\r\nimport {ActionType} from \"../../model/rule/ActionTime\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nclass ActionTimeField extends Component {\r\n  onUpdate = updates => {\r\n    const {\r\n      name,\r\n      value = State.data.entity[name],\r\n    } = this.props;\r\n    Object.assign(value, updates);\r\n    State.updateEntity({[name]: value})\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      t,\r\n      name,\r\n      label = t(name),\r\n      value = State.data.entity[name],\r\n      editable\r\n    } = this.props;\r\n\r\n    return <Grid container alignItems={\"center\"} spacing={2}>\r\n      <Grid item>\r\n        <FormLabel>{label}</FormLabel>\r\n      </Grid>\r\n      <Grid item>\r\n        <EnumSelect key={'actionType'}\r\n                    label={t('type')}\r\n                    data={ActionType.allOf()}\r\n                    value={value.type}\r\n                    onChange={type => this.onUpdate({type: type})}\r\n                    editable={editable}/>\r\n      </Grid>\r\n      <Grid item>\r\n        <IntegerField key={'amount'}\r\n                      label={t('amount')}\r\n                      value={value.amount}\r\n                      onChange={amount => this.onUpdate({amount: amount})}\r\n                      InputProps={{readOnly: !editable}}/>\r\n      </Grid>\r\n    </Grid>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(ActionTimeField);","import Grid               from \"@material-ui/core/Grid\";\r\nimport React, {Component} from \"react\";\r\nimport {withTranslation}  from \"react-i18next\";\r\nimport Select            from \"react-select\";\r\nimport makeAnimated      from 'react-select/animated'\r\nimport {State}           from \"../../state/State\";\r\n\r\nclass BlueprintSelect extends Component {\r\n  render() {\r\n    const {\r\n            t,\r\n            name,\r\n            label = t(name),\r\n            suggestions = name,\r\n            data = State.data[suggestions],\r\n            value = State.data.entity[name],\r\n            onChange = selected => State.updateEntity({[name]: selected}),\r\n            editable\r\n    } = this.props;\r\n\r\n    const desc = value ? <div>{t('price')}: {value.suggestedPrice.toString()},\r\n      {t('wieght')}: {value.suggestedWeight} kg</div> : <div/>;\r\n\r\n    return <Grid container spacing={2} alignItems={\"center\"}>\r\n      <Grid item>{label}</Grid>\r\n      <Grid item xs={6}>\r\n        <Select textFieldProps={{label: label, InputLabelProps: {shrink: false}}}\r\n                options={data}\r\n                components={makeAnimated()}\r\n                getOptionLabel={option => <div>{option.name}</div>}\r\n                getOptionValue={option => option.id}\r\n                filterOption={(option, input) => option.data.name.startsWith(input)}\r\n                onChange={onChange}\r\n                value={value}\r\n                isDisabled={!editable}/>\r\n      </Grid>\r\n      <Grid item>\r\n        {desc}\r\n      </Grid>\r\n    </Grid>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(BlueprintSelect);","import {State} from \"../../state/State\";\r\nimport Entity from \"../Entity\";\r\n\r\nexport const Dice = {\r\n    K2: 'K2',\r\n    K3: 'K3',\r\n    K4: 'K4',\r\n    K6: 'K6',\r\n    K8: 'K8',\r\n    K10: 'K10',\r\n    K12: 'K12',\r\n    K20: 'K20',\r\n    K100: 'K100',\r\n\r\n    allOf() {\r\n        return [\r\n            this.K2,\r\n            this.K3,\r\n            this.K4,\r\n            this.K6,\r\n            this.K8,\r\n            this.K10,\r\n            this.K12,\r\n            this.K20,\r\n            this.K100,\r\n        ]\r\n    }\r\n};\r\n\r\nexport default class DiceRoll extends Entity {\r\n    dice: string;\r\n    rolls: number;\r\n\r\n    toString() {\r\n        return this.rolls + this.dice\r\n    }\r\n}\r\n\r\nState.data.dice = Dice.allOf();","import DiceRoll from \"./DiceRoll\";\r\nimport Entity from \"../Entity\";\r\n\r\nexport const ModifierType = {\r\n  REGULAR: 'REGULAR',\r\n  PROFESSION: 'PROFESSION',\r\n  EXPERIENCE: 'EXPERIENCE',\r\n  DICE: 'DICE',\r\n\r\n  allOf() {\r\n    return [\r\n      this.REGULAR,\r\n      this.PROFESSION,\r\n      this.EXPERIENCE,\r\n      this.DICE,\r\n    ];\r\n  }\r\n};\r\n\r\nclass Modifier extends Entity {\r\n  value: number;\r\n  type: string = ModifierType.REGULAR;\r\n  rolls: DiceRoll[] = [];\r\n\r\n  updateWith(entity: Modifier): Modifier {\r\n    super.updateWith(entity);\r\n    this.updateEntityList(entity, 'rolls', () => new DiceRoll());\r\n    return this;\r\n  }\r\n\r\n  toString() {\r\n    return this.type + ' ' + this.value + ' ' + this.rolls.map(\r\n        roll => roll.toString()).join(' ')\r\n  }\r\n}\r\n\r\nexport default Modifier;\r\n","import Modifier, {ModifierType} from \"./Modifier\";\r\nimport Entity                   from \"../Entity\";\r\n\r\nexport default class Determinant extends Entity {\r\n    type: string;\r\n    value: number = 0;\r\n    modifiers: Modifier[] = [];\r\n\r\n    updateWith(entity: Determinant): Determinant {\r\n        super.updateWith(entity);\r\n        this.updateEntityList(entity, 'modifiers', () => new Modifier());\r\n        return this;\r\n    }\r\n\r\n    getExperienceExtensions() {\r\n        return this.modifiers.filter(mod => mod.type === ModifierType.EXPERIENCE)\r\n    }\r\n\r\n    calculateExperienceValue() {\r\n        return this.value + this.getExperienceExtensions().reduce((a, b) => a + (b.value), 0);\r\n    }\r\n    calculateFinalValue() {\r\n        return this.value + this.modifiers.reduce((a, b) => a + (b.value), 0);\r\n    }\r\n}\r\n\r\nexport const DeterminantType = {\r\n    SPEED: 'SPEED',\r\n    BATTLE: 'BATTLE',\r\n    SHOOTING: 'SHOOTING',\r\n    STRENGTH: 'STRENGTH',\r\n    DURABILITY: 'DURABILITY',\r\n    HEALTH: 'HEALTH',\r\n    INITIATIVE: 'INITIATIVE',\r\n    ATTACK: 'ATTACK',\r\n    DEXTERITY: 'DEXTERITY',\r\n    LEADER_SKILLS: 'LEADER_SKILLS',\r\n    INTELLIGENCE: 'INTELLIGENCE',\r\n    CONTROL: 'CONTROL',\r\n    WILL: 'WILL',\r\n    CHARISMA: 'CHARISMA',\r\n    PARRY: 'PARRY',\r\n    OPPONENT_PARRY: 'OPPONENT_PARRY',\r\n\r\n    allOf(): string[] {\r\n        return [\r\n            this.SPEED,\r\n            this.BATTLE,\r\n            this.SHOOTING,\r\n            this.STRENGTH,\r\n            this.DURABILITY,\r\n            this.HEALTH,\r\n            this.INITIATIVE,\r\n            this.ATTACK,\r\n            this.DEXTERITY,\r\n            this.LEADER_SKILLS,\r\n            this.INTELLIGENCE,\r\n            this.CONTROL,\r\n            this.WILL,\r\n            this.CHARISMA,\r\n            this.PARRY,\r\n            this.OPPONENT_PARRY,\r\n        ];\r\n    },\r\n    personal(): string[] {\r\n        return [\r\n            this.SPEED,\r\n            this.BATTLE,\r\n            this.SHOOTING,\r\n            this.STRENGTH,\r\n            this.DURABILITY,\r\n            this.HEALTH,\r\n            this.INITIATIVE,\r\n            this.ATTACK,\r\n            this.DEXTERITY,\r\n            this.LEADER_SKILLS,\r\n            this.INTELLIGENCE,\r\n            this.CONTROL,\r\n            this.WILL,\r\n            this.CHARISMA,\r\n        ];\r\n    },\r\n};\r\n","import React, {Component} from \"react\";\r\nimport EnumSelect from \"./EnumSelect\";\r\nimport IntegerField from \"./IntegerField\";\r\nimport {State} from \"../../state/State\";\r\nimport {Dice} from \"../../model/rule/DiceRoll\";\r\n\r\nexport default class DiceRollField extends Component {\r\n    updateDiceRoll = updates => {\r\n        this.props.value.updateWith(updates);\r\n        State.update({currentDiceRollEdit: this.props.value});\r\n    };\r\n\r\n    render() {\r\n        const {value, id, editable} = this.props;\r\n\r\n        return <div key={id}>\r\n            <EnumSelect key={id + '_type'}\r\n                        label={'dice'}\r\n                        data={Dice.allOf()}\r\n                        value={value.dice}\r\n                        onChange={selected => this.updateDiceRoll({dice: selected})}\r\n                        editable={editable}/>\r\n            <IntegerField key={id + '_rolls'}\r\n                          label={'rolls'}\r\n                          value={value.rolls}\r\n                          onChange={number => this.updateDiceRoll({rolls: number})}\r\n                          InputProps={{readOnly: !editable}}/>\r\n        </div>;\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport EnumSelect from \"./EnumSelect\";\r\nimport IntegerField from \"./IntegerField\";\r\nimport {Button} from \"@material-ui/core\";\r\nimport DiceRollField from \"./DiceRollField\";\r\nimport {ModifierType} from \"../../model/rule/Modifier\";\r\nimport {State} from \"../../state/State\";\r\nimport DiceRoll from \"../../model/rule/DiceRoll\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nclass ModifierField extends Component {\r\n\r\n    update = updates => {\r\n        this.props.value.updateWith(updates);\r\n        State.update({currentModifierEdit: this.props.value});\r\n    };\r\n\r\n    onAddDiceRoll = () => {\r\n        this.props.value.rolls.push(new DiceRoll());\r\n        State.update({currentModifierEdit: this.props.value});\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            t,\r\n            name,\r\n            value,\r\n            label = t(name),\r\n            id,\r\n            types = ModifierType.allOf(),\r\n            editable\r\n        } = this.props;\r\n\r\n        let dices = <div/>;\r\n        if (value.type === ModifierType.DICE) {\r\n            dices = <Grid item>\r\n                {\r\n                    value.rolls.map(diceRoll =>\r\n                        <DiceRollField id={id} key={id} value={diceRoll}\r\n                                       onChange={() => State.update({currentModifierEdit: value})}\r\n                                       editable={editable}/>\r\n                    )\r\n                }\r\n                {editable ?\r\n                    <Button onClick={this.onAddDiceRoll}>{t('newDice')}</Button> :\r\n                    <div/>\r\n                }\r\n            </Grid>;\r\n        }\r\n\r\n        return <Grid container item spacing={2} alignItems={\"center\"}>\r\n            <Grid item>\r\n                <IntegerField key={id + '_value'} label={label + '  ' + t('value')}\r\n                              value={value.value}\r\n                              onChange={number => this.update({value: number})}\r\n                              InputProps={{readOnly: !editable}}/>\r\n            </Grid>\r\n            <Grid item>\r\n                <EnumSelect key={id || name + '_type'} label={t('modifierType') + ' ' + name ? t(name) : value.id}\r\n                            data={types} value={value.type}\r\n                            onChange={selected => this.update({type: selected})}\r\n                            editable={editable}/>\r\n            </Grid>\r\n            {dices}\r\n        </Grid>;\r\n    }\r\n}\r\n\r\nexport default withTranslation()(ModifierField);","import Button                         from \"@material-ui/core/Button\";\r\nimport Grid                           from \"@material-ui/core/Grid\";\r\nimport IconButton                     from \"@material-ui/core/IconButton\";\r\nimport Paper                          from \"@material-ui/core/Paper\";\r\nimport {Remove}                       from \"@material-ui/icons\";\r\nimport React, {Component}             from \"react\";\r\nimport {withTranslation}              from \"react-i18next\";\r\nimport Determinant, {DeterminantType} from \"../../model/rule/Determinant\";\r\nimport Modifier, {ModifierType}       from \"../../model/rule/Modifier\";\r\nimport {State}                        from \"../../state/State\";\r\nimport EnumSelect                     from \"./EnumSelect\";\r\nimport IntegerField                   from \"./IntegerField\";\r\nimport ModifierField                  from \"./ModifierField\";\r\n\r\nclass DeterminantField extends Component {\r\n\r\n  deleteItem = (item) => {\r\n    const value = this.props.value;\r\n    value.splice(value.indexOf(item), 1);\r\n    State.update({currentDeterminantEdit: value});\r\n  };\r\n\r\n  update = (determinant, updates) => {\r\n    determinant.updateWith(updates);\r\n    State.updateEntity({[this.props.name]: this.props.value});\r\n  };\r\n\r\n  addDeterminant = () => {\r\n    const entity = State.data.entity;\r\n    const prop = this.props.name;\r\n\r\n    if (entity[prop]) {\r\n      entity[prop].push(new Determinant());\r\n      State.updateEntity({[prop]: entity[prop]});\r\n    } else {\r\n      State.updateEntity({[prop]: [new Determinant()]});\r\n    }\r\n  };\r\n\r\n  addModifierToDeterminant = (determinant) => () => {\r\n    determinant.modifiers.push(new Modifier());\r\n    State.updateEntity({[this.props.name]: this.props.value});\r\n  };\r\n\r\n  updateModifier = modifier => newModifier => {\r\n    modifier.updateWith(newModifier);\r\n    State.updateEntity({[this.props.name]: this.props.value});\r\n  };\r\n\r\n  render() {\r\n    const {\r\n            t,\r\n            name,\r\n            value,\r\n            modifierTypes = ModifierType.allOf(),\r\n            types = DeterminantType.allOf(),\r\n            editable\r\n          } = this.props;\r\n\r\n    return <Grid container spacing={2} alignItems={\"center\"}>\r\n      <Grid item>{t(name)}</Grid>\r\n      <Grid item container spacing={2} alignItems={\"center\"}>\r\n        {value && value.map(determinant => {\r\n          console.log(determinant);\r\n          return (\r\n              <Grid item container spacing={2} alignItems={\"center\"} key={determinant.id + determinant.type}>\r\n                <Grid item>\r\n                  <EnumSelect key={determinant.id + determinant.type}\r\n                              label={t(name) + determinant.type}\r\n                              data={types} value={determinant.type}\r\n                              onChange={selected => this.update(determinant, {type: selected})}\r\n                              editable={editable}/>\r\n                </Grid>\r\n                <Grid item>\r\n                  <IntegerField key={determinant.id + determinant.type + 'value'} label={'value'}\r\n                                value={determinant.value}\r\n                                onChange={number => this.update(determinant, {value: number})}\r\n                                InputProps={{readOnly: !editable}}/>\r\n                </Grid>\r\n                {<Grid item container spacing={2} alignItems={\"center\"}>\r\n                  <Grid item>\r\n                    {t('modifier')}\r\n                  </Grid>\r\n                  <Grid item>\r\n                    {determinant.modifiers && determinant.modifiers.map(currentModifier => (\r\n                        <Paper key={determinant.id + determinant.type + '_' + currentModifier.id}>\r\n                          <ModifierField\r\n                              id={determinant.id\r\n                                  + determinant.type\r\n                                  + currentModifier.id\r\n                                  + currentModifier.type}\r\n                              value={currentModifier}\r\n                              types={modifierTypes}\r\n                              editable={editable}/>\r\n                        </Paper>))}\r\n                  </Grid>\r\n                  <Grid item>\r\n                    {editable ? <Button\r\n                            onClick={this.addModifierToDeterminant(determinant)}>{t('newModifier')}</Button> :\r\n                        <div/>\r\n                    }\r\n                  </Grid>\r\n                </Grid>}\r\n                {editable ?\r\n                    <IconButton key={determinant.id + determinant.type + 'remove'}\r\n                                onClick={() => this.deleteItem(determinant)}><Remove/></IconButton> :\r\n                    <div/>}\r\n              </Grid>)\r\n        })}\r\n      </Grid>\r\n      <Grid item>\r\n        {editable ? <Button onClick={this.addDeterminant}>{t('newDeterminant')}</Button> : <div/>}\r\n      </Grid>\r\n    </Grid>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(DeterminantField);","import React, {Component} from \"react\";\r\nimport Select from \"react-select\";\r\nimport makeAnimated from 'react-select/animated'\r\nimport {FormLabel} from \"@material-ui/core\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport {State} from \"../../state/State\";\r\n\r\nclass EntitySelect extends Component {\r\n    render() {\r\n        const {\r\n            t,\r\n            name,\r\n            label = t(name),\r\n            suggestions = name,\r\n            data = State.data[suggestions],\r\n            value = State.data.entity[name],\r\n            multi = false,\r\n            onChange = this.updateEntity,\r\n            editable\r\n        } = this.props;\r\n\r\n        return <div>\r\n            <FormLabel>{label}</FormLabel>\r\n            <Select textFieldProps={{label: label, InputLabelProps: {shrink: false}}}\r\n                    options={data}\r\n                    components={makeAnimated()}\r\n                    getOptionLabel={option => {\r\n                        return <div>{option.name || option.authority}</div>\r\n                    }}\r\n                    getOptionValue={option => {\r\n                        return option.id\r\n                    }}\r\n                    filterOption={(option, input) => !option.data.name || option.data.name.startsWith(input)}\r\n                    onChange={onChange}\r\n                    value={value}\r\n                    isMulti={multi}\r\n                    isDisabled={!editable}/>\r\n        </div>;\r\n    }\r\n\r\n    updateEntity = newValue => {\r\n        const {name} = this.props;\r\n        const entity = State.data.entity;\r\n        entity.updateWith({[name]: newValue});\r\n        State.update({entity: entity})\r\n    };\r\n}\r\n\r\nexport default withTranslation()(EntitySelect);","import React, {Component} from \"react\";\r\nimport {FormLabel, TextField} from \"@material-ui/core\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport {State} from \"../../state/State\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nclass PriceField extends Component {\r\n\r\n  updatePrice = (onChange, part) => event => {\r\n    const {name, value = State.data.entity[name]} = this.props;\r\n    let number = parseInt(event.target.value);\r\n    if (number || number === 0) {\r\n      onChange({...value, ...{[part]: number}})\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      t,\r\n      name,\r\n      label = t(name),\r\n      onChange = price => State.updateEntity({[name]: price}),\r\n      value = State.data.entity[name],\r\n      editable\r\n    } = this.props;\r\n\r\n    return <Grid container spacing={2} alignItems={\"center\"}>\r\n      <Grid item>\r\n        <FormLabel style={{marginRight: 10}}>{label}</FormLabel>\r\n      </Grid>\r\n      <Grid item>\r\n        <TextField label={t('gold')}\r\n                   type='number'\r\n                   value={value.gold}\r\n                   onChange={this.updatePrice(onChange, 'gold')}\r\n                   InputProps={{readOnly: !editable}}/>\r\n      </Grid>\r\n      <Grid item>\r\n        <TextField label={t('silver')}\r\n                   type='number'\r\n                   value={value.silver}\r\n                   onChange={this.updatePrice(onChange, 'silver')}\r\n                   InputProps={{readOnly: !editable}}/>\r\n      </Grid>\r\n      <Grid item>\r\n        <TextField label={t('lead')}\r\n                   type='number'\r\n                   value={value.lead}\r\n                   onChange={this.updatePrice(onChange, 'lead')}\r\n                   InputProps={{readOnly: !editable}}/>\r\n      </Grid>\r\n    </Grid>\r\n  }\r\n}\r\n\r\nexport default withTranslation()(PriceField);","import Grid from \"@material-ui/core/Grid\";\r\nimport React, {Component} from 'react';\r\nimport {withTranslation} from \"react-i18next\";\r\nimport Determinant from \"../../model/rule/Determinant\";\r\nimport DiceRoll from \"../../model/rule/DiceRoll\";\r\nimport Modifier, {ModifierType} from \"../../model/rule/Modifier\";\r\nimport {State} from \"../../state/State\";\r\nimport EnumSelect from \"./EnumSelect\";\r\nimport IntegerField from \"./IntegerField\";\r\n\r\nconst determinantsNames = ['SPEED',\r\n                           'BATTLE',\r\n                           'SHOOTING',\r\n                           'STRENGTH',\r\n                           'DURABILITY',\r\n                           'HEALTH',\r\n                           'INITIATIVE',\r\n                           'ATTACK',\r\n                           'DEXTERITY',\r\n                           'LEADER_SKILLS',\r\n                           'INTELLIGENCE',\r\n                           'CONTROL',\r\n                           'WILL',\r\n                           'CHARISMA',];\r\n\r\nclass RaceDeterminantsField extends Component {\r\n  regenerateDeterminants = entity => {\r\n    if (!entity.determinants || entity.determinants.length === 0) {\r\n      determinantsNames.forEach(name => {\r\n        const modifier = new Modifier();\r\n        modifier.type  = ModifierType.DICE;\r\n\r\n        const determinant = new Determinant();\r\n        determinant.type  = name;\r\n        determinant.modifiers.push(modifier);\r\n\r\n        entity.determinants.push(determinant);\r\n      })\r\n    } else {\r\n      entity.determinants.filter(determinant => !determinant.modifiers)\r\n            .forEach(determinant => {\r\n              determinant.modifiers = [new Modifier()]\r\n            });\r\n      entity.determinants.filter(determinant => determinant.modifiers.length === 0)\r\n            .forEach(determinant => determinant.modifiers.push(new Modifier()));\r\n    }\r\n  };\r\n\r\n  updateDiceType = determinant => type => {\r\n    if (!type && determinant.modifiers[0].rolls.length === 1) {\r\n      determinant.modifiers[0].rolls.length = 0;\r\n    } else if (type && determinant.modifiers[0].rolls.length === 0) {\r\n      determinant.modifiers[0].rolls.push(new DiceRoll());\r\n      determinant.modifiers[0].rolls[0].dice = type;\r\n    } else {\r\n      determinant.modifiers[0].rolls[0].dice = type;\r\n    }\r\n    State.updateEntity(State.data.entity);\r\n  };\r\n\r\n  updateDiceRolls = determinant => rolls => {\r\n    if (rolls === 0 && determinant.modifiers[0].rolls.length === 1) {\r\n      determinant.modifiers[0].rolls.length = 0;\r\n    } else if (rolls > 0 && determinant.modifiers[0].rolls.length === 0) {\r\n      determinant.modifiers[0].rolls.push(new DiceRoll());\r\n      determinant.modifiers[0].rolls[0].rolls = rolls;\r\n    } else {\r\n      determinant.modifiers[0].rolls[0].rolls = rolls;\r\n    }\r\n    State.updateEntity(State.data.entity);\r\n  };\r\n\r\n  updateBasicModifier = determinant => modifier => {\r\n    determinant.modifiers[0].value = modifier;\r\n    State.updateEntity(State.data.entity);\r\n  };\r\n\r\n  render() {\r\n    const {t}    = this.props;\r\n    const entity = State.data.entity;\r\n    this.regenerateDeterminants(entity);\r\n\r\n    const fields = entity.determinants.map(determinant => [\r\n        <Grid item xs={1}>{t(determinant.type)}</Grid>,\r\n        <Grid item xs={3}><EnumSelect name={'dice'}\r\n                                      value={determinant.modifiers[0].rolls.length && determinant.modifiers[0].rolls[0].dice}\r\n                                      editable\r\n                                      onChange={this.updateDiceType(determinant)}/></Grid>,\r\n        <Grid item xs={1}>{t('rolls')} <IntegerField value={determinant.modifiers[0].rolls.length && determinant.modifiers[0].rolls[0].rolls}\r\n                                                     onChange={this.updateDiceRolls(determinant)}/></Grid>,\r\n        <Grid item xs={1}>{t('plus')} <IntegerField value={determinant.modifiers[0].value}\r\n                                                    onChange={this.updateBasicModifier(determinant)}/></Grid>]);\r\n\r\n    return <Grid container spacing={2} alignItems={\"center\"}>\r\n      {fields.map(field => <Grid item container xs={12} alignItems={\"center\"}>{field}</Grid>)}\r\n    </Grid>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(RaceDeterminantsField);","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class Skill extends Entity {\r\n    static entityName: string = 'skill';\r\n\r\n    name: string;\r\n    description: string;\r\n\r\n\r\n    updateWith(entity: Skill): Skill {\r\n        return super.updateWith(entity);\r\n    }\r\n}\r\n\r\nRegisterEntity(Skill, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n]);","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport Skill from \"../knowledge/Skill\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class ProfessionClass extends Entity {\r\n    static entityName: string = 'professionClass';\r\n\r\n    name: string;\r\n    description: string;\r\n    skills: Skill[] = [];\r\n\r\n    updateWith(entity: ProfessionClass): ProfessionClass {\r\n        super.updateWith(entity);\r\n        this.updateEntityList(entity, 'skills', () => new Skill());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(ProfessionClass, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('skills', FormFieldType.ENTITY_COMBOBOX, Skill.entityName)\r\n]);","import Entity from \"../Entity\";\r\nimport Determinant from \"./Determinant\";\r\n\r\nexport default class DeterminantContainer extends Entity {\r\n    determinants: Determinant[] = [];\r\n\r\n    updateWith(entity: DeterminantContainer): DeterminantContainer {\r\n        super.updateWith(entity);\r\n        this.updateEntityList(entity, 'determinants', () => new Determinant());\r\n        return this;\r\n    }\r\n}","import ProfessionClass from \"./ProfessionClass\";\r\nimport DeterminantContainer from \"../rule/DeterminantContainer\";\r\nimport Skill from \"../knowledge/Skill\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class Profession extends DeterminantContainer {\r\n    static entityName: string = 'profession';\r\n\r\n    name: string;\r\n    description: string;\r\n    professionClass: ProfessionClass;\r\n    skills: Skill[] = [];\r\n    nextProfessions: Profession[] = [];\r\n\r\n    updateWith(entity: Profession): Profession {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'professionClass', () => new ProfessionClass());\r\n        this.updateEntityList(entity, 'skills', () => new Skill());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(Profession, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('professionClass', FormFieldType.ENTITY_SELECT, ProfessionClass.entityName),\r\n    CreateFormField('determinants', FormFieldType.DETERMINANT),\r\n    CreateFormField('skills', FormFieldType.ENTITY_COMBOBOX, Skill.entityName),\r\n    CreateFormField('nextProfessions', FormFieldType.ENUM_COMBOBOX, Profession.entityName),\r\n]);","import Profession                     from \"../professions/Profession\";\r\nimport Determinant, {DeterminantType} from \"../rule/Determinant\";\r\n\r\nexport default class CreatureDeterminants {\r\n    determinants: Determinant[] = [];\r\n\r\n    constructor() {\r\n        const speed = new Determinant();\r\n        speed.type = DeterminantType.SPEED;\r\n        const battle = new Determinant();\r\n        battle.type = DeterminantType.BATTLE;\r\n        const shooting = new Determinant();\r\n        shooting.type = DeterminantType.SHOOTING;\r\n        const strength = new Determinant();\r\n        strength.type = DeterminantType.STRENGTH;\r\n        const durability = new Determinant();\r\n        durability.type = DeterminantType.DURABILITY;\r\n        const health = new Determinant();\r\n        health.type = DeterminantType.HEALTH;\r\n        const attack = new Determinant();\r\n        attack.type = DeterminantType.ATTACK;\r\n        const initiative = new Determinant();\r\n        initiative.type = DeterminantType.INITIATIVE;\r\n        const dexterity = new Determinant();\r\n        dexterity.type = DeterminantType.DEXTERITY;\r\n        const leaderSkills = new Determinant();\r\n        leaderSkills.type = DeterminantType.LEADER_SKILLS;\r\n        const intelligence = new Determinant();\r\n        intelligence.type = DeterminantType.INTELLIGENCE;\r\n        const control = new Determinant();\r\n        control.type = DeterminantType.CONTROL;\r\n        const will = new Determinant();\r\n        will.type = DeterminantType.WILL;\r\n        const charisma = new Determinant();\r\n        charisma.type = DeterminantType.CHARISMA;\r\n        this.determinants.push(speed, battle, shooting, strength, durability, health, attack, initiative,\r\n            dexterity, leaderSkills, intelligence, control, will, charisma);\r\n    }\r\n\r\n    updateWith(determinants: CreatureDeterminants): CreatureDeterminants {\r\n        if (determinants.determinants) {\r\n            determinants.determinants.forEach(determinant => {\r\n                const newDeterminant = new Determinant();\r\n                newDeterminant.updateWith(determinant);\r\n                this.replaceDeterminant(newDeterminant);\r\n            });\r\n        }\r\n        return this;\r\n    }\r\n\r\n    updateDeterminantValue(value: number, type: string) {\r\n        this.findDeterminant(type).value = value;\r\n    }\r\n\r\n    findDeterminant(type: string) {\r\n        return this.determinants.find(determinant => type === determinant.type)\r\n    }\r\n\r\n    replaceDeterminant(determinant: Determinant) {\r\n        const toReplace = this.findDeterminant(determinant.type);\r\n        let determinantIndex = this.determinants.indexOf(toReplace);\r\n        this.determinants.splice(determinantIndex, 1);\r\n        this.determinants.push(determinant);\r\n    }\r\n}","import {State} from \"../../state/State\";\r\n\r\nexport const Availability = [\r\n    'ABUNDANT',\r\n    'PLENTIFUL',\r\n    'COMMON',\r\n    'AVERAGE',\r\n    'SCARCE',\r\n    'RARE',\r\n    'VERY_RARE'\r\n];\r\n\r\nexport const availabilityEntityName = 'availability';\r\n\r\nState.data[availabilityEntityName] = Availability;","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {Availability, availabilityEntityName} from \"./Availability\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class ArmorPattern extends Entity {\r\n    static entityName: string = 'armorPattern';\r\n\r\n    name: string;\r\n    description: string;\r\n    priceMultiplier: number;\r\n    weight: number;\r\n    strength: number;\r\n    availability: string = Availability[0];\r\n}\r\n\r\nRegisterEntity(ArmorPattern, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n    CreateColumn('strength', FormFieldType.INTEGER),\r\n    CreateColumn('availability', FormFieldType.TEXT),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('priceMultiplier', FormFieldType.FLOAT),\r\n    CreateFormField('weight', FormFieldType.FLOAT),\r\n    CreateFormField('strength', FormFieldType.FLOAT),\r\n    CreateFormField('availability', FormFieldType.ENUM_SELECT, availabilityEntityName),\r\n]);","import ModelElement from \"../ModelElement\";\r\nimport {State} from \"../../state/State\";\r\n\r\nexport const entityName = 'price';\r\n\r\nexport default class Price extends ModelElement {\r\n    gold: number = 0;\r\n    silver: number = 0;\r\n    lead: number = 0;\r\n\r\n    toString() {\r\n        return this.gold + ' ' + this.silver + ' ' + this.lead;\r\n    }\r\n}\r\n\r\nState.suppliers[entityName] = () => new Price();\r\n","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\nimport {availabilityEntityName} from \"./Availability\";\r\n\r\nexport default class Resource extends Entity {\r\n    static entityName: string = 'resource';\r\n\r\n    name: string;\r\n    description: string;\r\n    priceMultiplier: number;\r\n    weight: number;\r\n    durability: number;\r\n    strength: number;\r\n    availability: string = 'COMMON';\r\n}\r\n\r\nRegisterEntity(Resource, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n    CreateColumn('priceMultiplier', FormFieldType.FLOAT),\r\n    CreateColumn('durability', FormFieldType.FLOAT),\r\n    CreateColumn('strength', FormFieldType.FLOAT),\r\n    CreateColumn('availability', FormFieldType.TEXT),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('priceMultiplier', FormFieldType.FLOAT),\r\n    CreateFormField('weight', FormFieldType.FLOAT),\r\n    CreateFormField('durability', FormFieldType.FLOAT),\r\n    CreateFormField('strength', FormFieldType.FLOAT),\r\n    CreateFormField('availability', FormFieldType.ENUM_SELECT, availabilityEntityName),\r\n]);","import {State} from \"../../state/State\";\r\n\r\nexport const Placement = {\r\n    BODY: 'BODY',\r\n    HEAD: 'HEAD',\r\n    TORSO: 'TORSO',\r\n    HAND: 'HAND',\r\n    LEG: 'LEG',\r\n    BELT: 'BELT',\r\n    NECK: 'NECK',\r\n    FINGER: 'FINGER',\r\n    SHIELD: 'SHIELD',\r\n    BOTH_HANDS: 'BOTH_HANDS',\r\n\r\n    allOf() {\r\n        return [\r\n            this.BODY,\r\n            this.HEAD,\r\n            this.TORSO,\r\n            this.HAND,\r\n            this.LEG,\r\n            this.BELT,\r\n            this.NECK,\r\n            this.FINGER,\r\n            this.SHIELD,\r\n            this.BOTH_HANDS,\r\n        ];\r\n    },\r\n\r\n    armor() {\r\n        return [\r\n            this.BODY,\r\n            this.HEAD,\r\n            this.TORSO,\r\n            this.HAND,\r\n            this.LEG,\r\n            this.BELT,\r\n            this.SHIELD,\r\n        ];\r\n    },\r\n\r\n    weapon() {\r\n        return [\r\n            this.HAND,\r\n            this.BOTH_HANDS,\r\n            this.SHIELD,\r\n        ];\r\n    },\r\n\r\n    jewelry() {\r\n        return [\r\n            this.NECK,\r\n            this.FINGER,\r\n        ];\r\n    },\r\n};\r\n\r\nexport const placementName = 'placement';\r\nexport const placementArmorName = 'placementArmor';\r\nexport const placementWeaponName = 'placementWeapon';\r\nexport const placementJewelryName = 'placementJewelry';\r\n\r\nState.data[placementName] = Placement.allOf();\r\nState.data[placementArmorName] = Placement.armor();\r\nState.data[placementWeaponName] = Placement.weapon();\r\nState.data[placementJewelryName] = Placement.jewelry();","import DeterminantContainer from \"../rule/DeterminantContainer\";\r\nimport Price from \"../world/Price\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\nimport {placementArmorName} from \"./Placement\";\r\n\r\nexport default class ArmorBlueprint extends DeterminantContainer {\r\n    static entityName: string = 'armorBlueprint';\r\n\r\n    name: string;\r\n    description: string;\r\n    armor: number;\r\n    suggestedPrice: Price = new Price();\r\n    suggestedWeight: number;\r\n    placement: string[] = [];\r\n\r\n    updateWith(entity: DeterminantContainer): ArmorBlueprint {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'suggestedPrice', () => new Price());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(ArmorBlueprint, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n    CreateColumn('armor', FormFieldType.INTEGER),\r\n    CreateColumn('placement', FormFieldType.TEXT),\r\n    CreateColumn('suggestedPrice', FormFieldType.PRICE),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('armor', FormFieldType.INTEGER),\r\n    CreateFormField('suggestedPrice', FormFieldType.PRICE),\r\n    CreateFormField('suggestedWeight', FormFieldType.INTEGER),\r\n    CreateFormField('placement', FormFieldType.ENUM_COMBOBOX, placementArmorName),\r\n    CreateFormField('determinants', FormFieldType.DETERMINANT),\r\n]);","import ArmorPattern                                    from \"./ArmorPattern\";\r\nimport DeterminantContainer\r\n                                                       from \"../rule/DeterminantContainer\";\r\nimport Price                                           from \"../world/Price\";\r\nimport Resource                                        from \"./Resource\";\r\nimport ArmorBlueprint                                  from \"./ArmorBlueprint\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType}                                 from \"../../form/FormFieldType\";\r\nimport {availabilityEntityName}                        from \"./Availability\";\r\n\r\nexport default class Armor extends DeterminantContainer {\r\n  static entityName: string = 'armor';\r\n\r\n  name: string;\r\n  description: string;\r\n  weight: number;\r\n  price: Price = new Price();\r\n  availability: string = 'COMMON';\r\n  primaryResource: Resource;\r\n  secondaryResource: Resource;\r\n  type: ArmorBlueprint;\r\n  armorPattern: ArmorPattern;\r\n\r\n  updateWith(entity: *): Armor {\r\n    super.updateWith(entity);\r\n    this.updateEntityProp(entity, 'price', () => new Price());\r\n    this.updateEntityProp(entity, 'primaryResource', () => new Resource());\r\n    this.updateEntityProp(entity, 'secondaryResource', () => new Resource());\r\n    this.updateEntityProp(entity, 'type', () => new ArmorBlueprint());\r\n    this.updateEntityProp(entity, 'armorPattern', () => new ArmorPattern());\r\n    return this;\r\n  }\r\n}\r\n\r\nRegisterEntity(Armor,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('description', FormFieldType.TEXT_AREA),\r\n                CreateColumn('price', FormFieldType.PRICE),\r\n                CreateColumn('type', FormFieldType.ENTITY_SELECT),\r\n                CreateColumn('armorPattern', FormFieldType.ENTITY_SELECT),\r\n               ],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('description', FormFieldType.TEXT_AREA),\r\n                CreateFormField('weight', FormFieldType.FLOAT),\r\n                CreateFormField('price', FormFieldType.PRICE),\r\n                CreateFormField('availability', FormFieldType.ENUM_SELECT, availabilityEntityName),\r\n                CreateFormField('primaryResource', FormFieldType.ENTITY_SELECT, Resource.entityName),\r\n                CreateFormField('secondaryResource', FormFieldType.ENTITY_SELECT, Resource.entityName),\r\n                CreateFormField('type', FormFieldType.BLUEPRINT_SELECT, ArmorBlueprint.entityName),\r\n                CreateFormField('armorPattern', FormFieldType.ENTITY_SELECT, ArmorPattern.entityName),\r\n                CreateFormField('determinants', FormFieldType.DETERMINANT),]);\r\n","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport Price from \"../world/Price\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\nimport {availabilityEntityName} from \"./Availability\";\r\n\r\nexport default class Item extends Entity {\r\n    static entityName: string = 'miscItem';\r\n\r\n    name: string;\r\n    description: string;\r\n    weight: number;\r\n    price: Price = new Price();\r\n    availability: string = 'COMMON';\r\n\r\n\r\n    updateWith(entity: *): Item {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'price', () => new Price());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(Item, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n    CreateColumn('weight', FormFieldType.FLOAT),\r\n    CreateColumn('price', FormFieldType.PRICE),\r\n    CreateColumn('availability', FormFieldType.ENUM_SELECT),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('weight', FormFieldType.FLOAT),\r\n    CreateFormField('price', FormFieldType.PRICE),\r\n    CreateFormField('availability', FormFieldType.ENUM_SELECT, availabilityEntityName),\r\n]);","import Item from \"./Item\";\r\nimport Entity from \"../Entity\";\r\n\r\nexport default class Inventory extends Entity {\r\n    item: Item;\r\n    amount: number = 1;\r\n\r\n    updateWith(entity: Inventory): Inventory {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'item', () => new Item());\r\n        return this;\r\n    }\r\n}","import DeterminantContainer from \"../rule/DeterminantContainer\";\r\nimport Price from \"../world/Price\";\r\nimport Modifier from \"../rule/Modifier\";\r\nimport ActionTime from \"../rule/ActionTime\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\nimport {Placement, placementWeaponName} from \"./Placement\";\r\n\r\nexport default class MeleeWeaponBlueprint extends DeterminantContainer {\r\n    static entityName: string = 'meleeWeaponBlueprint';\r\n\r\n    name: string;\r\n    description: string;\r\n    suggestedPrice: Price = new Price();\r\n    suggestedWeight: number;\r\n    damage: Modifier = new Modifier();\r\n    prepareTime: ActionTime = new ActionTime();\r\n    placement: string = Placement.HAND;\r\n\r\n    updateWith(entity: MeleeWeaponBlueprint): MeleeWeaponBlueprint {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'suggestedPrice', () => new Price());\r\n        this.updateEntityProp(entity, 'damage', () => new Modifier());\r\n        this.updateEntityProp(entity, 'prepareTime', () => new ActionTime());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(MeleeWeaponBlueprint, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n    CreateColumn('damage', FormFieldType.MODIFIER),\r\n    CreateColumn('placement', FormFieldType.TEXT),\r\n    CreateColumn('suggestedPrice', FormFieldType.PRICE),\r\n    CreateColumn('suggestedWeight', FormFieldType.FLOAT),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('suggestedPrice', FormFieldType.PRICE),\r\n    CreateFormField('suggestedWeight', FormFieldType.INTEGER),\r\n    CreateFormField('damage', FormFieldType.MODIFIER),\r\n    CreateFormField('prepareTime', FormFieldType.ACTION_TIME),\r\n    CreateFormField('placement', FormFieldType.ENUM_COMBOBOX, placementWeaponName),\r\n    CreateFormField('determinantes', FormFieldType.DETERMINANT),\r\n]);","import DeterminantService from \"../../client/DeterminantService\";\r\nimport {FormFieldType}                                 from \"../../form/FormFieldType\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport DeterminantContainer                            from \"../rule/DeterminantContainer\";\r\nimport Price                                           from \"../world/Price\";\r\nimport {availabilityEntityName}                        from \"./Availability\";\r\nimport MeleeWeaponBlueprint                            from \"./MeleeWeaponBlueprint\";\r\nimport Resource                                        from \"./Resource\";\r\n\r\nexport default class MeleeWeapon extends DeterminantContainer {\r\n  static entityName: string = 'meleeWeapon';\r\n\r\n  name: string;\r\n  description: string;\r\n  weight: number;\r\n  price: Price = new Price();\r\n  availability: string = 'COMMON';\r\n  primaryResource: Resource;\r\n  secondaryResource: Resource;\r\n  type: MeleeWeaponBlueprint;\r\n\r\n  updateWith(entity: *): MeleeWeapon {\r\n    super.updateWith(entity);\r\n    this.updateEntityProp(entity, 'price', () => new Price());\r\n    this.updateEntityProp(entity, 'primaryResource', () => new Resource());\r\n    this.updateEntityProp(entity, 'secondaryResource', () => new Resource());\r\n    this.updateEntityProp(entity, 'type', () => new MeleeWeaponBlueprint());\r\n    return this;\r\n  }\r\n\r\n  getFinalValueForType(determinantType: string): number {\r\n    return DeterminantService.sumValueByTypeIn(this.type.determinants, determinantType)\r\n           + DeterminantService.sumValueByTypeIn(this.determinants, determinantType);\r\n  }\r\n}\r\n\r\nRegisterEntity(MeleeWeapon,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('description', FormFieldType.TEXT_AREA),\r\n                CreateColumn('price', FormFieldType.PRICE),\r\n                CreateColumn('type', FormFieldType.ENTITY_SELECT),],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('description', FormFieldType.TEXT_AREA),\r\n                CreateFormField('weight', FormFieldType.FLOAT),\r\n                CreateFormField('price', FormFieldType.PRICE),\r\n                CreateFormField('availability', FormFieldType.ENUM_SELECT, availabilityEntityName),\r\n                CreateFormField('primaryResource',\r\n                                FormFieldType.ENTITY_SELECT,\r\n                                Resource.entityName),\r\n                CreateFormField('secondaryResource',\r\n                                FormFieldType.ENTITY_SELECT,\r\n                                Resource.entityName),\r\n                CreateFormField('type',\r\n                                FormFieldType.BLUEPRINT_SELECT,\r\n                                MeleeWeaponBlueprint.entityName),\r\n                CreateFormField('determinants', FormFieldType.DETERMINANT),]);\r\n","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class SpellSchool extends Entity {\r\n    static entityName: string = 'spellSchool';\r\n\r\n    name: string;\r\n    description: string;\r\n    levels: number = 0;\r\n\r\n    updateWith(entity: *): SpellSchool {\r\n        return super.updateWith(entity);\r\n    }\r\n}\r\n\r\nRegisterEntity(SpellSchool, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n    CreateColumn('levels', FormFieldType.INTEGER),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('levels', FormFieldType.INTEGER),\r\n]);","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport ActionTime from \"../rule/ActionTime\";\r\nimport SpellSchool from \"./SpellSchool\";\r\nimport Item from \"../crafting/Item\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class Spell extends Entity {\r\n    static entityName: string = 'spell';\r\n\r\n    name: string;\r\n    description: string;\r\n    effect: string;\r\n    level: number;\r\n    manaCost: number;\r\n    range: number;\r\n    prepareTime: ActionTime = new ActionTime();\r\n    durationTime: ActionTime = new ActionTime();\r\n    spellSchool: SpellSchool;\r\n    ingredients: Item[] = [];\r\n\r\n\r\n    updateWith(entity: Spell): Spell {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'prepareTime', () => new ActionTime());\r\n        this.updateEntityProp(entity, 'durationTime', () => new ActionTime());\r\n        this.updateEntityProp(entity, 'spellSchool', () => new SpellSchool());\r\n        this.updateEntityList(entity, 'ingredients', () => new Item());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(Spell, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n    CreateColumn('level', FormFieldType.INTEGER),\r\n    CreateColumn('manaCost', FormFieldType.INTEGER),\r\n    CreateColumn('range', FormFieldType.INTEGER),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('effect', FormFieldType.TEXT_AREA),\r\n    CreateFormField('level', FormFieldType.INTEGER),\r\n    CreateFormField('manaCost', FormFieldType.INTEGER),\r\n    CreateFormField('range', FormFieldType.INTEGER),\r\n    CreateFormField('prepareTime', FormFieldType.ACTION_TIME),\r\n    CreateFormField('durationTime', FormFieldType.ACTION_TIME),\r\n    CreateFormField('spellSchool', FormFieldType.ENTITY_SELECT, SpellSchool.entityName),\r\n    CreateFormField('ingredients', FormFieldType.ENTITY_COMBOBOX, Item.entityName),\r\n]);","import Entity from \"../Entity\";\r\nimport SpellSchool from \"./SpellSchool\";\r\n\r\nexport default class SpellSchoolLevel extends Entity {\r\n    spellSchool: SpellSchool;\r\n    level: number = 0;\r\n\r\n\r\n    updateWith(entity: *): SpellSchoolLevel {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'spellSchool', () => new SpellSchool());\r\n        return this;\r\n    }\r\n}","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class Nation extends Entity {\r\n    static entityName: string = 'nation';\r\n\r\n    name: string;\r\n    description: string;\r\n    names: string[] = [];\r\n}\r\n\r\nconst convertToNames = (namesAsString: string) => {\r\n    return namesAsString.replace('\\r', '').split('\\n');\r\n};\r\nconst convertToField = (namesFromModel: string[]) => {\r\n    return namesFromModel.join(\"\\n\");\r\n};\r\n\r\nRegisterEntity(Nation, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA)\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('names', FormFieldType.TEXT_AREA, null, convertToField, convertToNames),\r\n]);\r\n","import {FormFieldType} from \"../../form/FormFieldType\";\r\nimport Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport Nation from \"./Nation\";\r\n\r\nexport default class Language extends Entity {\r\n  static entityName: string = 'worldLanguage';\r\n\r\n  name: string;\r\n  description: string;\r\n  nations: Nation[];\r\n\r\n  updateWith(entity: Language): Language {\r\n    super.updateWith(entity);\r\n    this.updateEntityList(entity, 'nations', () => new Nation());\r\n    return this;\r\n  }\r\n}\r\n\r\nRegisterEntity(Language,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('description', FormFieldType.TEXT_AREA),],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('description', FormFieldType.TEXT_AREA),\r\n                CreateFormField('nations', FormFieldType.ENTITY_COMBOBOX, Nation.entityName),]);","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport Nation from \"./Nation\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class Currency extends Entity {\r\n    static entityName: string = 'currency';\r\n\r\n    name: string;\r\n    description: string;\r\n    valueMultiplier: number;\r\n    nations: Nation[];\r\n\r\n    updateWith(entity: *): Currency {\r\n        super.updateWith(entity);\r\n        this.updateEntityList(entity, 'nations', () => new Nation());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(Currency, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n    CreateColumn('valueMultiplier', FormFieldType.FLOAT)\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('valueMultiplier', FormFieldType.FLOAT),\r\n    CreateFormField('nations', FormFieldType.ENTITY_COMBOBOX, Nation.entityName),\r\n]);","import Entity from \"../Entity\";\r\nimport Price from \"./Price\";\r\nimport {State} from \"../../state/State\";\r\nimport Currency from \"./Currency\";\r\n\r\nexport const entityName = 'money';\r\n\r\nexport default class Money extends Entity {\r\n    currency: Currency;\r\n    amount: Price = new Price();\r\n\r\n\r\n    updateWith(entity: Money): Money {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'currency', State.suppliers.currency);\r\n        this.updateEntityProp(entity, 'amount', State.suppliers.price);\r\n        return this;\r\n    }\r\n}\r\n\r\nState.suppliers[entityName] = () => new Money();\r\n","import DeterminantContainer from \"../rule/DeterminantContainer\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class Race extends DeterminantContainer {\r\n    static entityName: string = 'race';\r\n\r\n    name: string;\r\n    specialFeature: string;\r\n}\r\n\r\nRegisterEntity(Race, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('specialFeature', FormFieldType.TEXT_AREA),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('specialFeatures', FormFieldType.TEXT_AREA),\r\n    CreateFormField('determinants', FormFieldType.RACE_DETERMINANTS),\r\n]);","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport Nation from \"./Nation\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class Religion extends Entity {\r\n    static entityName: string = 'religion';\r\n\r\n    name: string;\r\n    nations: Nation[] = [];\r\n\r\n    updateWith(entity: Religion): Religion {\r\n        super.updateWith(entity);\r\n        this.updateEntityList(entity, 'nations', () => new Nation());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(Religion, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('nations', FormFieldType.ENTITY_COMBOBOX, Nation.entityName),\r\n]);","import {FormFieldType}                                 from \"../../form/FormFieldType\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport DeterminantContainer                            from \"../rule/DeterminantContainer\";\r\n\r\nexport default class AnimalKind extends DeterminantContainer {\r\n    static entityName: string = 'animalKind';\r\n\r\n    name: string;\r\n    description: string;\r\n};\r\n\r\nRegisterEntity(AnimalKind,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('description', FormFieldType.TEXT_AREA),],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('description', FormFieldType.TEXT_AREA),\r\n                CreateFormField('determinants', FormFieldType.DETERMINANT),]);\r\n","import {FormFieldType}                                 from \"../../form/FormFieldType\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport DeterminantContainer                            from \"../rule/DeterminantContainer\";\r\nimport AnimalKind                                      from \"./AnimalKind\";\r\n\r\nexport default class Animal extends DeterminantContainer {\r\n  static entityName: string = 'animal';\r\n\r\n  name: string;\r\n  description: string;\r\n  animalKind: AnimalKind;\r\n\r\n  updateWith(entity: Animal): Animal {\r\n    super.updateWith(entity);\r\n    this.updateEntityProp(entity, 'animalKind', () => new AnimalKind());\r\n    return this;\r\n  }\r\n}\r\n\r\nRegisterEntity(Animal,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('description', FormFieldType.TEXT_AREA),\r\n                CreateColumn('animalKind', FormFieldType.ENTITY_SELECT)],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('description', FormFieldType.TEXT_AREA),\r\n                CreateFormField('animalKind', FormFieldType.ENTITY_SELECT, AnimalKind.entityName),\r\n                CreateFormField('determinants', FormFieldType.DETERMINANT),]);\r\n","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class Character extends Entity {\r\n    static entityName: string = 'character';\r\n\r\n    name: string;\r\n    description: string;\r\n}\r\n\r\nRegisterEntity(Character, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n]);\r\n","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class EyeColor extends Entity {\r\n    static entityName: string = 'eyeColor';\r\n\r\n    name: string;\r\n    description: string;\r\n}\r\n\r\nRegisterEntity(EyeColor, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n]);\r\n","import Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\n\r\nexport default class HairColor extends Entity {\r\n    static entityName: string = 'hairColor';\r\n\r\n    name: string;\r\n    description: string;\r\n}\r\n\r\nRegisterEntity(HairColor, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n]);\r\n","import DeterminantContainer from \"../rule/DeterminantContainer\";\r\nimport Price from \"../world/Price\";\r\nimport Modifier from \"../rule/Modifier\";\r\nimport ActionTime from \"../rule/ActionTime\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\nimport {Placement, placementWeaponName} from \"./Placement\";\r\n\r\nexport default class RangedWeaponBlueprint extends DeterminantContainer {\r\n    static entityName: string = 'rangedWeaponBlueprint';\r\n\r\n    name: string;\r\n    description: string;\r\n    suggestedPrice: Price = new Price();\r\n    suggestedWeight: number;\r\n    damage: Modifier = new Modifier();\r\n    prepareTime: ActionTime = new ActionTime();\r\n    placement: string[] = [Placement.HAND];\r\n    minimumRange: number = 0;\r\n    mediumRange: number = 0;\r\n    maximumRange: number = 0;\r\n\r\n    updateWith(entity: RangedWeaponBlueprint): RangedWeaponBlueprint {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'suggestedPrice', () => new Price());\r\n        this.updateEntityProp(entity, 'damage', () => new Modifier());\r\n        this.updateEntityProp(entity, 'prepareTime', () => new ActionTime());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(RangedWeaponBlueprint, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n    CreateColumn('damage', FormFieldType.MODIFIER),\r\n    CreateColumn('minimumRange', FormFieldType.INTEGER),\r\n    CreateColumn('mediumRange', FormFieldType.INTEGER),\r\n    CreateColumn('maximumRange', FormFieldType.INTEGER),\r\n    CreateColumn('prepareTime', FormFieldType.ACTION_TIME),\r\n    CreateColumn('suggestedPrice', FormFieldType.PRICE),\r\n    CreateColumn('suggestedWeight', FormFieldType.FLOAT),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('suggestedPrice', FormFieldType.PRICE),\r\n    CreateFormField('suggestedWeight', FormFieldType.INTEGER),\r\n    CreateFormField('damage', FormFieldType.MODIFIER),\r\n    CreateFormField('prepareTime', FormFieldType.ACTION_TIME),\r\n    CreateFormField('placement', FormFieldType.ENUM_COMBOBOX, placementWeaponName),\r\n    CreateFormField('minimumRange', FormFieldType.INTEGER),\r\n    CreateFormField('mediumRange', FormFieldType.INTEGER),\r\n    CreateFormField('maximumRange', FormFieldType.INTEGER),\r\n    CreateFormField('determinants', FormFieldType.DETERMINANT),\r\n]);","import {FormFieldType}                                 from \"../../form/FormFieldType\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport DeterminantContainer                            from \"../rule/DeterminantContainer\";\r\nimport Price                                           from \"../world/Price\";\r\nimport {availabilityEntityName}                        from \"./Availability\";\r\nimport RangedWeaponBlueprint                           from \"./RangedWeaponBlueprint\";\r\nimport Resource                                        from \"./Resource\";\r\n\r\nexport default class Ammunition extends DeterminantContainer {\r\n    static entityName: string = 'ammunition';\r\n\r\n    name: string;\r\n    description: string;\r\n    weight: number;\r\n    price: Price = new Price();\r\n    availability: string = 'COMMON';\r\n    primaryResource: Resource;\r\n    secondaryResource: Resource;\r\n    weaponTypes: RangedWeaponBlueprint[] = [];\r\n\r\n    updateWith(entity: Ammunition): Ammunition {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'price', () => new Price());\r\n        this.updateEntityProp(entity, 'primaryResource', () => new Resource());\r\n        this.updateEntityProp(entity, 'secondaryResource', () => new Resource());\r\n        this.updateEntityList(entity, 'weaponTypes', () => new RangedWeaponBlueprint());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(Ammunition,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('description', FormFieldType.TEXT_AREA),\r\n                CreateColumn('price', FormFieldType.PRICE),\r\n                CreateColumn('type', FormFieldType.ENTITY_SELECT),\r\n                CreateColumn('availability', FormFieldType.TEXT),\r\n               ],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('description', FormFieldType.TEXT_AREA),\r\n                CreateFormField('weight', FormFieldType.FLOAT),\r\n                CreateFormField('price', FormFieldType.PRICE),\r\n                CreateFormField('availability', FormFieldType.ENUM_SELECT, availabilityEntityName),\r\n                CreateFormField('primaryResource', FormFieldType.ENTITY_SELECT, Resource.entityName),\r\n                CreateFormField('secondaryResource', FormFieldType.ENTITY_SELECT, Resource.entityName),\r\n                CreateFormField('weaponTypes', FormFieldType.ENTITY_COMBOBOX, RangedWeaponBlueprint.entityName),\r\n                CreateFormField('determinants', FormFieldType.DETERMINANT),]);\r\n","import {FormFieldType}                                 from \"../../form/FormFieldType\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport DeterminantContainer                            from \"../rule/DeterminantContainer\";\r\nimport Price                                           from \"../world/Price\";\r\nimport {availabilityEntityName}                        from \"./Availability\";\r\nimport RangedWeaponBlueprint                           from \"./RangedWeaponBlueprint\";\r\nimport Resource                                        from \"./Resource\";\r\n\r\nexport default class RangedWeapon extends DeterminantContainer {\r\n    static entityName: string = 'rangedWeapon';\r\n\r\n    name: string;\r\n    description: string;\r\n    weight: number;\r\n    price: Price = new Price();\r\n    availability: string = 'COMMON';\r\n    primaryResource: Resource;\r\n    secondaryResource: Resource;\r\n    type: RangedWeaponBlueprint;\r\n\r\n    updateWith(entity: RangedWeapon): RangedWeapon {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'price', () => new Price());\r\n        this.updateEntityProp(entity, 'primaryResource', () => new Resource());\r\n        this.updateEntityProp(entity, 'secondaryResource', () => new Resource());\r\n        this.updateEntityProp(entity, 'type', () => new RangedWeaponBlueprint());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(RangedWeapon,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('description', FormFieldType.TEXT_AREA),\r\n                CreateColumn('price', FormFieldType.PRICE),\r\n                CreateColumn('type', FormFieldType.ENTITY_SELECT),],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('description', FormFieldType.TEXT_AREA),\r\n                CreateFormField('weight', FormFieldType.FLOAT),\r\n                CreateFormField('price', FormFieldType.PRICE),\r\n                CreateFormField('availability', FormFieldType.ENUM_SELECT, availabilityEntityName),\r\n                CreateFormField('primaryResource',\r\n                                FormFieldType.ENTITY_SELECT,\r\n                                Resource.entityName),\r\n                CreateFormField('secondaryResource',\r\n                                FormFieldType.ENTITY_SELECT,\r\n                                Resource.entityName),\r\n                CreateFormField('type',\r\n                                FormFieldType.BLUEPRINT_SELECT,\r\n                                RangedWeaponBlueprint.entityName),\r\n                CreateFormField('determinants', FormFieldType.DETERMINANT),]);\r\n","import Ammunition   from \"../crafting/Ammunition\";\r\nimport RangedWeapon from \"../crafting/RangedWeapon\";\r\nimport Entity       from \"../Entity\";\r\n\r\nexport default class PersonalRangedWeapon extends Entity {\r\n    rangedWeapon: RangedWeapon;\r\n    ammunition: Ammunition;\r\n    ammunitionAmount: number = 0;\r\n\r\n\r\n    updateWith(entity: PersonalRangedWeapon): PersonalRangedWeapon {\r\n        super.updateWith(entity);\r\n        super.updateEntityProp(entity, 'rangedWeapon', () => new RangedWeapon());\r\n        super.updateEntityProp(entity, 'ammunition', () => new Ammunition());\r\n        return this;\r\n    }\r\n}","import DeterminantContainer                            from \"../rule/DeterminantContainer\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType}                                 from \"../../form/FormFieldType\";\r\n\r\nexport default class PhysicalFeature extends DeterminantContainer {\r\n    static entityName: string = 'physicalFeature';\r\n\r\n    name: string;\r\n    description: string;\r\n}\r\n\r\nRegisterEntity(PhysicalFeature,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('description', FormFieldType.TEXT_AREA),],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('description', FormFieldType.TEXT_AREA),\r\n                CreateFormField('determinants', FormFieldType.DETERMINANT),]);\r\n","import {FormFieldType}                        from \"../../form/FormFieldType\";\r\nimport Armor                                  from \"../crafting/Armor\";\r\nimport Inventory                              from \"../crafting/Inventory\";\r\nimport MeleeWeapon                                             from \"../crafting/MeleeWeapon\";\r\nimport Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport Skill                                                   from \"../knowledge/Skill\";\r\nimport Spell                                  from \"../knowledge/Spell\";\r\nimport SpellSchoolLevel                       from \"../knowledge/SpellSchoolLevel\";\r\nimport Profession                             from \"../professions/Profession\";\r\nimport ProfessionClass                        from \"../professions/ProfessionClass\";\r\nimport Language                               from \"../world/Language\";\r\nimport Money                                  from \"../world/Money\";\r\nimport Nation                                 from \"../world/Nation\";\r\nimport Race                                   from \"../world/Race\";\r\nimport Religion                               from \"../world/Religion\";\r\nimport Animal                                 from \"./Animal\";\r\nimport Character                              from \"./Character\";\r\nimport CreatureDeterminants                   from \"./CreatureDeterminants\";\r\nimport EyeColor                               from \"./EyeColor\";\r\nimport HairColor                              from \"./HairColor\";\r\nimport PersonalRangedWeapon                   from \"./PersonalRangedWeapon\";\r\nimport PhysicalFeature                        from \"./PhysicalFeature\";\r\n\r\nexport default class Person extends Entity {\r\n  static entityName: string = 'person';\r\n\r\n  name: string;\r\n  gender: string;\r\n  age: number;\r\n  height: number;\r\n  weight: number;\r\n  fatePoints: number;\r\n  mana: number;\r\n  currentMana: number;\r\n  sanityPoints: number;\r\n  totalExperience: number;\r\n  experience: number;\r\n  birthplace: string;\r\n  parents: string;\r\n  family: string;\r\n  health: string;\r\n  nation: Nation;\r\n  religion: Religion;\r\n  hairColor: HairColor;\r\n  eyeColor: EyeColor;\r\n  physicalFeatures: PhysicalFeature[] = [];\r\n  race: Race;\r\n  personality: Character;\r\n  description: string;\r\n  history: string;\r\n  determinants: CreatureDeterminants = new CreatureDeterminants();\r\n  professionClass: ProfessionClass;\r\n  currentProfession: Profession;\r\n  professions: Profession[] = [];\r\n  skills: Skill[] = [];\r\n  inventory: Inventory[] = [];\r\n  meleeWeapons: MeleeWeapon[] = [];\r\n  rangedWeapons: PersonalRangedWeapon[] = [];\r\n  armor: Armor[] = [];\r\n  spellSchools: SpellSchoolLevel[] = [];\r\n  spells: Spell[] = [];\r\n  animals: Animal[] = [];\r\n  money: Money[] = [];\r\n  languages: Language[] = [];\r\n\r\n  updateWith(entity: *): Person {\r\n    this.updateProp(entity, 'id');\r\n    this.updateProp(entity, 'uuid');\r\n    this.updateProp(entity, 'name');\r\n    this.updateProp(entity, 'gender');\r\n    this.updateNumProp(entity, 'age');\r\n    this.updateNumProp(entity, 'height');\r\n    this.updateNumProp(entity, 'weight');\r\n    this.updateNumProp(entity, 'fatePoints');\r\n    this.updateNumProp(entity, 'mana');\r\n    this.updateNumProp(entity, 'currentMana');\r\n    this.updateNumProp(entity, 'sanityPoints');\r\n    this.updateNumProp(entity, 'totalExperience');\r\n    this.updateNumProp(entity, 'experience');\r\n    this.updateProp(entity, 'birthplace');\r\n    this.updateProp(entity, 'parents');\r\n    this.updateProp(entity, 'family');\r\n    this.updateProp(entity, 'health');\r\n\r\n    this.updateEntityProp(entity, 'nation', () => new Nation());\r\n    this.updateEntityProp(entity, 'religion', () => new Religion());\r\n    this.updateEntityProp(entity, 'hairColor', () => new HairColor());\r\n    this.updateEntityProp(entity, 'eyeColor', () => new EyeColor());\r\n    this.updateEntityProp(entity, 'race', () => new Race());\r\n    this.updateEntityProp(entity, 'personality', () => new Character());\r\n    this.updateEntityProp(entity, 'determinants', () => new CreatureDeterminants());\r\n    this.updateEntityProp(entity, 'professionClass', () => new ProfessionClass());\r\n    this.updateEntityProp(entity, 'currentProfession', () => new Profession());\r\n\r\n    this.updateEntityList(entity, 'physicalFeatures', () => new PhysicalFeature());\r\n    this.updateEntityList(entity, 'professions', () => new Profession());\r\n    this.updateEntityList(entity, 'skills', () => new Skill());\r\n    this.updateEntityList(entity, 'inventory', () => new Inventory());\r\n    this.updateEntityList(entity, 'meleeWeapons', () => new MeleeWeapon());\r\n    this.updateEntityList(entity, 'rangedWeapons', () => new PersonalRangedWeapon());\r\n    this.updateEntityList(entity, 'armor', () => new Armor());\r\n    this.updateEntityList(entity, 'spellSchools', () => new SpellSchoolLevel());\r\n    this.updateEntityList(entity, 'spells', () => new Spell());\r\n    this.updateEntityList(entity, 'animals', () => new Animal());\r\n    this.updateEntityList(entity, 'money', () => new Money());\r\n    this.updateEntityList(entity, 'languages', () => new Language());\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\nRegisterEntity(Person,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('race', FormFieldType.ENTITY_SELECT),\r\n                CreateColumn('nation', FormFieldType.ENTITY_SELECT),\r\n                CreateColumn('currentProfession', FormFieldType.ENTITY_SELECT),\r\n                CreateColumn('totalExperience', FormFieldType.TEXT),],\r\n               [CreateFormField('person', FormFieldType.CHARACTER_SHEET)]);","import CreatureDeterminants from \"../model/creature/CreatureDeterminants\";\r\nimport Person from \"../model/creature/Person\";\r\nimport Profession from \"../model/professions/Profession\";\r\nimport Determinant from \"../model/rule/Determinant\";\r\nimport Modifier, {ModifierType} from \"../model/rule/Modifier\";\r\nimport Race from \"../model/world/Race\";\r\nimport {State} from \"../state/State\";\r\nimport RemoteService from \"./RemoteService\";\r\n\r\nexport default class DeterminantService extends RemoteService {\r\n  addExperienceExtension(determinant: Determinant, onAdded: VoidFunction) {\r\n    this.requestFor(determinant,\r\n                    'determinant/addExperienceExtension',\r\n                    data => DeterminantService.afterResponse(data, onAdded));\r\n  }\r\n\r\n  removeExperienceExtension(determinant: Determinant, onRemoved) {\r\n    this.requestFor(determinant,\r\n                    'determinant/removeExperienceExtension',\r\n                    data => DeterminantService.afterResponse(data, onRemoved));\r\n  }\r\n\r\n  static afterResponse(data, afterUpdate) {\r\n    const newDeterminant = new Determinant();\r\n    newDeterminant.updateWith(data);\r\n    afterUpdate(newDeterminant);\r\n  }\r\n\r\n  static findDeterminantIn(determinants: Determinant[], type: string) {\r\n    return determinants.find(determinant => type === determinant.type)\r\n  }\r\n\r\n  static removeModifiersByType(modifiers: Modifier[], type: string): Modifier[] {\r\n    let mod = DeterminantService.findModifierByType(modifiers, type);\r\n    while (mod) {\r\n      modifiers.splice(modifiers.indexOf(mod), 1);\r\n      mod = DeterminantService.findModifierByType(modifiers, type);\r\n    }\r\n    return modifiers;\r\n  }\r\n\r\n  static findModifierByType(modifiers: Modifier[], type: string): Modifier {\r\n    return modifiers.find(value => value.type === type);\r\n  }\r\n\r\n  static sumValueByTypeIn(determinants: Determinant[], type: string): number {\r\n    return determinants.filter(det => type === det.type)\r\n                       .reduce((a, b) => a + b.calculateFinalValue(), 0)\r\n  }\r\n\r\n  static updateProfessionExtensions(profession: Profession,\r\n      creatureDeterminants: CreatureDeterminants) {\r\n    creatureDeterminants.determinants = creatureDeterminants.determinants.map(det => {\r\n      DeterminantService.setProfessionExtensions(profession, det);\r\n      return det;\r\n    })\r\n  }\r\n\r\n  static setProfessionExtensions(profession: Profession, determinant: Determinant) {\r\n    const professionExtensions = DeterminantService.findDeterminantIn(profession.determinants,\r\n                                                                      determinant.type);\r\n    if (professionExtensions) {\r\n      determinant.modifiers =\r\n          DeterminantService.removeModifiersByType(determinant.modifiers, ModifierType.PROFESSION);\r\n      professionExtensions.modifiers.forEach(mod => {\r\n        const newMod = new Modifier();\r\n        newMod.type  = mod.type;\r\n        newMod.value = mod.value;\r\n        determinant.modifiers.push(newMod);\r\n      });\r\n    }\r\n  }\r\n\r\n  rollForRace(race: Race) {\r\n    const creature = State.data.entity;\r\n    console.assert(creature.type === Person);\r\n    const currentDeterminant: CreatureDeterminants = creature.determinants;\r\n\r\n    this.requestForPath('determinant/generateDeterminants/' + creature.race.id,\r\n                        (resolved: CreatureDeterminants) => {\r\n                          resolved.determinants.forEach(newValue => {\r\n                            currentDeterminant.updateDeterminantValue(newValue.value, newValue.type)\r\n                          });\r\n                          State.updateEntity({determinants: currentDeterminant});\r\n                        });\r\n  }\r\n}","import {func} from \"prop-types\";\r\nimport RangedWeapon from \"../model/crafting/RangedWeapon\";\r\nimport PersonalRangedWeapon from \"../model/creature/PersonalRangedWeapon\";\r\nimport {State} from \"../state/State\";\r\nimport RemoteService from \"./RemoteService\";\r\n\r\nexport default class GearService extends RemoteService {\r\n    calculateMeleeDamage(weaponId: number, onResponse: func) {\r\n        this.rawGetRequestFor(`gear/getMeleeWeaponDamage/${weaponId}`, onResponse);\r\n    }\r\n\r\n    calculateArmorValue(armorId: number, onResponse: func) {\r\n        this.rawGetRequestFor(`gear/getArmorValue/${armorId}`, onResponse);\r\n    }\r\n\r\n    calculatePersonArmorValue(armorIds: number[], onResponse: func) {\r\n        this.requestFor(armorIds, 'gear/getArmorValuesForGear', onResponse)\r\n    }\r\n\r\n    static addPersonalRangedWeapon(rangedWeapon: RangedWeapon) {\r\n        const pWeps = State.data.entity.rangedWeapons;\r\n        const newPWep = new PersonalRangedWeapon();\r\n        newPWep.rangedWeapon = rangedWeapon;\r\n        pWeps.push(newPWep);\r\n        State.updateEntity({rangedWeapons: pWeps});\r\n    }\r\n}","import {FormFieldType} from \"../../form/FormFieldType\";\r\nimport Person from \"../creature/Person\";\r\nimport Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport SpellSchool from \"../knowledge/SpellSchool\";\r\nimport Nation from \"../world/Nation\";\r\nimport Race from \"../world/Race\";\r\n\r\nexport default class Realm extends Entity {\r\n  static entityName: string = 'realm';\r\n\r\n  name: string;\r\n  nations: Nation[]           = [];\r\n  spellSchools: SpellSchool[] = [];\r\n  persons: Person[]           = [];\r\n\r\n  updateWith(entity: Realm): Realm {\r\n    super.updateWith(entity);\r\n    this.updateEntityList(entity, 'nations', () => new Nation());\r\n    this.updateEntityList(entity, 'races', () => new Race());\r\n    this.updateEntityList(entity, 'spellSchools', () => new SpellSchool());\r\n    this.updateEntityList(entity, 'persons', () => new Person());\r\n    return this;\r\n  }\r\n}\r\n\r\nRegisterEntity(Realm,\r\n               [CreateColumn('name', FormFieldType.TEXT),],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('nations', FormFieldType.ENTITY_COMBOBOX, Nation.entityName),\r\n                CreateFormField('spellSchools',\r\n                                FormFieldType.ENTITY_COMBOBOX,\r\n                                SpellSchool.entityName),\r\n                CreateFormField('persons', FormFieldType.ENTITY_COMBOBOX, Person.entityName),]);","import Realm from \"../realm/Realm\";\r\nimport SpellSchoolLevel from \"./SpellSchoolLevel\";\r\nimport Skill from \"./Skill\";\r\n\r\nexport default class CurrentMagicKnowledge {\r\n    currentSpellSchools: SpellSchoolLevel[] = [];\r\n    currentSkills: Skill[] = [];\r\n    realm: Realm;\r\n}","import Entity from \"../model/Entity\";\r\n\r\nexport const Collections = {\r\n  except: (from: Array<Entity>, except: Array<Entity>) => {\r\n    return from.filter(a => !except.find(b => a.name === b.name));\r\n  },\r\n\r\n  removeElement: (from: Array<any>, element: any): Array<any> => {\r\n    const indexOf = from.indexOf(element);\r\n    if (indexOf >= 0) {\r\n      from.splice(indexOf, 1);\r\n    }\r\n    return from;\r\n  },\r\n\r\n  addEntityIfNew: (element: any, to: Array<any>): Array<any> => {\r\n    if (!to.find(value => value.id === element.id)) {\r\n      to.push(element);\r\n    }\r\n    return to;\r\n  },\r\n\r\n  findByName: (array: Array, element: object) => {\r\n    return array.find(value => value.name === element.name);\r\n  },\r\n};\r\n\r\nexport function findEntity(array: Array<Entity>, element: Entity): Entity {\r\n  return findIn(array, element, ['name']);\r\n}\r\n\r\nexport function findIn<T>(array: Array<T>,\r\n                          element: T,\r\n                          toMatchPath: string[] = [],\r\n                          elementsPath = toMatchPath): T {\r\n  let toMatch = element;\r\n  toMatchPath.forEach(prop => toMatch = toMatch[prop]);\r\n\r\n  return array.find(t => {\r\n    let value = t;\r\n    elementsPath.forEach(prop => value = value[prop]);\r\n    return value === toMatch;\r\n  });\r\n}\r\n\r\nexport function removeFrom<T>(array: Array<T>, element: T): Array<T> {\r\n  const indexOf = array.indexOf(element);\r\n  if (indexOf >= 0) {\r\n    array.splice(indexOf, 1);\r\n  }\r\n  return array;\r\n}\r\n","import CurrentMagicKnowledge from \"../model/knowledge/CurrentMagicKnowledge\";\r\nimport {State} from \"../state/State\";\r\nimport {findEntity, findIn} from \"../util/Collections\";\r\nimport RemoteService from \"./RemoteService\";\r\n\r\nexport default class MagicService extends RemoteService {\r\n  getAvailableSpellSchools(currentMagicKnowledge: CurrentMagicKnowledge, onResponse: VoidFunction) {\r\n    this.requestFor(currentMagicKnowledge, 'magic/getAvailableSpellSchools', onResponse);\r\n  }\r\n\r\n  static getRelevantSpells() {\r\n    const {spells, spellSchools} = State.data.entity;\r\n    const availableSpells        = State.data.spell;\r\n    return availableSpells.filter(spell => !findEntity(spells, spell))\r\n                          .filter(spell => {\r\n                            const spellSchool = findIn(spellSchools,\r\n                                                       spell,\r\n                                                       ['spellSchool', 'name']);\r\n                            return spellSchool && spellSchool.level >= spell.level;\r\n                          })\r\n  }\r\n}\r\n","import {State} from \"../../state/State\";\r\n\r\nexport const Gender = {\r\n    MALE: 'MALE',\r\n    FEMALE: 'FEMALE',\r\n\r\n    allOf() {\r\n        return [this.MALE, this.FEMALE];\r\n    },\r\n};\r\n\r\nexport const GenderEntityName = 'gender';\r\nState.data[GenderEntityName] = Gender.allOf();","import Inventory from \"../model/crafting/Inventory\";\r\nimport Item from \"../model/crafting/Item\";\r\nimport PersonalRangedWeapon from \"../model/creature/PersonalRangedWeapon\";\r\nimport {State} from \"../state/State\";\r\nimport {findIn, removeFrom} from \"../util/Collections\";\r\n\r\nexport default class ItemService {\r\n  static addItemToInventory(item: Item) {\r\n    let inventory = State.data.entity.inventory;\r\n    if (!findIn(inventory, item, ['name'], ['item', 'name'])) {\r\n      const incomingInventory  = new Inventory();\r\n      incomingInventory.item   = item;\r\n      incomingInventory.amount = 0;\r\n      inventory.push(incomingInventory);\r\n      State.updateEntity({inventory: inventory});\r\n    }\r\n  }\r\n\r\n  static inventoryWeight(): number {\r\n    const miscItemsWeight = State.data.entity.inventory\r\n                      .map(value => value.item.weight * value.amount)\r\n                      .reduce((a, b) => a + b, 0);\r\n    const weaponsWeight = State.data.entity.meleeWeapons\r\n                               .map(value => value.weight)\r\n                               .reduce((a, b) => a + b, 0);\r\n    const rangedWeight = State.data.entity.rangedWeapons\r\n                               .map(p => ItemService.calculateRangedWeaponWeight(p))\r\n                               .reduce((a, b) => a + b, 0);\r\n    const armorWeight = State.data.entity.armor\r\n                               .map(value => value.weight)\r\n                               .reduce((a, b) => a + b, 0);\r\n\r\n    return (miscItemsWeight + weaponsWeight + rangedWeight + armorWeight).toFixed(2);\r\n  }\r\n\r\n  static calculateRangedWeaponWeight(p: PersonalRangedWeapon) {\r\n    let weight = 0;\r\n    if (p.rangedWeapon) {\r\n      weight += p.rangedWeapon.weight;\r\n    }\r\n    if (p.ammunition) {\r\n      weight += p.ammunition.weight * p.ammunitionAmount;\r\n    }\r\n    return weight;\r\n  }\r\n}","import Currency from \"../model/world/Currency\";\r\nimport Money from \"../model/world/Money\";\r\nimport {State} from \"../state/State\";\r\n\r\nexport default class MoneyService {\r\n  static addMoney(currency: Currency) {\r\n    const newMoney = new Money();\r\n    newMoney.currency = currency;\r\n\r\n    State.data.entity.money.push(newMoney);\r\n    State.updateEntity({money: State.data.entity.money})\r\n  }\r\n}","import DeterminantService from \"../client/DeterminantService\";\r\nimport Profession from \"../model/professions/Profession\";\r\nimport {State} from \"../state/State\";\r\nimport {Collections} from \"../util/Collections\";\r\n\r\nexport default class ProfessionService {\r\n  static getProfessions() {\r\n    const currentClass = State.data.entity.professionClass;\r\n    const data         = State.data[Profession.entityName];\r\n    if (currentClass) {\r\n      return data.filter(prof => prof.professionClass && (prof.professionClass.id\r\n                                                          === currentClass.id));\r\n    } else {\r\n      return State.data[Profession.entityName];\r\n    }\r\n  }\r\n\r\n  static updateProfession(profession: Profession) {\r\n    const {professions, determinants} = State.data.entity;\r\n    const newDeterminants = DeterminantService.updateProfessionExtensions(profession, determinants);\r\n    Collections.addEntityIfNew(profession, professions);\r\n    State.updateEntity({currentProfession: profession, professions: professions,\r\n                         determinants: newDeterminants});\r\n  }\r\n\r\n  static removeProfessionFromHistory(profession: Profession) {\r\n    const {professions, currentProfession} = State.data.entity;\r\n    Collections.removeElement(professions, profession);\r\n    if (currentProfession && profession.id === currentProfession.id) {\r\n      State.data.entity.currentProfession = null;\r\n    }\r\n    State.updateEntity({professions: professions});\r\n  }\r\n\r\n  static nextProfessions() {\r\n    const {currentProfession} = State.data.entity;\r\n    if (currentProfession && currentProfession.nextProfessions) {\r\n      return currentProfession.nextProfessions;\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n}","// @flow\r\nimport React, {Component} from 'react';\r\nimport {State} from \"../../../state/State\";\r\nimport {removeFrom} from \"../../../util/Collections\";\r\n\r\nexport default class AnimalElement extends Component {\r\n  render() {\r\n    const {animal, ...other} = this.props;\r\n\r\n    return (<div {...other} onContextMenu={event => {\r\n      event.preventDefault();\r\n      State.updateEntity({animals: removeFrom(State.data.entity.animals, animal)})\r\n    }}>\r\n      <div>{animal.name}</div>\r\n    </div>);\r\n  };\r\n};\r\n","import {Placement} from \"../crafting/Placement\";\r\n\r\nexport default class CreatureArmorValues {\r\n    armorValues: Map<string, number>;\r\n\r\n\r\n    constructor() {\r\n        this.armorValues = new Map();\r\n        Placement.allOf().forEach(placement => {\r\n            this.armorValues.set(placement, 0);\r\n        })\r\n    }\r\n\r\n    getArmorValue(placement: string): number {\r\n        return this.armorValues.get(placement);\r\n    }\r\n\r\n    updateWith(values: CreatureArmorValues) {\r\n        this.armorValues = new Map();\r\n        Placement.allOf().map(placement => this.armorValues.set(placement, values[placement]));\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport GearService from \"../../../client/GearService\";\r\nimport {Placement} from \"../../../model/crafting/Placement\";\r\nimport CreatureArmorValues from \"../../../model/creature/CreatureArmorValues\";\r\nimport {State} from \"../../../state/State\";\r\n\r\nconst defaultComponentStyle = {\r\n    position: 'absolute',\r\n    width: 20,\r\n    textAlign: 'center',\r\n};\r\nconst defaultStyle = {\r\n    container: {\r\n        position: 'relative',\r\n    },\r\n    shield: {\r\n        ...defaultComponentStyle,\r\n        left: 130,\r\n        top: 85,\r\n    },\r\n    head: {\r\n        ...defaultComponentStyle,\r\n        left: 15,\r\n        top: 100,\r\n    },\r\n    rightHand: {\r\n        ...defaultComponentStyle,\r\n        left: 15,\r\n        top: 170,\r\n    },\r\n    leftHand: {\r\n        ...defaultComponentStyle,\r\n        left: 155,\r\n        top: 162,\r\n    },\r\n    torso: {\r\n        ...defaultComponentStyle,\r\n        left: 155,\r\n        top: 230,\r\n    },\r\n    rightLeg: {\r\n        ...defaultComponentStyle,\r\n        left: 15,\r\n        top: 295,\r\n    },\r\n    leftLeg: {\r\n        ...defaultComponentStyle,\r\n        left: 155,\r\n        top: 295,\r\n    },\r\n};\r\n\r\nconst gearService = new GearService();\r\n\r\nclass ArmorCalculationsComponent extends Component {\r\n    state = {\r\n        armorValues: new CreatureArmorValues(),\r\n    };\r\n\r\n    updateArmorValues = () => {\r\n        gearService.calculatePersonArmorValue(\r\n            State.data.entity.armor.map(armor => armor.id),\r\n            data => {\r\n                const armorCalcs = new CreatureArmorValues();\r\n                armorCalcs.updateWith(data);\r\n                this.setState({armorValues: armorCalcs, armor: State.data.entity.armor});\r\n            }\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const {classes, className, ...other} = this.props;\r\n        if (State.data.entity.armor !== this.state.armor) {\r\n            this.updateArmorValues();\r\n        }\r\n        return <div className={`${classes.container} ${className}`} {...other}>\r\n            <p className={classes.shield}>{this.state.armorValues.getArmorValue(Placement.SHIELD)}</p>\r\n            <p className={classes.head}>{this.state.armorValues.getArmorValue(Placement.HEAD)}</p>\r\n            <p className={classes.rightHand}>{this.state.armorValues.getArmorValue(Placement.HAND)}</p>\r\n            <p className={classes.leftHand}>{this.state.armorValues.getArmorValue(Placement.HAND)}</p>\r\n            <p className={classes.torso}>{this.state.armorValues.getArmorValue(Placement.TORSO)}</p>\r\n            <p className={classes.rightLeg}>{this.state.armorValues.getArmorValue(Placement.LEG)}</p>\r\n            <p className={classes.leftLeg}>{this.state.armorValues.getArmorValue(Placement.LEG)}</p>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withStyles(defaultStyle)(ArmorCalculationsComponent)","import React, {Component} from \"react\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport {State} from \"../../../state/State\";\r\nimport {Collections} from \"../../../util/Collections\";\r\n\r\nconst containerStyle = {display: 'flex', flexDirection: 'row'};\r\n\r\nclass ArmorElement extends Component {\r\n  updateEntity = armor => event => {\r\n      event.preventDefault();\r\n      State.updateEntity({armor: Collections.removeElement(State.data.entity.armor, armor)});\r\n  };\r\n\r\n  render() {\r\n    const {t, armor, disabled} = this.props;\r\n\r\n    let content = [<div style={{width: 150}}>{armor.name}</div>,\r\n                   <div style={{width: 210}}>{t(armor.type.placement)}</div>,\r\n                   <div style={{width: 50}}>{armor.weight}</div>];\r\n\r\n      return disabled ?\r\n        <div style={containerStyle}>{content}</div> :\r\n        <div style={containerStyle} onContextMenu={this.updateEntity(armor)}>{content}</div>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(ArmorElement);","import withStyles             from \"@material-ui/core/styles/withStyles\";\r\nimport React, {PureComponent} from \"react\";\r\nimport {State}                from \"../../../state/State\";\r\n\r\nconst defaultClass = {\r\n  input: {\r\n    backgroundColor: 'transparent',\r\n    border: 0,\r\n    width: '100%',\r\n    fontFamily: 'wfrp',\r\n    fontSize: '24px',\r\n    textAlign: 'center',\r\n    outline: 'none',\r\n  },\r\n};\r\n\r\nclass SimpleTextField extends PureComponent {\r\n  parse = onChange => event => {\r\n    const {name, variant} = this.props;\r\n    const change = event.target.value;\r\n\r\n    if (change === '') {\r\n      onChange(change);\r\n      return;\r\n    }\r\n\r\n    if (variant === TextFieldType.INT) {\r\n      const value = parseInt(change);\r\n      if (value || value === 0) {\r\n        onChange(value);\r\n      } else {\r\n        event.target.value = State.data.entity[name] || '';\r\n      }\r\n\r\n    } else if (variant === TextFieldType.FLOAT) {\r\n      const value = parseFloat(change);\r\n      if (value || value === 0) {\r\n        onChange(value);\r\n      } else {\r\n        event.target.value = State.data.entity[name] || '';\r\n      }\r\n\r\n    } else {\r\n      onChange(change);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n            name,\r\n            value = State.data.entity[name],\r\n            classes,\r\n            customStyle,\r\n            onChange = val => State.updateEntity({[name]: val}),\r\n            multiline\r\n    } = this.props;\r\n\r\n    return multiline ?\r\n        <textarea className={classes.input} style={customStyle} value={value} onChange={this.parse(onChange)}/> :\r\n        <input className={classes.input} style={customStyle} value={value} onChange={this.parse(onChange)}/>;\r\n  }\r\n}\r\n\r\nexport default withStyles(defaultClass)(SimpleTextField);\r\n\r\nexport const TextFieldType = {\r\n  TEXT: 'TEXT', INT: 'INT', FLOAT: 'FLOAT',\r\n};","// @flow\r\nimport React, {Component} from 'react';\r\nimport SimpleTextField, {TextFieldType} from \"../../../form/sheet/field/SimpleTextField\";\r\nimport {State} from \"../../../state/State\";\r\nimport {removeFrom} from \"../../../util/Collections\";\r\n\r\nclass ItemElement extends Component {\r\n  updateAmount = amount => {\r\n    this.props.inventory.amount = amount;\r\n    State.updateEntity({inventory: State.data.entity.inventory});\r\n  };\r\n\r\n  static calculateWeight = inventory => {\r\n    return (inventory.amount * inventory.item.weight).toFixed(2);\r\n  };\r\n\r\n  render() {\r\n    const {inventory} = this.props;\r\n    return (<div style={{width: 290, display: 'flex'}}\r\n                 onContextMenu={event => {\r\n                   event.preventDefault();\r\n                   const allInventory = State.data.entity.inventory;\r\n                   removeFrom(allInventory, inventory);\r\n                   State.updateEntity({inventory: allInventory});\r\n                 }}>\r\n      <div style={{width: 150, minWidth: 150}}>{inventory.item.name}</div>\r\n      <div style={{width: 70, textAlign: 'center'}}>{ItemElement.calculateWeight(inventory)}</div>\r\n      <SimpleTextField style={{width: 50, textAlign: 'center'}}\r\n                       variant={TextFieldType.FLOAT}\r\n                       value={inventory.amount}\r\n                       onChange={this.updateAmount}/>\r\n    </div>);\r\n  };\r\n}\r\n\r\nexport default ItemElement;","// @flow\r\nimport React, {Component} from 'react';\r\nimport {State} from \"../../../state/State\";\r\nimport {removeFrom} from \"../../../util/Collections\";\r\nimport SimpleTextField, {TextFieldType} from \"./SimpleTextField\";\r\n\r\nexport default class MoneyElement extends Component {\r\n  updateAmount = amountType => amount => {\r\n    this.props.money.amount[amountType] = amount;\r\n    State.updateEntity({money: State.data.entity.money});\r\n  };\r\n\r\n  render() {\r\n    const {money, ...other} = this.props;\r\n\r\n    return <div {...other} style={{display: 'flex'}} onContextMenu={event => {\r\n      event.preventDefault();\r\n      State.updateEntity({money: removeFrom(State.data.entity.money, money)});\r\n    }}>\r\n      <div style={{width: 145}}>{money.currency.name}</div>\r\n      <SimpleTextField customStyle={{width: 40}}\r\n                       value={money.amount.gold}\r\n                       onChange={this.updateAmount('gold')}\r\n                       variant={TextFieldType.INT}/>\r\n      <SimpleTextField customStyle={{width: 45}}\r\n                       value={money.amount.silver}\r\n                       onChange={this.updateAmount('silver')}\r\n                       variant={TextFieldType.INT}/>\r\n      <SimpleTextField customStyle={{width: 50}}\r\n                       value={money.amount.lead}\r\n                       onChange={this.updateAmount('lead')}\r\n                       variant={TextFieldType.INT}/>\r\n    </div>;\r\n  };\r\n}\r\n","import React, {Component} from \"react\";\r\nimport {withStyles} from \"@material-ui/styles\";\r\nimport Add from \"@material-ui/icons/Add\";\r\nimport DeterminantService from \"../../../client/DeterminantService\";\r\nimport {ModifierType} from \"../../../model/rule/Modifier\";\r\n\r\nconst determinantService = new DeterminantService();\r\n\r\nconst fieldStyle = {\r\n    fieldContainer: {\r\n        position: 'relative'\r\n    },\r\n    extension: {\r\n        position: 'absolute',\r\n        top: '-10px',\r\n        textAlign: 'center',\r\n        width: '100%'\r\n    },\r\n    checkboxContainer: {\r\n        position: 'absolute',\r\n        right: '5px',\r\n        display: 'flex',\r\n        flexFlow: 'row',\r\n        flexWrap: 'wrap',\r\n        maxWidth: 40,\r\n        zIndex: 1\r\n    },\r\n};\r\n\r\nconst ExtMark = props => <Add style={{fontSize: 14, margin: -2}} {...props}/>;\r\n\r\nclass ProfessionExtensionField extends Component {\r\n\r\n    addExtension = () => {\r\n        determinantService.addExperienceExtension(this.props.ext, this.props.onChange);\r\n    };\r\n\r\n    removeExtension = () => {\r\n        determinantService.removeExperienceExtension(this.props.ext, this.props.onChange);\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            ext,\r\n            classes,\r\n            customClassName,\r\n            onChange,\r\n            ...other\r\n        } = this.props;\r\n\r\n        let professionValue = '0';\r\n        let extended = [];\r\n\r\n        if (ext) {\r\n            extended = ext.getExperienceExtensions();\r\n            const professionModifier = ext ? ext.modifiers.find(mod => mod.type === ModifierType.PROFESSION) : null;\r\n\r\n            if (professionModifier) {\r\n              professionValue = professionModifier.value;\r\n            }\r\n        }\r\n\r\n        return <div className={`${classes.fieldContainer} ${customClassName}`} {...other}\r\n                    onClick={this.addExtension}\r\n                    onContextMenu={(e) => {e.preventDefault(); this.removeExtension();}}>\r\n            <p className={classes.extension}>{'+' + professionValue}</p>\r\n            <div className={classes.checkboxContainer}>\r\n                {extended.map(mod => <ExtMark key={'' + mod.value + '-' + mod.type}/>)}\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withStyles(fieldStyle)(ProfessionExtensionField);","import React, {Component} from \"react\";\r\nimport {withStyles} from \"@material-ui/styles\";\r\nimport CreatureDeterminants from \"../../../model/creature/CreatureDeterminants\";\r\nimport {DeterminantType} from \"../../../model/rule/Determinant\";\r\nimport {State} from \"../../../state/State\";\r\nimport ProfessionExtensionField from \"./ProfessionExtensionField\";\r\nimport SimpleTextField, {TextFieldType} from \"./SimpleTextField\";\r\n\r\nexport const PersonalDeterminantFieldStyle = {\r\n    row1: {\r\n        paddingTop: 10,\r\n        maxHeight: 35,\r\n        minHeight: 35,\r\n        width: '100%',\r\n        display: 'flex',\r\n    },\r\n    row2: {\r\n        maxHeight: 50,\r\n        minHeight: 50,\r\n        width: '100%',\r\n        display: 'flex',\r\n    },\r\n    row3: {\r\n        maxHeight: 50,\r\n        minHeight: 50,\r\n        width: '100%',\r\n        display: 'flex',\r\n        textAlign: 'center',\r\n    },\r\n\r\n    firstInRow: {\r\n        minHeight: 50,\r\n        maxHeight: 50,\r\n        minWidth: 47,\r\n        maxWidth: 47,\r\n    },\r\n    otherInRow: {\r\n        maxHeight: 50,\r\n        minHeight: 50,\r\n        minWidth: 47,\r\n        maxWidth: 47,\r\n    },\r\n    otherInRow2: {\r\n        maxHeight: 50,\r\n        minHeight: 50,\r\n        minWidth: 46,\r\n        maxWidth: 46,\r\n    },\r\n    lastRowChild: {\r\n        margin: '15px 0 0 0',\r\n    }\r\n};\r\n\r\nclass PersonalDeterminantsField extends Component {\r\n    updateDeterminant = determinant => value => {\r\n        determinant.value = value;\r\n        State.updateEntity({determinants: State.data.entity.determinants});\r\n    };\r\n\r\n    updateDeterminantExperience = determinant => {\r\n        const determinants: CreatureDeterminants = State.data.entity.determinants;\r\n        determinants.replaceDeterminant(determinant);\r\n        State.updateEntity({determinants: determinants});\r\n    };\r\n\r\n    render() {\r\n        const {classes, ...other} = this.props;\r\n        const person = State.data.entity;\r\n        const determinants: CreatureDeterminants = person.determinants;\r\n        const speed = determinants.findDeterminant(DeterminantType.SPEED);\r\n        const battle = determinants.findDeterminant(DeterminantType.BATTLE);\r\n        const shooting = determinants.findDeterminant(DeterminantType.SHOOTING);\r\n        const strength = determinants.findDeterminant(DeterminantType.STRENGTH);\r\n        const durability = determinants.findDeterminant(DeterminantType.DURABILITY);\r\n        const health = determinants.findDeterminant(DeterminantType.HEALTH);\r\n        const attack = determinants.findDeterminant(DeterminantType.ATTACK);\r\n        const initiative = determinants.findDeterminant(DeterminantType.INITIATIVE);\r\n        const dexterity = determinants.findDeterminant(DeterminantType.DEXTERITY);\r\n        const leaderSkills = determinants.findDeterminant(DeterminantType.LEADER_SKILLS);\r\n        const intelligence = determinants.findDeterminant(DeterminantType.INTELLIGENCE);\r\n        const control = determinants.findDeterminant(DeterminantType.CONTROL);\r\n        const will = determinants.findDeterminant(DeterminantType.WILL);\r\n        const charisma = determinants.findDeterminant(DeterminantType.CHARISMA);\r\n\r\n        return <div {...other}>\r\n            <div className={classes.row1}>\r\n                <SimpleTextField className={classes.firstInRow}  value={speed.value} onChange={this.updateDeterminant(speed)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow}  value={battle.value} onChange={this.updateDeterminant(battle)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow}  value={shooting.value} onChange={this.updateDeterminant(shooting)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow}  value={strength.value} onChange={this.updateDeterminant(strength)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow}  value={durability.value} onChange={this.updateDeterminant(durability)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow2} value={health.value} onChange={this.updateDeterminant(health)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow}  value={initiative.value} onChange={this.updateDeterminant(initiative)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow2} value={attack.value} onChange={this.updateDeterminant(attack)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow2} value={dexterity.value} onChange={this.updateDeterminant(dexterity)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow2} value={leaderSkills.value} onChange={this.updateDeterminant(leaderSkills)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow2} value={intelligence.value} onChange={this.updateDeterminant(intelligence)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow2} value={control.value} onChange={this.updateDeterminant(control)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow2} value={will.value} onChange={this.updateDeterminant(will)} variant={TextFieldType.INT} />\r\n                <SimpleTextField className={classes.otherInRow}  value={charisma.value} onChange={this.updateDeterminant(charisma)} variant={TextFieldType.INT} />\r\n            </div>\r\n            <div className={classes.row2}>\r\n                <ProfessionExtensionField ext={speed} customClassName={classes.firstInRow} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={battle} customClassName={classes.otherInRow} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={shooting} customClassName={classes.otherInRow} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={strength} customClassName={classes.otherInRow} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={durability} customClassName={classes.otherInRow} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={health} customClassName={classes.otherInRow2} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={initiative} customClassName={classes.otherInRow} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={attack} customClassName={classes.otherInRow2} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={dexterity} customClassName={classes.otherInRow2} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={leaderSkills} customClassName={classes.otherInRow2} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={intelligence} customClassName={classes.otherInRow2} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={control} customClassName={classes.otherInRow2} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={will} customClassName={classes.otherInRow2} onChange={this.updateDeterminantExperience}/>\r\n                <ProfessionExtensionField ext={charisma} customClassName={classes.otherInRow} onChange={this.updateDeterminantExperience}/>\r\n            </div>\r\n            <div className={classes.row3}>\r\n                <p className={`${classes.lastRowChild} ${classes.firstInRow} `}>{speed.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{battle.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{shooting.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{strength.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{durability.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{health.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{initiative.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{attack.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{dexterity.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{leaderSkills.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{intelligence.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{control.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{will.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{charisma.calculateExperienceValue()}</p>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withStyles(PersonalDeterminantFieldStyle)(PersonalDeterminantsField);","import {Tooltip} from \"@material-ui/core\";\r\nimport React, {Component} from \"react\";\r\nimport Select from \"react-select\";\r\nimport makeAnimated from 'react-select/animated'\r\nimport {State} from \"../../../state/State\";\r\n\r\nconst simpleStyle      = {\r\n  control: (provided, state) => ({\r\n    width: '100%', display: 'flex'\r\n  }), dropdownIndicator: (provided, state) => ({\r\n    color: 'transparent'\r\n  }), indicatorSeparator: (provided, state) => ({\r\n    color: 'transparent'\r\n  }),\r\n};\r\nconst simpleStyleMulti = {\r\n  control: (provided, state) => ({\r\n    width: '100%', display: 'flex'\r\n  }), dropdownIndicator: (provided, state) => ({\r\n    color: 'transparent'\r\n  }), indicatorSeparator: (provided, state) => ({\r\n    color: 'transparent'\r\n  }), clearIndicator: (provided, state) => ({\r\n    color: 'transparent',\r\n  }), multiValueRemove: (provided, state) => ({\r\n    color: 'ghostwhite', maxHeight: '1px',\r\n  }), singleValue: (provided, state) => ({\r\n    color: 'black', maxHeight: '1px',\r\n  }), multiValueLabel: (provided, state) => ({\r\n    background: 'transparent', display: 'inline-flex', '&::after': {\r\n      content: '\",\"'\r\n    }\r\n  }), multiValue: (provided, state) => ({\r\n    background: 'transparent', display: 'inline-flex', height: '14px'\r\n  }),\r\n};\r\n\r\nexport default class SimpleEntitySelect extends Component {\r\n  render() {\r\n    const {\r\n            name,\r\n            propName = name,\r\n            value = State.data.entity[propName],\r\n            options = State.data[name],\r\n            multi,\r\n            className,\r\n            customStyle,\r\n            onChange = selected => State.updateEntity({[propName]: selected})\r\n          } = this.props;\r\n\r\n    return <Tooltip title={value && value.description ? value.description : ''}>\r\n      <div style={{...{display: 'inline-block'}, ...customStyle}}>\r\n        <Select className={className}\r\n                styles={multi ? simpleStyleMulti : simpleStyle}\r\n                value={value}\r\n                options={options}\r\n                onChange={onChange}\r\n                components={makeAnimated()}\r\n                getOptionLabel={option => {\r\n                  return <div>{option.name}</div>\r\n                }}\r\n                getOptionValue={option => {\r\n                  return option.id\r\n                }}\r\n                filterOption={(option, input) => option.data.name.startsWith(input)}\r\n                placeholder={<div/>}\r\n                isSearchable\r\n                isMulti={multi}/>\r\n      </div>\r\n    </Tooltip>;\r\n  }\r\n}","import React, {Component} from \"react\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport Ammunition from \"../../../model/crafting/Ammunition\";\r\nimport {State} from \"../../../state/State\";\r\nimport {Collections} from \"../../../util/Collections\";\r\nimport SimpleEntitySelect from \"./SimpleEntitySelect\";\r\nimport SimpleTextField, {TextFieldType} from \"./SimpleTextField\";\r\n\r\nconst weaponElementStyle = {\r\n    ammunitionAmountField: {\r\n        minWidth: 40,\r\n        maxWidth: 40,\r\n    }\r\n};\r\n\r\nclass RangedWeaponElement extends Component {\r\n    render() {\r\n        const {\r\n            pWep,\r\n        } = this.props;\r\n        const weapon = pWep.rangedWeapon;\r\n        const weaponType = weapon.type;\r\n        const prepareTime = weaponType.prepareTime.toString();\r\n\r\n        return <div style={{display: 'flex', flexDirection: 'column'}}\r\n                    onContextMenu={event => {\r\n            event.preventDefault();\r\n            State.updateEntity({['rangedWeapons']: Collections.removeElement(State.data.entity.rangedWeapons, pWep)});\r\n        }}>\r\n            <div style={{display: 'flex', flexDirection: 'row'}}>\r\n                <div style={{width: 190}}>{weapon.name}</div>\r\n                <div style={{width: 38, textAlign: 'center'}}>{weaponType.minimumRange}</div>\r\n                <div style={{width: 38, textAlign: 'center'}}>{weaponType.mediumRange}</div>\r\n                <div style={{width: 38, textAlign: 'center'}}>{weaponType.maximumRange}</div>\r\n                <div style={{width: 38, textAlign: 'center'}}>{weaponType.damage.value}</div>\r\n                <div style={{width: 38, textAlign: 'center'}}>{prepareTime}</div>\r\n            </div>\r\n            <div style={{width: 170, height: 45, marginLeft: 10, display: 'flex'}}>\r\n                <SimpleEntitySelect name={Ammunition.entityName}\r\n                                    customStyle={{width: 140, height: 45}}\r\n                                    value={pWep.ammunition}\r\n                                    onChange={selected => {\r\n                                        pWep.ammunition = selected;\r\n                                        this.setState({newAmmunition: selected});\r\n                                    }}/>\r\n                <div onContextMenu={event => {\r\n                    event.preventDefault();\r\n                    pWep.ammunition = null;\r\n                    pWep.ammunitionAmount = 0;\r\n                    this.setState({newAmmunition: null});\r\n                }}>\r\n                    {\r\n                        pWep.ammunition ?\r\n                            <SimpleTextField customStyle={{width: 40}}\r\n                                             value={pWep.ammunitionAmount}\r\n                                             variant={TextFieldType.INT}\r\n                                             onChange={value => {\r\n                                                 pWep.ammunitionAmount = value;\r\n                                                 this.setState({currentAmount: value});\r\n                                             }}/> :\r\n                            <div/>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withStyles(weaponElementStyle)(RangedWeaponElement)","import {List} from \"@material-ui/core\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport React, {Component} from \"react\";\r\nimport {State} from \"../../../state/State\";\r\nimport {Collections} from \"../../../util/Collections\";\r\nimport SimpleEntitySelect from \"./SimpleEntitySelect\";\r\nimport SimpleBar from 'simplebar-react';\r\nimport 'simplebar/dist/simplebar.min.css'\r\n\r\nconst fieldStyle = {\r\n  container: {\r\n    width: '100%'\r\n  }, selectComponent: {\r\n    width: '100%'\r\n  }, itemsList: {\r\n    height: '100%', width: '100%', overflow: 'auto',\r\n  }, itemContainer: {\r\n    display: 'flex', flexDirection: 'row'\r\n  },\r\n};\r\n\r\nconst selectStyle = {\r\n  placeholder: () => ({\r\n    color: 'transparent'\r\n  }), singleValue: () => ({\r\n    color: 'transparent'\r\n  }),\r\n};\r\n\r\nclass SelectableList extends Component {\r\n\r\n  render() {\r\n    const {\r\n            classes,\r\n            customStyle,\r\n            listStyle,\r\n            name,\r\n            propName = name,\r\n            value = State.data.entity[name],\r\n            data = State.data[name],\r\n            onGearAdd = selected => State.updateEntity(\r\n                {[propName]: Collections.addEntityIfNew(selected, State.data.entity[propName])}),\r\n            children,\r\n            ...other\r\n          } = this.props;\r\n\r\n    const currentStyle = {...classes, ...customStyle};\r\n\r\n    return <div style={{width: '100%'}} {...other}>\r\n      <SimpleEntitySelect name={name}\r\n                          options={data}\r\n                          customStyle={{width: '100%'}}\r\n                          onChange={onGearAdd}\r\n                          value={null}/>\r\n                          <SimpleBar style={{...{height: '100%', width: '100%'}, ...listStyle}}>\r\n                            {children}\r\n                          </SimpleBar>\r\n{/*\r\n      <List style={{...{height: '100%', width: '100%', overflow: 'auto'}, ...listStyle}}>\r\n      </List>\r\n*/}\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withStyles(fieldStyle)(SelectableList)","import React, {Component} from \"react\";\r\nimport Select             from \"react-select\";\r\nimport makeAnimated       from 'react-select/animated'\r\nimport {State}            from \"../../../state/State\";\r\n\r\nconst simpleStyle = {\r\n  control: (provided, state) => ({\r\n    width: '100%', display: 'flex'\r\n  }), dropdownIndicator: (provided, state) => ({\r\n    color: 'transparent'\r\n  }), indicatorSeparator: (provided, state) => ({\r\n    color: 'white'\r\n  }),\r\n};\r\n\r\nexport default class SimpleEnumSelect extends Component {\r\n\r\n  getData = source => {\r\n    return source.map(e => {\r\n      return {label: e, value: e};\r\n    });\r\n  };\r\n\r\n  onSelected = selected => {\r\n    this.props.onChange(selected && selected.value)\r\n  };\r\n\r\n  render() {\r\n    const {name, value = State.data.entity[name], options = State.data[name], ...other} = this.props;\r\n\r\n    return <Select {...other}\r\n                   styles={simpleStyle}\r\n                   options={options}\r\n                   value={{label: value, value: value}}\r\n                   getOptionLabel={val => <div>{val.label ? val.label : (typeof val === \"string\"\r\n                       ? val\r\n                       : undefined)}</div>}\r\n                   getOptionValue={val => val}\r\n                   onChange={selected => State.updateEntity({[name]: selected})}\r\n                   components={makeAnimated()}\r\n                   isSearchable/>;\r\n  }\r\n}","import {Menu, MenuItem} from \"@material-ui/core\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport React, {Component} from \"react\";\r\nimport {State} from \"../../../state/State\";\r\n\r\nexport default class SimpleList extends Component {\r\n  state = {\r\n    anchorEl: null, currentElement: null\r\n  };\r\n\r\n  handleClick = element => event => {\r\n    this.setState({anchorEl: event.currentTarget, currentElement: element})\r\n  };\r\n\r\n  onRemove = element => () => {\r\n    this.handleClose();\r\n    this.props.onRemove(element);\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({anchorEl: null, currentElement: null})\r\n  };\r\n\r\n  render() {\r\n    const {name, data = State.data.entity[name], onRemove, listStyle, ...other} = this.props;\r\n    return <div {...other}>\r\n      {data.map((element, index) => {\r\n        const value = element.name || element;\r\n        return <div key={'listed-entity-' + value} style={{display: 'inline-block'}}>\r\n            {\r\n                element.name ?\r\n                    element.description ?\r\n                        <Tooltip title={element.description}><p onClick={this.handleClick(element)} style={{margin: 0}}>{(index > 0 ? ', ' : '') + value}</p></Tooltip> :\r\n                        <p onClick={this.handleClick(element)} style={{margin: 0}}>{(index > 0 ? ', ' : '') + value}</p> :\r\n                    <p style={{margin: 0}}>{(index > 0 ? ', ' : '') + value}</p>\r\n            }\r\n            {\r\n                element.name &&\r\n                <Menu id={'listed-menu-item-' + element.name}\r\n                      anchorEl={this.state.anchorEl}\r\n                      open={element === this.state.currentElement && this.state.anchorEl !== null}\r\n                      onClose={this.handleClose}>\r\n                    <MenuItem onClick={this.onRemove(element)}>Remove</MenuItem>\r\n                </Menu>\r\n            }\r\n        </div>\r\n      })}\r\n    </div>;\r\n  }\r\n}","// @flow\r\nimport React, {Component} from 'react';\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport {DeterminantType} from \"../../../model/rule/Determinant\";\r\nimport {State} from \"../../../state/State\";\r\n\r\nconst componentStyle = {\r\n    container: {\r\n        height: 160,\r\n        width: 200,\r\n        paddingLeft: 140,\r\n        paddingTop: 80,\r\n        display: 'flex',\r\n        flexFlow: 'column',\r\n    },\r\n\r\n    firstRow: {\r\n        display: 'flex',\r\n        height: 45,\r\n        width: '100%',\r\n    },\r\n    nextRow: {\r\n        display: 'flex',\r\n        height: 45,\r\n        width: '100%',\r\n    },\r\n    cell: {\r\n        width: 70,\r\n        textAlign: 'center',\r\n        alignSelf: 'center',\r\n    },\r\n};\r\n\r\nclass SpeedComponent extends Component {\r\n    calc = (speed, tempo) => [speed * tempo, speed * tempo * 6, speed * tempo * 360 / 1000];\r\n    calculateSpeed = speed => [this.calc(speed, 2), this.calc(speed, 4), this.calc(speed, 16)];\r\n\r\n    render() {\r\n        const {classes, entity = State.data.entity} = this.props;\r\n        const speed = this.calculateSpeed(entity.determinants.findDeterminant(DeterminantType.SPEED).calculateExperienceValue());\r\n\r\n        return (\r\n            <div className={classes.container}>\r\n                <div className={classes.firstRow}>\r\n                    <div className={classes.cell}>{speed[0][0]}</div>\r\n                    <div className={classes.cell}>{speed[0][1]}</div>\r\n                    <div className={classes.cell}>{speed[0][2]}</div>\r\n                </div>\r\n                <div className={classes.nextRow}>\r\n                    <div className={classes.cell}>{speed[1][0]}</div>\r\n                    <div className={classes.cell}>{speed[1][1]}</div>\r\n                    <div className={classes.cell}>{speed[1][2]}</div>\r\n                </div>\r\n                <div className={classes.nextRow}>\r\n                    <div className={classes.cell}>{speed[2][0]}</div>\r\n                    <div className={classes.cell}>{speed[2][1]}</div>\r\n                    <div className={classes.cell}>{speed[2][2]}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n}\r\n\r\nexport default withStyles(componentStyle)(SpeedComponent);","// @flow\r\nimport React, {Component} from 'react';\r\nimport {State} from \"../../../state/State\";\r\nimport {removeFrom} from \"../../../util/Collections\";\r\n\r\nclass SpellElement extends Component {\r\n  onContextMenu = spell => event => {\r\n    event.preventDefault();\r\n    State.updateEntity({spells: removeFrom(State.data.entity.spells, spell)});\r\n  };\r\n\r\n  render() {\r\n    const {spell, disabled} = this.props;\r\n    const ingredientsText   = spell.ingredients.map(item => item.name).join(', ');\r\n\r\n    const content = [<div style={{width: 155}}>{spell.name}</div>,\r\n                     <div style={{textAlign: 'center', width: 47}}>{spell.level}</div>,\r\n                     <div style={{textAlign: 'center', width: 47}}>{spell.manaCost}</div>,\r\n                     <div style={{textAlign: 'center', width: 47}}>{spell.range}</div>,\r\n                     <div style={{\r\n                       textAlign: 'center', width: 47\r\n                     }}>{spell.durationTime.toString()}</div>,\r\n                     <div style={{width: 140}}>{ingredientsText}</div>,\r\n                     <div style={{width: 130}}>{spell.effect}</div>,];\r\n    return disabled ?\r\n        <div style={{display: 'flex'}}>{content}</div> :\r\n        <div style={{display: 'flex'}} onContextMenu={this.onContextMenu(spell)}>{content}</div>;\r\n  };\r\n};\r\n\r\nexport default SpellElement;","import React, {Component} from 'react';\r\nimport MagicService from \"../../../client/MagicService\";\r\nimport CurrentMagicKnowledge from \"../../../model/knowledge/CurrentMagicKnowledge\";\r\nimport SpellSchoolLevel from \"../../../model/knowledge/SpellSchoolLevel\";\r\nimport {State} from \"../../../state/State\";\r\nimport {removeFrom} from \"../../../util/Collections\";\r\nimport SelectableList from \"./SelectableList\";\r\n\r\nclass SpellSchoolList extends Component {\r\n  static magicService = new MagicService();\r\n  state               = {\r\n    availableSpellSchools: new Map(),\r\n  };\r\n\r\n  onSpellSchoolAdd = magicSchool => {\r\n    const entity              = State.data.entity;\r\n    const currentSpellSchools = entity.spellSchools;\r\n    const currentLevelIndex   = currentSpellSchools.indexOf(currentSpellSchools.find(value => value.spellSchool.name\r\n                                                                                              === magicSchool.name));\r\n\r\n    if (currentLevelIndex >= 0) {\r\n      currentSpellSchools.splice(currentLevelIndex, 1);\r\n    }\r\n    let newSpellSchool = this.state.availableSpellSchools.get(magicSchool);\r\n    State.updateEntity({spellSchools: [...currentSpellSchools, newSpellSchool]});\r\n  };\r\n\r\n  onSpellSchoolRemove = spellSchool => event => {\r\n    event.preventDefault();\r\n    let newSpellSchools = removeFrom(State.data.entity.spellSchools, spellSchool);\r\n    this.refreshRelevantMagicSchools();\r\n    State.updateEntity({spellSchools: newSpellSchools});\r\n  };\r\n\r\n  refreshRelevantMagicSchools = () => {\r\n    const currentMagicKnowledge: CurrentMagicKnowledge = new CurrentMagicKnowledge();\r\n    currentMagicKnowledge.currentSpellSchools          = State.data.entity.spellSchools;\r\n    currentMagicKnowledge.realm                        = State.data.currentRealm;\r\n    SpellSchoolList.magicService.getAvailableSpellSchools(currentMagicKnowledge,\r\n                                                          this.setSpellSchools);\r\n  };\r\n\r\n  setSpellSchools = spellSchools => {\r\n    this.setState({\r\n                    availableSpellSchools: this.assembleSpellSchools(spellSchools),\r\n                    currentSpellSchools: State.data.entity.spellSchools\r\n                  });\r\n  };\r\n\r\n  assembleSpellSchools = spellSchools => {\r\n    const map = this.state.availableSpellSchools;\r\n    map.clear();\r\n    spellSchools.forEach(spellSchoolLevel => map.set(spellSchoolLevel.spellSchool,\r\n                                                     spellSchoolLevel));\r\n    return map;\r\n  };\r\n\r\n  static spellSchoolLevelText = (spellSchoolLevel: SpellSchoolLevel) => {\r\n    return spellSchoolLevel.spellSchool.name + ' p. ' + spellSchoolLevel.level;\r\n  };\r\n\r\n  render() {\r\n    const entity = State.data.entity;\r\n\r\n    if (this.state.currentSpellSchools !== entity.spellSchools) {\r\n      this.refreshRelevantMagicSchools();\r\n    }\r\n    const availableSpellSchools = [...this.state.availableSpellSchools.keys()];\r\n\r\n    return <div>\r\n      <SelectableList style={{height: 400, width: 200, paddingTop: 10}}\r\n                      listStyle={{height: 300, width: '100%', overflow: 'auto'}}\r\n                      data={availableSpellSchools}\r\n                      onGearAdd={this.onSpellSchoolAdd}>\r\n        {entity.spellSchools.map(spellSchoolLevel => <p\r\n            key={SpellSchoolList.spellSchoolLevelText(spellSchoolLevel)} style={{margin: 0}}\r\n            onContextMenu={this.onSpellSchoolRemove(spellSchoolLevel)}>\r\n          {SpellSchoolList.spellSchoolLevelText(spellSchoolLevel)}\r\n        </p>)}\r\n      </SelectableList>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default SpellSchoolList;","import React, {Component} from \"react\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport GearService from \"../../../client/GearService\";\r\nimport {DeterminantType} from \"../../../model/rule/Determinant\";\r\nimport {State} from \"../../../state/State\";\r\nimport {Collections} from \"../../../util/Collections\";\r\n\r\nconst weaponElementStyle = {\r\n    itemContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'row'\r\n    },\r\n    itemName: {\r\n        minWidth: 180,\r\n        maxWidth: 180,\r\n    },\r\n    itemVariable: {\r\n        minWidth: 51,\r\n        maxWidth: 51,\r\n        textAlign: 'center',\r\n    },\r\n    damageText: {\r\n        minWidth: 51,\r\n        maxWidth: 51,\r\n        textAlign: 'center',\r\n        fontSize: 12,\r\n        paddingTop: 5,\r\n    },\r\n};\r\n\r\nconst weaponService = new GearService();\r\n\r\nclass WeaponElement extends Component {\r\n    state = {\r\n        damageText: ''\r\n    };\r\n\r\n    updateDamageValue = () => {\r\n        weaponService.calculateMeleeDamage(this.props.weapon.id, text => this.setState({\r\n            damageText: text,\r\n            weapon: this.props.weapon\r\n        }))\r\n    };\r\n\r\n    onRightClick = (name, weapon) => event => {\r\n        event.preventDefault();\r\n        State.updateEntity({[name]: Collections.removeElement(State.data.entity[name], weapon)});\r\n    };\r\n\r\n    render() {\r\n        const {name, classes, customStyle, weapon, disabled} = this.props;\r\n        const currentStyle = {...classes, ...customStyle};\r\n        if (weapon !== this.state.weapon) {\r\n            this.updateDamageValue();\r\n        }\r\n\r\n        const content = [\r\n            <div className={currentStyle.itemName}>{weapon.name}</div>,\r\n            <div className={currentStyle.itemVariable}>{weapon.getFinalValueForType(DeterminantType.INITIATIVE)}</div>,\r\n            <div className={currentStyle.itemVariable}>{weapon.getFinalValueForType(DeterminantType.BATTLE)}</div>,\r\n            <div className={currentStyle.damageText}>{this.state.damageText}</div>,\r\n            <div className={currentStyle.itemVariable}>{weapon.getFinalValueForType(DeterminantType.PARRY)}</div>];\r\n\r\n        return disabled ?\r\n            <div className={currentStyle.itemContainer}>{content}</div> :\r\n            <div className={currentStyle.itemContainer} onContextMenu={this.onRightClick(name, weapon)}>{content}</div>;\r\n    }\r\n}\r\n\r\nexport default withStyles(weaponElementStyle)(WeaponElement)","import {Menu, MenuItem, Tooltip} from \"@material-ui/core\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport PropTypes from 'prop-types';\r\nimport React, {Component} from 'react';\r\nimport {withTranslation} from \"react-i18next\";\r\nimport SimpleBar from \"simplebar-react\";\r\nimport DeterminantService from \"../../client/DeterminantService\";\r\nimport GearService from \"../../client/GearService\";\r\nimport MagicService from \"../../client/MagicService\";\r\nimport FrontCharacterSheet from \"../../img/A.png\";\r\nimport Armor from \"../../model/crafting/Armor\";\r\nimport Item from \"../../model/crafting/Item\";\r\nimport MeleeWeapon from \"../../model/crafting/MeleeWeapon\";\r\nimport RangedWeapon from \"../../model/crafting/RangedWeapon\";\r\nimport Animal from \"../../model/creature/Animal\";\r\nimport Character from \"../../model/creature/Character\";\r\nimport EyeColor from \"../../model/creature/EyeColor\";\r\nimport {GenderEntityName} from \"../../model/creature/Gender\";\r\nimport HairColor from \"../../model/creature/HairColor\";\r\nimport PhysicalFeature from \"../../model/creature/PhysicalFeature\";\r\nimport Skill from \"../../model/knowledge/Skill\";\r\nimport Spell from \"../../model/knowledge/Spell\";\r\nimport Profession from \"../../model/professions/Profession\";\r\nimport ProfessionClass from \"../../model/professions/ProfessionClass\";\r\nimport Currency from \"../../model/world/Currency\";\r\nimport Language from \"../../model/world/Language\";\r\nimport Nation from \"../../model/world/Nation\";\r\nimport Race from \"../../model/world/Race\";\r\nimport Religion from \"../../model/world/Religion\";\r\nimport ItemService from \"../../service/ItemService\";\r\nimport MoneyService from \"../../service/MoneyService\";\r\nimport ProfessionService from \"../../service/ProfessionService\";\r\nimport {State} from \"../../state/State\";\r\nimport {Collections, removeFrom} from \"../../util/Collections\";\r\nimport AnimalElement from \"./field/AnimalElement\";\r\nimport ArmorCalculationsComponent from \"./field/ArmorCalculationsComponent\";\r\nimport ArmorElement from \"./field/ArmorElement\";\r\nimport ItemElement from \"./field/ItemElement\";\r\nimport MoneyElement from \"./field/MoneyElement\";\r\nimport PersonalDeterminantsField from \"./field/PersonalDeterminantsField\";\r\nimport RangedWeaponElement from \"./field/RangedWeaponElement\";\r\nimport SelectableList from \"./field/SelectableList\";\r\nimport SimpleEntitySelect from \"./field/SimpleEntitySelect\";\r\nimport SimpleEnumSelect from \"./field/SimpleEnumSelect\";\r\nimport SimpleList from \"./field/SimpleList\";\r\nimport SimpleTextField, {TextFieldType} from \"./field/SimpleTextField\";\r\nimport SpeedComponent from \"./field/SpeedComponent\";\r\nimport SpellElement from \"./field/SpellElement\";\r\nimport SpellSchoolList from \"./field/SpellSchoolList\";\r\nimport WeaponElement from \"./field/WeaponElement\";\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    marginTop: 5,\r\n    background: `url(${FrontCharacterSheet})`,\r\n    fontFamily: 'wfrp',\r\n    fontSize: '24px',\r\n    backgroundSize: 'cover',\r\n    height: '1231px',\r\n    width: '1800px',\r\n    display: 'flex'\r\n  },\r\n\r\n  genderSelect: {\r\n    display: 'inline-block', width: 85,\r\n  },\r\n});\r\n\r\nclass CharacterSheetForm extends Component {\r\n  determinantService: DeterminantService = new DeterminantService();\r\n  state = {anchorEl: null, currentElement: null,\r\n    generateStatsAction: () => {\r\n      const race = State.data.entity.race;\r\n      race && this.determinantService.rollForRace(race);\r\n    }};\r\n\r\n  handleClose = () => {\r\n    this.setState({anchorEl: null, showMenu: ''})\r\n  };\r\n\r\n  render() {\r\n    const {classes, t} = this.props;\r\n    const entity    = State.data.entity;\r\n\r\n    return <div className={classes.root}>\r\n\r\n      {/*page one*/}\r\n      <div style={{width: 900, height: 1230}}>\r\n\r\n        {/*basic data*/}\r\n        <div style={{paddingTop: 33, paddingLeft: 33, width: 860}}>\r\n          <SimpleTextField name={'name'} customStyle={{width: 200}}/>\r\n          <SimpleEntitySelect name={Race.entityName} customStyle={{width: 140, paddingLeft: 20}} options={State.data.currentRealmData.races}/>\r\n          <SimpleEnumSelect name={GenderEntityName} className={classes.genderSelect}/>\r\n          <SimpleEntitySelect name={ProfessionClass.entityName} customStyle={{width: 240}}/>\r\n          <SimpleEntitySelect name={Character.entityName} propName={'personality'} customStyle={{width: 148}}/>\r\n        </div>\r\n        <div style={{paddingTop: 30, paddingLeft: 33, width: 860}}>\r\n          <SimpleTextField name={'age'} variant={TextFieldType.INT} customStyle={{width: 80}}/>\r\n          <SimpleTextField name={'height'} variant={TextFieldType.INT} customStyle={{width: 100, paddingLeft: 10}}/>\r\n          <SimpleTextField name={'weight'} variant={TextFieldType.FLOAT} customStyle={{width: 90, paddingLeft: 20}}/>\r\n          <SimpleEntitySelect name={HairColor.entityName} customStyle={{width: 110, paddingLeft: 10}}/>\r\n          <SimpleEntitySelect name={EyeColor.entityName} customStyle={{width: 90, paddingLeft: 0}}/>\r\n          <SimpleEntitySelect name={PhysicalFeature.entityName} propName={'physicalFeatures'} multi customStyle={{width: 280, paddingLeft: 60, maxHeight: 70, position: 'relative', top: -30, fontSize: '14px'}}/>\r\n        </div>\r\n\r\n        {/*profession*/}\r\n        <div style={{paddingTop: 30, paddingLeft: 33, width: 860, height: 40, display: 'flex'}}>\r\n          <SimpleEntitySelect name={Profession.entityName} propName={'currentProfession'} options={ProfessionService.getProfessions()} onChange={ProfessionService.updateProfession} customStyle={{width: 235, paddingLeft: 0}}/>\r\n          <SimpleBar style={{width: 360, height: 40}}>\r\n            <SimpleList name={'professions'} onRemove={ProfessionService.removeProfessionFromHistory} style={{display: 'inline-block', width: 350, fontSize: '14px'}}/>\r\n          </SimpleBar>\r\n          <SimpleBar style={{width: 200, height: 40}}>\r\n            <SimpleList name={'outgoingProfessions'} data={ProfessionService.nextProfessions()} onRemove={ProfessionService.removeProfessionFromHistory} style={{display: 'inline-block', width: 200, height: 40, fontSize: '14px'}}/>\r\n          </SimpleBar>\r\n        </div>\r\n\r\n        {/*determinants*/}\r\n        <div style={{paddingTop: 43, width: 890, display: 'flex'}}>\r\n          <div style={{width: 230, height: 50}} onContextMenu={event => {\r\n            event.preventDefault();\r\n            this.setState({anchorEl: event.target, currentElement: ['generateStats']});\r\n          }}/>\r\n          <PersonalDeterminantsField style={{width: 650}}/>\r\n        </div>\r\n\r\n        {/*skills and equipment*/}\r\n        <div style={{paddingTop: 10, paddingLeft: 20, width: 860, display: 'flex'}}>\r\n\r\n          {/*gear*/}\r\n          <div style={{paddingTop: 0, paddingLeft: 0, width: 430}}>\r\n            <SelectableList style={{width: 400, height: 220, paddingLeft: 40, paddingTop: 10}} listStyle={{height: 180}} name={MeleeWeapon.entityName} propName={'meleeWeapons'}>\r\n              {entity.meleeWeapons.map(weapon => <WeaponElement key={weapon.name} name={'meleeWeapons'} weapon={weapon}/>)}\r\n            </SelectableList>\r\n            <SelectableList style={{width: 400, height: 230, paddingLeft: 30, paddingTop: 10}} listStyle={{height: 180}} name={RangedWeapon.entityName} onGearAdd={GearService.addPersonalRangedWeapon}>\r\n              {entity.rangedWeapons.map(weapon => <RangedWeaponElement key={weapon.rangedWeapon.name} name={'meleeWeapons'} pWep={weapon}/>)}\r\n            </SelectableList>\r\n            <SelectableList style={{width: 400, height: 220, paddingLeft: 20}} name={Armor.entityName}>\r\n              {entity.armor.map(armor => <ArmorElement key={armor.name} name={'meleeWeapons'} armor={armor}/>)}\r\n            </SelectableList>\r\n          </div>\r\n\r\n          {/*skills and armor*/}\r\n          <div style={{paddingTop: 0, paddingLeft: 10, width: 210}}>\r\n\r\n            {/*skills*/}\r\n            <SelectableList style={{width: 200, height: 360, paddingLeft: 0, paddingTop: 10}} listStyle={{height: 300}} name={Skill.entityName} propName={'skills'} data={Collections.except(State.data.skill, entity.skills)}>\r\n              {entity.skills.map(skill => <Tooltip title={skill.description}><p key={skill.name} style={{margin: 0}}\r\n                                             onContextMenu={event => {\r\n                                               event.preventDefault();\r\n                                               State.updateEntity({\r\n                                                                    skills: Collections.removeElement(\r\n                                                                        entity.skills,\r\n                                                                        skill)\r\n                                                                  });\r\n                                             }}>{skill.name}</p></Tooltip>)}\r\n            </SelectableList>\r\n\r\n            {/*armor values*/}\r\n            <ArmorCalculationsComponent/>\r\n          </div>\r\n\r\n          {/*magic schools*/}\r\n          <SpellSchoolList/>\r\n        </div>\r\n      </div>\r\n\r\n      {/*page two*/}\r\n      <div style={{width: 900, height: 1230}}>\r\n\r\n        {/*spells*/}\r\n        <div style={{paddingTop: 0, paddingLeft: 20, width: 840}}>\r\n          <div style={{paddingTop: 0, paddingLeft: 20, width: 840, display: 'flex'}}>\r\n            <SelectableList style={{width: 630}} listStyle={{height: 220}} name={Spell.entityName} propName={'spells'} data={MagicService.getRelevantSpells()}>\r\n              {entity.spells.map(spell => <SpellElement spell={spell}/>)}\r\n            </SelectableList>\r\n\r\n            {/*fate and mana*/}\r\n            <div style={{width: 200}}>\r\n              <SimpleTextField name={'fatePoints'}  variant={TextFieldType.INT} customStyle={{width: '100%', height: 50, paddingTop: 55}}/>\r\n              <SimpleTextField name={'mana'}  variant={TextFieldType.INT} customStyle={{width: '100%', height: 50, paddingTop: 30}}/>\r\n              <SimpleTextField name={'currentMana'}  variant={TextFieldType.INT} customStyle={{width: '100%', height: 50, paddingTop: 35}}/>\r\n            </div>\r\n          </div>\r\n\r\n          {/*personal belongings*/}\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{width: 300, paddingTop: 20}}>\r\n\r\n              {/*equipment*/}\r\n              <SelectableList style={{width: 300}} listStyle={{height: 370}} name={Item.entityName} onGearAdd={ItemService.addItemToInventory}>\r\n                {entity.inventory.map(eq => <ItemElement key={eq.item.name} inventory={eq}/>)}\r\n              </SelectableList>\r\n              <div style={{paddingLeft: 200}}>{ItemService.inventoryWeight()} kg</div>\r\n\r\n              {/*money*/}\r\n              <SelectableList style={{width: 285}} listStyle={{height: 150}} name={Currency.entityName} data={State.data.currentRealmData.currencies} onGearAdd={MoneyService.addMoney}>\r\n                {entity.money.map(money => <MoneyElement key={money.currency.name} money={money}/>)}\r\n              </SelectableList>\r\n\r\n            </div>\r\n\r\n            {/*other description*/}\r\n            <div>\r\n              <SpeedComponent/>\r\n\r\n              {/*personality*/}\r\n              <div style={{width: 350, height: 160, paddingTop: 10, display: 'flex'}}>\r\n\r\n                {/*languages*/}\r\n                <SelectableList style={{width: 100, paddingTop: 15}} listStyle={{height: 100}} name={Language.entityName} propName={'languages'} data={State.data.currentRealmData.languages}>\r\n                  {entity.languages.map(lang => <div onContextMenu={event => {\r\n                    event.preventDefault();\r\n                    State.updateEntity({languages: removeFrom(entity.languages, lang)});\r\n                  }}>{lang.name}</div>)}\r\n                </SelectableList>\r\n\r\n                {/*health*/}\r\n                <SimpleTextField name={'health'} variant={TextFieldType.TEXT} multiline customStyle={{width: 130, height: 100, alignSelf: 'flex-end'}}/>\r\n                <SimpleTextField name={'sanityPoints'} variant={TextFieldType.INT} customStyle={{width: 100, paddingLeft: 10}}/>\r\n              </div>\r\n\r\n              {/*history*/}\r\n              <div style={{width: 350}}>\r\n                <SimpleEntitySelect name={Nation.entityName} customStyle={{width: 170, height:50, marginLeft: 170, marginTop: 50}} options={State.data.currentRealmData.nations}/>\r\n                <SimpleTextField name={'parents'} variant={TextFieldType.TEXT} customStyle={{width: 120, height: 35, marginTop: 0, marginLeft: 220}}/>\r\n                <SimpleTextField name={'family'} variant={TextFieldType.TEXT} customStyle={{width: 220, height: 80, marginLeft: 110}}/>\r\n              </div>\r\n\r\n              {/*religion*/}\r\n              <div style={{width: 350, display: 'flex'}}>\r\n                <SimpleTextField name={'socialLevel'} variant={TextFieldType.TEXT} customStyle={{width: 80, height: 60, marginTop: 10, marginLeft: 110}}/>\r\n                <SimpleEntitySelect name={Religion.entityName} customStyle={{width: 150, marginTop: 35, marginLeft: 5}} data={State.data.currentRealmData.religions}/>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            {/*experience*/}\r\n            <div style={{marginLeft: 20, marginTop: 50}}>\r\n              <div style={{marginTop: 20}}>aktualnie:</div>\r\n              <SimpleTextField name={'experience'} variant={TextFieldType.INT} customStyle={{width: 150, height: 150}}/>\r\n              <div style={{marginTop: 20}}>cakowicie:</div>\r\n              <SimpleTextField name={'totalExperience'} variant={TextFieldType.INT} customStyle={{width: 150, height: 150}}/>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          {/*animals*/}\r\n          <SelectableList style={{width: 700}} listStyle={{height: 100}} name={Animal.entityName} propName={'animals'}>\r\n            {entity.animals.map(animal => <AnimalElement animal={animal}/>)}\r\n          </SelectableList>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <Menu anchorEl={this.state.anchorEl}\r\n            open={this.state.currentElement && this.state.anchorEl !== null}\r\n            onClose={this.handleClose}>\r\n        {\r\n          this.state.currentElement && this.state.currentElement.map(elementName =>\r\n            <MenuItem onClick={() => {\r\n              this.handleClose();\r\n              this.state[elementName + 'Action']();\r\n            }}>{t(elementName)}</MenuItem>\r\n          )\r\n        }\r\n      </Menu>\r\n    </div>;\r\n  }\r\n}\r\n\r\nCharacterSheetForm.propTypes = {\r\n  classes: PropTypes.object\r\n};\r\n\r\nexport default withStyles(styles)(withTranslation()(CharacterSheetForm));","import Add from \"@material-ui/icons/Add\";\r\nimport {withStyles} from \"@material-ui/styles\";\r\nimport React, {Component} from \"react\";\r\nimport {ModifierType} from \"../../../model/rule/Modifier\";\r\n\r\nconst fieldStyle = {\r\n    fieldContainer: {\r\n        position: 'relative'\r\n    },\r\n    extension: {\r\n        position: 'absolute',\r\n        top: '-10px',\r\n        textAlign: 'center',\r\n        width: '100%'\r\n    },\r\n    checkboxContainer: {\r\n        position: 'absolute',\r\n        right: '5px',\r\n        display: 'flex',\r\n        flexFlow: 'row',\r\n        flexWrap: 'wrap',\r\n        maxWidth: 40,\r\n        zIndex: 1\r\n    },\r\n};\r\n\r\nconst ExtMark = props => <Add style={{fontSize: 14, margin: -2}} {...props}/>;\r\n\r\nclass ProfessionExtensionField extends Component {\r\n    render() {\r\n        const {\r\n            ext,\r\n            classes,\r\n            customClassName,\r\n            ...other\r\n        } = this.props;\r\n\r\n        let professionValue = '0';\r\n        let extended = [];\r\n\r\n        if (ext) {\r\n            extended = ext.getExperienceExtensions();\r\n            const professionModifier = ext ? ext.modifiers.find(mod => mod.type === ModifierType.PROFESSION) : null;\r\n\r\n            if (professionModifier) {\r\n              professionValue = professionModifier.value;\r\n            }\r\n        }\r\n\r\n        return <div className={`${classes.fieldContainer} ${customClassName}`} {...other}>\r\n            <p className={classes.extension}>{'+' + professionValue}</p>\r\n            <div className={classes.checkboxContainer}>\r\n                {extended.map(mod => <ExtMark key={'' + mod.value + '-' + mod.type}/>)}\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withStyles(fieldStyle)(ProfessionExtensionField);","import {withStyles} from \"@material-ui/styles\";\r\nimport React, {Component} from \"react\";\r\nimport CreatureDeterminants from \"../../../model/creature/CreatureDeterminants\";\r\nimport {DeterminantType} from \"../../../model/rule/Determinant\";\r\nimport {State} from \"../../../state/State\";\r\nimport {PersonalDeterminantFieldStyle} from \"./PersonalDeterminantsField\";\r\nimport ProfessionExtensionView from \"./ProfessionExtensionView\";\r\n\r\nclass PersonalDeterminantsField extends Component {\r\n    render() {\r\n        const {classes, ...other} = this.props;\r\n        const person = State.data.entity;\r\n        const determinants: CreatureDeterminants = person.determinants;\r\n        const speed = determinants.findDeterminant(DeterminantType.SPEED);\r\n        const battle = determinants.findDeterminant(DeterminantType.BATTLE);\r\n        const shooting = determinants.findDeterminant(DeterminantType.SHOOTING);\r\n        const strength = determinants.findDeterminant(DeterminantType.STRENGTH);\r\n        const durability = determinants.findDeterminant(DeterminantType.DURABILITY);\r\n        const health = determinants.findDeterminant(DeterminantType.HEALTH);\r\n        const attack = determinants.findDeterminant(DeterminantType.ATTACK);\r\n        const initiative = determinants.findDeterminant(DeterminantType.INITIATIVE);\r\n        const dexterity = determinants.findDeterminant(DeterminantType.DEXTERITY);\r\n        const leaderSkills = determinants.findDeterminant(DeterminantType.LEADER_SKILLS);\r\n        const intelligence = determinants.findDeterminant(DeterminantType.INTELLIGENCE);\r\n        const control = determinants.findDeterminant(DeterminantType.CONTROL);\r\n        const will = determinants.findDeterminant(DeterminantType.WILL);\r\n        const charisma = determinants.findDeterminant(DeterminantType.CHARISMA);\r\n\r\n        return <div {...other}>\r\n            <div className={classes.row1} style={{paddingLeft: 15}}>\r\n                <div className={classes.firstInRow}>{speed.value}</div>\r\n                <div className={classes.otherInRow}>{battle.value}</div>\r\n                <div className={classes.otherInRow}>{shooting.value}</div>\r\n                <div className={classes.otherInRow}>{strength.value}</div>\r\n                <div className={classes.otherInRow}>{durability.value}</div>\r\n                <div className={classes.otherInRow2}>{health.value}</div>\r\n                <div className={classes.otherInRow}>{initiative.value}</div>\r\n                <div className={classes.otherInRow2}>{attack.value}</div>\r\n                <div className={classes.otherInRow2}>{dexterity.value}</div>\r\n                <div className={classes.otherInRow2}>{leaderSkills.value}</div>\r\n                <div className={classes.otherInRow2}>{intelligence.value}</div>\r\n                <div className={classes.otherInRow2}>{control.value}</div>\r\n                <div className={classes.otherInRow2}>{will.value}</div>\r\n                <div className={classes.otherInRow}>{charisma.value}</div>\r\n            </div>\r\n            <div className={classes.row2}>\r\n                <ProfessionExtensionView ext={speed} customClassName={classes.firstInRow}/>\r\n                <ProfessionExtensionView ext={battle} customClassName={classes.otherInRow}/>\r\n                <ProfessionExtensionView ext={shooting} customClassName={classes.otherInRow}/>\r\n                <ProfessionExtensionView ext={strength} customClassName={classes.otherInRow}/>\r\n                <ProfessionExtensionView ext={durability} customClassName={classes.otherInRow}/>\r\n                <ProfessionExtensionView ext={health} customClassName={classes.otherInRow2}/>\r\n                <ProfessionExtensionView ext={initiative} customClassName={classes.otherInRow}/>\r\n                <ProfessionExtensionView ext={attack} customClassName={classes.otherInRow2}/>\r\n                <ProfessionExtensionView ext={dexterity} customClassName={classes.otherInRow2}/>\r\n                <ProfessionExtensionView ext={leaderSkills} customClassName={classes.otherInRow2}/>\r\n                <ProfessionExtensionView ext={intelligence} customClassName={classes.otherInRow2}/>\r\n                <ProfessionExtensionView ext={control} customClassName={classes.otherInRow2}/>\r\n                <ProfessionExtensionView ext={will} customClassName={classes.otherInRow2}/>\r\n                <ProfessionExtensionView ext={charisma} customClassName={classes.otherInRow}/>\r\n            </div>\r\n            <div className={classes.row3}>\r\n                <p className={`${classes.lastRowChild} ${classes.firstInRow} `}>{speed.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{battle.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{shooting.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{strength.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{durability.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{health.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{initiative.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{attack.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{dexterity.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{leaderSkills.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{intelligence.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{control.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow2}`}>{will.calculateExperienceValue()}</p>\r\n                <p className={`${classes.lastRowChild} ${classes.otherInRow} `}>{charisma.calculateExperienceValue()}</p>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default withStyles(PersonalDeterminantFieldStyle)(PersonalDeterminantsField);","import React, {Component} from \"react\";\r\n\r\nclass RangedWeaponElement extends Component {\r\n    render() {\r\n        const {\r\n            pWep,\r\n        } = this.props;\r\n        const weapon = pWep.rangedWeapon;\r\n        const weaponType = weapon.type;\r\n        const prepareTime = weaponType.prepareTime.toString();\r\n\r\n        return <div style={{display: 'flex', flexDirection: 'column'}}>\r\n            <div style={{display: 'flex', flexDirection: 'row'}}>\r\n                <div style={{width: 190}}>{weapon.name}</div>\r\n                <div style={{width: 38, textAlign: 'center'}}>{weaponType.minimumRange}</div>\r\n                <div style={{width: 38, textAlign: 'center'}}>{weaponType.mediumRange}</div>\r\n                <div style={{width: 38, textAlign: 'center'}}>{weaponType.maximumRange}</div>\r\n                <div style={{width: 38, textAlign: 'center'}}>{weaponType.damage.value}</div>\r\n                <div style={{width: 38, textAlign: 'center'}}>{prepareTime}</div>\r\n            </div>\r\n            <div style={{width: 170, height: 45, marginLeft: 10, display: 'flex'}}>\r\n                <div style={{width: 140, height: 45}}>{pWep.ammunition && pWep.ammunition.name}</div>\r\n                <div>{pWep.ammunition ? <div style={{width: 40}}>{pWep.ammunitionAmount}</div> : <div/>}</div>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport default RangedWeaponElement;","import React, {Component} from 'react';\r\nimport SimpleBar from 'simplebar-react';\r\n\r\nclass SimpleListView extends Component {\r\n  render() {\r\n    const {children, data, listStyle, ...other} = this.props;\r\n\r\n    return <div {...other}>\r\n      <SimpleBar style={{...{height: '100%', width: '100%'}, ...listStyle}}>\r\n        {children}\r\n        {data && data.map(element => <div>{element.name || element}</div>)}\r\n      </SimpleBar>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default SimpleListView;","import {Menu, MenuItem, Tooltip} from \"@material-ui/core\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport PropTypes from 'prop-types';\r\nimport React, {Component} from 'react';\r\nimport {withTranslation} from \"react-i18next\";\r\nimport DeterminantService from \"../../client/DeterminantService\";\r\nimport FrontCharacterSheet from \"../../img/A.png\";\r\nimport Animal from \"../../model/creature/Animal\";\r\nimport ItemService from \"../../service/ItemService\";\r\nimport ProfessionService from \"../../service/ProfessionService\";\r\nimport {State} from \"../../state/State\";\r\nimport AnimalElement from \"./field/AnimalElement\";\r\nimport ArmorCalculationsComponent from \"./field/ArmorCalculationsComponent\";\r\nimport ArmorElement from \"./field/ArmorElement\";\r\nimport ItemElement from \"./field/ItemElement\";\r\nimport PersonalDeterminantsView from \"./field/PersonalDeterminantsView\";\r\nimport RangedWeaponElementView from \"./field/RangedWeaponElementView\";\r\nimport SimpleList from \"./field/SimpleList\";\r\nimport SimpleListView from \"./field/SimpleListView\";\r\nimport SpeedComponent from \"./field/SpeedComponent\";\r\nimport SpellElement from \"./field/SpellElement\";\r\nimport SpellSchoolList from \"./field/SpellSchoolList\";\r\nimport WeaponElement from \"./field/WeaponElement\";\r\n\r\nconst styles = () => ({\r\n  root: {\r\n    marginTop: 5,\r\n    background: `url(${FrontCharacterSheet})`,\r\n    fontFamily: 'wfrp',\r\n    fontSize: '24px',\r\n    backgroundSize: 'cover',\r\n    height: '1231px',\r\n    width: '1800px',\r\n    display: 'flex'\r\n  },\r\n\r\n  genderSelect: {\r\n    display: 'inline-block', width: 85,\r\n  },\r\n});\r\n\r\nclass CharacterSheetView extends Component {\r\n  determinantService: DeterminantService = new DeterminantService();\r\n  state = {anchorEl: null, currentElement: null,\r\n    generateStatsAction: () => {\r\n      const race = State.data.entity.race;\r\n      race && this.determinantService.rollForRace(race);\r\n    }};\r\n\r\n  handleClose = () => {\r\n    this.setState({anchorEl: null, showMenu: ''})\r\n  };\r\n\r\n  listToDivs = (array: Object[]) => {\r\n    return array ? array.map(e => <div>{e.name}</div>) : <div/>\r\n  };\r\n\r\n\r\n  render() {\r\n    const {classes, t, editable} = this.props;\r\n    const entity    = State.data.entity;\r\n\r\n    return <div className={classes.root}>\r\n\r\n      {/*page one*/}\r\n      <div style={{width: 900, height: 1230}}>\r\n\r\n        {/*basic data*/}\r\n        <div style={{paddingTop: 40, paddingLeft: 33, width: 860, display: 'flex'}}>\r\n          <div style={{width: 200}}>{entity.name}</div>\r\n          <div style={{width: 140, paddingLeft: 20}}>{entity.race && entity.race.name}</div>\r\n          <div style={{display: 'inline-block', width: 85}}>{entity.gender === 'MALE' ? 'M' : 'K'}</div>\r\n          <div style={{width: 240}}>{entity.professionClass && entity.professionClass.name}</div>\r\n          <div style={{width: 148}}>{t(entity.personality && entity.personality.name)}</div>\r\n        </div>\r\n        <div style={{paddingTop: 40, paddingLeft: 33, width: 860, display: 'flex'}}>\r\n          <div style={{width: 80, paddingLeft: 5}}>{entity.age}</div>\r\n          <div style={{width: 100, paddingLeft: 10}}>{entity.height} cm</div>\r\n          <div style={{width: 90, paddingLeft: 20}}>{entity.weight} kg</div>\r\n          <div style={{width: 110, paddingLeft: 10}}>{entity.hairColor && entity.hairColor.name}</div>\r\n          <div style={{width: 90, paddingLeft: 0}}>{entity.eyeColor && entity.eyeColor.name}</div>\r\n          <div style={{width: 265, paddingLeft: 70, maxHeight: 70, position: 'relative', top: -30, fontSize: '14px'}}>{this.listToDivs(entity.physicalFeatures)}</div>\r\n        </div>\r\n\r\n        {/*profession*/}\r\n        <div style={{paddingTop: 40, paddingLeft: 33, width: 860, display: 'flex'}}>\r\n          <div style={{width: 240, paddingLeft: 10}}>{entity.currentProfession && entity.currentProfession.name}</div>\r\n          <SimpleListView data={entity.professions} style={{display: 'inline-block', width: 350, fontSize: '14px'}}/>\r\n          <SimpleList name={'outgoingProfessions'} data={ProfessionService.nextProfessions()} onRemove={ProfessionService.removeProfessionFromHistory} style={{display: 'inline-block', width: 200, height: 40, fontSize: '14px'}}/>\r\n        </div>\r\n\r\n        {/*determinants*/}\r\n        <div style={{paddingTop: 50, width: 890, display: 'flex'}}>\r\n          <div style={{width: 230, height: 50}}/>\r\n          <PersonalDeterminantsView style={{width: 650}}/>\r\n        </div>\r\n\r\n        {/*skills and equipment*/}\r\n        <div style={{paddingTop: 0, paddingLeft: 20, width: 860, display: 'flex'}}>\r\n\r\n          {/*gear*/}\r\n          <div style={{paddingTop: 0, paddingLeft: 0, width: 430}}>\r\n            <SimpleListView style={{width: 400, height: 170, paddingLeft: 40, paddingTop: 60}}>\r\n              {entity.meleeWeapons.map(weapon => <WeaponElement key={weapon.name} name={'meleeWeapons'} weapon={weapon} disabled/>)}\r\n            </SimpleListView>\r\n            <SimpleListView style={{width: 400, height: 180, paddingLeft: 30, paddingTop: 60}}>\r\n              {entity.rangedWeapons.map(weapon => <RangedWeaponElementView key={weapon.rangedWeapon.name} pWep={weapon}/>)}\r\n            </SimpleListView>\r\n            <SimpleListView style={{width: 400, height: 230, paddingLeft: 20, paddingTop: 50}}>\r\n              {entity.armor.map(armor => <ArmorElement key={armor.name} name={'meleeWeapons'} armor={armor} disabled/>)}\r\n            </SimpleListView>\r\n          </div>\r\n\r\n          {/*skills and armor*/}\r\n          <div style={{paddingTop: 0, paddingLeft: 10, width: 210}}>\r\n\r\n            {/*skills*/}\r\n            <SimpleListView style={{width: 200, height: 315, paddingLeft: 0, paddingTop: 60}}>\r\n              {entity.skills.map(skill => <Tooltip title={skill.description}><p key={skill.name} style={{margin: 0}}>{skill.name}</p></Tooltip>)}\r\n            </SimpleListView>\r\n\r\n            {/*armor values*/}\r\n            <ArmorCalculationsComponent/>\r\n          </div>\r\n\r\n          {/*magic schools*/}\r\n          <SimpleListView style={{height: 350, width: 200, paddingTop: 60}} listStyle={{height: 250, width: '100%', overflow: 'auto'}}>\r\n            {entity.spellSchools.map(spellSchoolLevel =>\r\n                                         <p key={SpellSchoolList.spellSchoolLevelText(spellSchoolLevel)} style={{margin: 0}}>\r\n                                           {SpellSchoolList.spellSchoolLevelText(spellSchoolLevel)}\r\n                                         </p>)}\r\n          </SimpleListView>\r\n        </div>\r\n      </div>\r\n\r\n      {/*page two*/}\r\n      <div style={{width: 900, height: 1230}}>\r\n\r\n        {/*spells*/}\r\n        <div style={{paddingTop: 0, paddingLeft: 20, width: 840}}>\r\n          <div style={{paddingTop: 0, paddingLeft: 20, width: 840, display: 'flex'}}>\r\n            <SimpleListView style={{width: 630, height: 170, paddingTop: 50}}>\r\n              {entity.spells.map(spell => <SpellElement spell={spell} disabled/>)}\r\n            </SimpleListView>\r\n\r\n            {/*fate and mana*/}\r\n            <div style={{width: 200}}>\r\n              <div style={{width: '100%', height: 50, paddingTop: 60, textAlign: 'center'}}>{entity.fatePoints}</div>\r\n              <div style={{width: '100%', height: 50, paddingTop: 35, textAlign: 'center'}}>{entity.mana}</div>\r\n              <div style={{width: '100%', height: 50, paddingTop: 40, textAlign: 'center'}}>{entity.currentMana}</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/*personal belongings*/}\r\n          <div style={{display: 'flex'}}>\r\n            <div style={{width: 300, paddingTop: 20}}>\r\n\r\n              {/*equipment*/}\r\n              <SimpleListView style={{width: 300, height: 368, paddingTop: 30}}>\r\n                {entity.inventory.map(eq => <div key={eq.id} style={{width: 290, display: 'flex'}}>\r\n                  <div style={{width: 150, minWidth: 150}}>{eq.item.name}</div>\r\n                  <div style={{width: 70, textAlign: 'center'}}>{ItemElement.calculateWeight(eq)} kg</div>\r\n                  <div style={{width: 50, textAlign: 'center'}}>{eq.amount}</div>\r\n                </div>)}\r\n              </SimpleListView>\r\n              <div style={{paddingLeft: 200}}>{ItemService.inventoryWeight()} kg</div>\r\n\r\n              {/*money*/}\r\n              <SimpleListView style={{width: 285, height: 150, paddingTop: 50}}>\r\n                {entity.money.map(money =>\r\n                                      <div style={{display: 'flex'}}>\r\n                                        <div style={{width: 150}}>{money.currency.name}</div>\r\n                                        <div style={{width: 35, textAlign: 'center'}}>{money.amount.gold}</div>\r\n                                        <div style={{width: 35, textAlign: 'center'}}>{money.amount.silver}</div>\r\n                                        <div style={{width: 50, textAlign: 'center'}}>{money.amount.lead}</div>\r\n                                      </div>\r\n                )}\r\n              </SimpleListView>\r\n\r\n            </div>\r\n\r\n            {/*other description*/}\r\n            <div>\r\n              <SpeedComponent/>\r\n\r\n              {/*personality*/}\r\n              <div style={{width: 350, height: 160, paddingTop: 55, display: 'flex'}}>\r\n\r\n                {/*languages*/}\r\n                <SimpleListView style={{width: 90, height: 100}}>\r\n                  {entity.languages.map(lang => <div>{lang.name}</div>)}\r\n                </SimpleListView>\r\n\r\n                {/*health*/}\r\n                <div style={{width: 130, height: 100, paddingLeft: 10}}>{entity.health}</div>\r\n                <div style={{width: 100, paddingLeft: 10, textAlign: 'center'}}>{entity.sanityPoints}</div>\r\n              </div>\r\n\r\n              {/*history*/}\r\n              <div style={{width: 350}}>\r\n                <div style={{width: 170, height:50, marginLeft: 170, marginTop: 50}}>{entity.nation && entity.nation.name}</div>\r\n                <div style={{width: 120, height: 35, marginTop: 0, marginLeft: 220}}>{entity.parents}</div>\r\n                <div style={{width: 220, height: 80, marginLeft: 110}}>{entity.family}</div>\r\n              </div>\r\n\r\n              {/*religion*/}\r\n              <div style={{width: 350, display: 'flex'}}>\r\n                <div style={{width: 80, height: 60, marginTop: 10, marginLeft: 110}}>{entity.socialLevel}</div>\r\n                <div style={{width: 150, marginTop: 35, marginLeft: 5}}>{entity.religion && entity.religion.name}</div>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            {/*experience*/}\r\n            <div style={{marginLeft: 20, marginTop: 50}}>\r\n              <div style={{marginTop: 20}}>aktualnie:</div>\r\n              <div style={{width: 150, height: 150}}>{entity.experience}</div>\r\n              <div style={{marginTop: 20}}>cakowicie:</div>\r\n              <div style={{width: 150, height: 150}}>{entity.totalExperience}</div>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          {/*animals*/}\r\n          <SimpleListView style={{width: 700}} listStyle={{height: 100}} name={Animal.entityName} propName={'animals'}>\r\n            {entity.animals.map(animal => <AnimalElement animal={animal}/>)}\r\n          </SimpleListView>\r\n\r\n        </div>\r\n      </div>\r\n\r\n      <Menu anchorEl={this.state.anchorEl}\r\n            open={this.state.currentElement && this.state.anchorEl !== null}\r\n            onClose={this.handleClose}>\r\n        {\r\n          this.state.currentElement && this.state.currentElement.map(elementName =>\r\n            <MenuItem onClick={() => {\r\n              this.handleClose();\r\n              this.state[elementName + 'Action']();\r\n            }}>{t(elementName)}</MenuItem>\r\n          )\r\n        }\r\n      </Menu>\r\n    </div>;\r\n  }\r\n}\r\n\r\nCharacterSheetView.propTypes = {\r\n  classes: PropTypes.object\r\n};\r\n\r\nexport default withStyles(styles)(withTranslation()(CharacterSheetView));","import {TextField} from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport {State} from \"../state/State\";\r\nimport ActionTimeField from \"./field/ActionTimeField\";\r\nimport BlueprintSelect from \"./field/BlueprintSelect\";\r\nimport DeterminantField from \"./field/DeterminantField\";\r\nimport EntitySelect from \"./field/EntitySelect\";\r\nimport EnumSelect from \"./field/EnumSelect\";\r\nimport IntegerField from \"./field/IntegerField\";\r\nimport ModifierField from \"./field/ModifierField\";\r\nimport PriceField from \"./field/PriceField\";\r\nimport RaceDeterminantsField from \"./field/RaceDeterminantsField\";\r\nimport FormFieldData from \"./FormFieldData\";\r\nimport {FormFieldType} from \"./FormFieldType\";\r\nimport CharacterSheetForm from \"./sheet/CharacterSheetForm\";\r\nimport CharacterSheetView from \"./sheet/CharacterSheetView\";\r\n\r\nconst basicStyle = {\r\n    root: {\r\n        display: 'flex',\r\n    },\r\n    field: {\r\n        width: '100%',\r\n    }\r\n};\r\n\r\nexport const CreateFormField = (fieldData: FormFieldData, t, editable) => {\r\n    const {name, type, suggestions, toView, toModel} = fieldData;\r\n    const entity = State.data.entity;\r\n    let value = entity[name];\r\n    value = toView ? toView(value) : value;\r\n    const onUpdate = updateProperty(name, toModel);\r\n\r\n    switch (type) {\r\n        case FormFieldType.TEXT:\r\n            return <TextField key={name} label={t(name)} value={value || ''} onChange={onUpdate} style={basicStyle.field} InputProps={{readOnly: !editable}}/>;\r\n\r\n        case FormFieldType.PASSWORD:\r\n            return <TextField key={name} label={t(name)} value={value || ''} onChange={onUpdate} style={basicStyle.field} type={'password'} InputProps={{readOnly: !editable}}/>;\r\n\r\n        case FormFieldType.TEXT_AREA:\r\n            return <TextField key={name} label={t(name)} value={value || ''} onChange={onUpdate} multiline style={basicStyle.field} InputProps={{readOnly: !editable}}/>;\r\n\r\n        case FormFieldType.INTEGER:\r\n            return <IntegerField key={name} label={t(name)} value={value || ''} onChange={onUpdate} style={basicStyle.field} InputProps={{readOnly: !editable}}/>;\r\n\r\n        case FormFieldType.FLOAT:\r\n            return <TextField key={name} label={t(name)} value={value || ''} type={'number'} onChange={onUpdate} style={basicStyle.field} InputProps={{readOnly: !editable}}/>;\r\n\r\n        case FormFieldType.DETERMINANT:\r\n            return <DeterminantField key={name} name={name} value={value} editable={editable}/>;\r\n\r\n        case FormFieldType.ENTITY_SELECT:\r\n            return <EntitySelect key={name} name={name} suggestions={suggestions} editable={editable}/>;\r\n\r\n        case FormFieldType.ENTITY_COMBOBOX:\r\n            return <EntitySelect key={name} name={name} suggestions={suggestions} multi editable={editable}/>;\r\n\r\n        case FormFieldType.ENUM_SELECT:\r\n            return <EnumSelect key={name} name={name} suggestions={suggestions} value={value} editable={editable}/>;\r\n\r\n        case FormFieldType.ENUM_COMBOBOX:\r\n            return <EnumSelect key={name} name={name} suggestions={suggestions} value={value} multi editable={editable}/>;\r\n\r\n        case FormFieldType.PRICE:\r\n            return <PriceField key={name} name={name} editable={editable}/>;\r\n\r\n        case FormFieldType.ACTION_TIME:\r\n            return <ActionTimeField key={name} name={name} editable={editable}/>;\r\n\r\n        case FormFieldType.MODIFIER:\r\n            return <ModifierField id={name} name={name} value={value} editable={editable}/>;\r\n\r\n        case FormFieldType.BLUEPRINT_SELECT:\r\n            return <BlueprintSelect key={name} name={name} suggestions={suggestions} editable={editable}/>;\r\n\r\n        case FormFieldType.RACE_DETERMINANTS:\r\n            return <RaceDeterminantsField key={name}/>;\r\n\r\n        case FormFieldType.CHARACTER_SHEET:\r\n            return editable ? <CharacterSheetForm/> : <CharacterSheetView/>;\r\n    }\r\n    throw fieldData;\r\n};\r\n\r\nconst updateProperty = (propName: string, toModel: func) => event => {\r\n    const newValue = event.target ? event.target.value : event;\r\n    const value = toModel ? toModel(newValue) : newValue;\r\n    const entity = State.data.entity;\r\n    entity.updateWith({[propName]: value});\r\n    State.update({entity: entity});\r\n};\r\n","import Grid from \"@material-ui/core/Grid\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport {Cancel, KeyboardReturn, Save} from \"@material-ui/icons\";\r\nimport {func} from \"prop-types\";\r\nimport React, {Component} from \"react\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport {State} from \"../state/State\";\r\nimport AuthoritiesService from \"../user/AuthoritiesService\";\r\nimport {CreateFormField} from \"./FormFieldGenerator\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        width: '95%',\r\n        margin: 'auto',\r\n    }\r\n});\r\n\r\nclass EntityEditor extends Component {\r\n    saveForm = () => {\r\n        const {entity, entityName} = this.props;\r\n        State.services[entityName].save(entity, () => State.showTable(entityName));\r\n    };\r\n\r\n    getFormFields = (): Component[] => {\r\n        const {entityName, t} = this.props;\r\n        const editable = AuthoritiesService.hasAuthority(entityName);\r\n        return State.formFields[entityName]\r\n            .map(field => CreateFormField(field, t, editable))\r\n            .map(component => <Grid key={component.key} item>{component}</Grid>);\r\n    };\r\n\r\n    updateEntity = (propName: string, toModel: func) => event => {\r\n        const value = toModel ? toModel(event.target.value) : event.target.value;\r\n        this.updateForm({[propName]: value})\r\n    };\r\n    updateForm = (updates) => {\r\n        this.props.entity.updateWith(updates);\r\n        this.setState({entity: this.props.entity});\r\n    };\r\n\r\n    render() {\r\n        const {entityName, classes} = this.props;\r\n        const hasAuthority = AuthoritiesService.hasAuthority(entityName);\r\n\r\n        return <Grid container direction={\"column\"} className={classes.root}>\r\n            {this.getFormFields()}\r\n            <Grid item>\r\n                { hasAuthority ?\r\n                    [\r\n                        <IconButton onClick={this.saveForm}><Save/></IconButton>,\r\n                        <IconButton onClick={() => State.showTable(entityName)}><Cancel/></IconButton>\r\n                    ] :\r\n                    <IconButton onClick={() => {\r\n                        if (State.data.afterForm) {\r\n                            State.data.afterForm()\r\n                        } else {\r\n                            State.showTable(entityName)\r\n                        }\r\n                    }}><KeyboardReturn/></IconButton>}\r\n\r\n            </Grid>\r\n        </Grid>\r\n    }\r\n}\r\n\r\nexport default withTranslation()(withStyles(styles)(EntityEditor));","import {FormFieldType} from \"../../form/FormFieldType\";\r\nimport Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport Nation from \"./Nation\";\r\n\r\nexport default class Place extends Entity {\r\n  static entityName: string = 'place';\r\n\r\n  name: string;\r\n  description: string;\r\n  nation: Nation;\r\n\r\n  updateWith(entity: *): Place {\r\n    super.updateWith(entity);\r\n    this.updateEntityProp('nation', () => new Nation());\r\n    return this;\r\n  }\r\n}\r\n\r\nRegisterEntity(Place,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('description', FormFieldType.TEXT_AREA),\r\n                CreateColumn('nation', FormFieldType.ENTITY_SELECT),],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('description', FormFieldType.TEXT_AREA),\r\n                CreateFormField('nation', FormFieldType.ENTITY_SELECT, Nation.entityName),]);","import {FormFieldType} from \"../form/FormFieldType\";\r\nimport Entity, {CreateColumn, RegisterEntity} from \"../model/Entity\";\r\nimport Place from \"../model/world/Place\";\r\n\r\nexport default class Picture extends Entity {\r\n  static entityName = 'picture';\r\n\r\n  name: string;\r\n  place: Place;\r\n\r\n  updateWith(entity: *): Picture {\r\n    super.updateWith(entity);\r\n    this.updateEntityProp('place', () => new Place());\r\n    return this;\r\n  }\r\n}\r\n\r\nRegisterEntity(Picture,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('place', FormFieldType.ENTITY_SELECT)],\r\n               []);","import {Button, IconButton, TextField} from \"@material-ui/core\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {Cancel} from \"@material-ui/icons\";\r\nimport {DropzoneArea} from \"material-ui-dropzone\";\r\nimport React, {Component} from \"react\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport PictureService from \"../client/PictureService\";\r\nimport EntitySelect from \"../form/field/EntitySelect\";\r\nimport Place from \"../model/world/Place\";\r\nimport {State} from \"../state/State\";\r\nimport AuthoritiesService from \"../user/AuthoritiesService\";\r\nimport Picture from \"./Picture\";\r\n\r\nconst pictureService = new PictureService();\r\n\r\nclass PictureUploadForm extends Component {\r\n  onResponse = () => {\r\n    State.showTable(Picture.entityName);\r\n    State.services.picture.loadData();\r\n  };\r\n\r\n  upload = files => {\r\n    const selectedFile = files[0];\r\n    if (!selectedFile) {\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', selectedFile);\r\n\r\n    pictureService.uploadPicture(formData, this.onResponse);\r\n  };\r\n\r\n  setName = event => {\r\n    const value           = event.target.value;\r\n    this.props.value.name = value;\r\n    this.setState({name: value});\r\n  };\r\n\r\n  setPlace = place => {\r\n    this.props.value.place = place;\r\n    this.setState({place: place});\r\n  };\r\n\r\n  save = () => {\r\n    const value   = this.props.value;\r\n    const updates = {id: value.id, name: value.name};\r\n    if (value.place) {\r\n      updates.placeId = value.place.id;\r\n    }\r\n\r\n    pictureService.updateMetadata(updates, this.onResponse);\r\n  };\r\n\r\n  render() {\r\n    const {value, t}   = this.props;\r\n    const hasAuthority = AuthoritiesService.hasAuthority(Picture.entityName);\r\n\r\n    return <div style={{margin: 10}}>\r\n      {value ?\r\n\r\n          <Grid container spacing={2}>\r\n            <Grid item container xs={12} alignItems={\"center\"}>\r\n              <Grid item xs={4}>\r\n                <TextField value={value ? value.name : ''} onChange={this.setName}\r\n                           disabled={!value}/>\r\n              </Grid>\r\n              <Grid item xs={6}>\r\n                <EntitySelect name={Place.entityName} onChange={this.setPlace} value={value.place}\r\n                              editable/>\r\n              </Grid>\r\n              <Grid item xs={2}>{hasAuthority ?\r\n                  <Button onClick={this.save}>{t('save')}</Button> :\r\n                  <div/>}\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <img src={Picture.entityName + '/' + value.id} alt={value.name}\r\n                   style={{maxWidth: '80vw', maxHeight: '50vh'}}/>\r\n            </Grid>\r\n          </Grid> :\r\n\r\n          <DropzoneArea acceptedFiles={['image/jpeg', 'image/jpg', 'image/png']}\r\n                        onChange={this.upload}/>}\r\n\r\n      <IconButton onClick={() => State.showTable(Picture.entityName)}>\r\n        <Cancel/>\r\n      </IconButton>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(PictureUploadForm);","import RemoteService from \"./RemoteService\";\r\nimport Picture from \"../img/Picture\";\r\n\r\nexport default class PictureService extends RemoteService {\r\n  uploadPicture(picture: object, onResponse: VoidFunction) {\r\n    this.rawPostRequest(Picture.entityName, picture, onResponse);\r\n  }\r\n\r\n  updateMetadata(updates: object, onResponse: VoidFunction) {\r\n    this.postRequestWithoutResponse(updates, Picture.entityName, onResponse)\r\n  }\r\n}","import {FormFieldType} from \"../../form/FormFieldType\";\r\nimport Person from \"../creature/Person\";\r\nimport Entity, {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport Place from \"../world/Place\";\r\nimport Realm from \"./Realm\";\r\n\r\nexport default class Scenario extends Entity {\r\n  static entityName: string = 'scenario';\r\n\r\n  name: string;\r\n  realm: Realm;\r\n  places: Place[]   = [];\r\n  persons: Person[] = [];\r\n\r\n  updateWith(entity: Scenario): Scenario {\r\n    this.updateProp(entity, 'id');\r\n    this.updateProp(entity, 'uuid');\r\n    this.updateProp(entity, 'name');\r\n    this.updateEntityProp(entity, 'realm', () => new Realm());\r\n    this.updateEntityList(entity, 'places', () => new Place());\r\n    this.updateEntityList(entity, 'persons', () => new Person());\r\n    return this;\r\n  }\r\n}\r\n\r\nRegisterEntity(Scenario,\r\n               [CreateColumn('name', FormFieldType.TEXT),\r\n                CreateColumn('realm', FormFieldType.ENTITY_SELECT),],\r\n               [CreateFormField('name', FormFieldType.TEXT),\r\n                CreateFormField('realm', FormFieldType.ENTITY_SELECT, Realm.entityName),\r\n                CreateFormField('places', FormFieldType.ENTITY_COMBOBOX, Place.entityName),\r\n                CreateFormField('persons', FormFieldType.ENTITY_COMBOBOX, Person.entityName),]);","import Button from \"@material-ui/core/Button\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport React, {Component} from \"react\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport Carousel, {ModalGateway} from \"react-images\";\r\nimport ScenarioService from \"../client/ScenarioService\";\r\nimport EntitySelect from \"../form/field/EntitySelect\";\r\nimport Scenario from \"../model/realm/Scenario\";\r\nimport Person from \"../model/creature/Person\";\r\nimport {State} from \"../state/State\";\r\n\r\nclass ScenarioView extends Component {\r\n  state = {\r\n    currentScenario: undefined,\r\n    images: [],\r\n    imgStyle: {maxWidth: '40vw', height: '30vh'},\r\n    viewerIsOpen: false,\r\n    currentImage: null,\r\n  };\r\n\r\n  fetchImages = scenario => {\r\n    ScenarioService.fetchPicturesForScenario(scenario, data => {\r\n      const images = data.map(num => `picture/${num}`);\r\n      this.setState({images: images})\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const entity                                         = State.data.entity;\r\n    const {images, imgStyle, viewerIsOpen, currentImage} = this.state;\r\n\r\n    return <div style={{paddingTop: 10}}>\r\n      {entity ? <Grid container spacing={2}>\r\n        <Grid item container xs={3}>\r\n          {entity.persons.map(person => <Grid item xs={3}>\r\n            <Button onClick={() => {\r\n              State.showForm(Person.entityName, person);\r\n              State.update({afterForm: () => State.updateScenario(entity)})\r\n            }}>{person.name}</Button>\r\n          </Grid>)}\r\n        </Grid>\r\n        <Grid item container xs={9} spacing={2}>\r\n          {images.map((url, index) => <Grid item><Paper elevation={6}>\r\n            <img src={url} alt={url} style={imgStyle}\r\n                 onClick={() => this.setState({currentImage: index, viewerIsOpen: true})}/>\r\n          </Paper></Grid>)}\r\n        </Grid>\r\n      </Grid> : <div>\r\n        <EntitySelect name={Scenario.entityName}\r\n                      onChange={scenario => {\r\n                        State.updateScenario(scenario);\r\n                        this.fetchImages(scenario);\r\n                      }} value={null} editable/>\r\n      </div>}\r\n      <ModalGateway>\r\n        <Modal onClose={() => this.setState({viewerIsOpen: false, currentImage: null})}\r\n               open={viewerIsOpen}>\r\n          <Carousel currentIndex={currentImage} views={images.map(src => ({source: src}))}/>\r\n        </Modal>\r\n      </ModalGateway>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(ScenarioView);","import Picture from \"../img/Picture\";\r\nimport Scenario from \"../model/realm/Scenario\";\r\n\r\nexport default class ScenarioService {\r\n  static fetchPicturesForScenario(scenario: Scenario, onData: number[] => void) {\r\n    fetch(`${Picture.entityName}/${Scenario.entityName}/${scenario.id}`, {\r\n      method: 'get',\r\n    }).then(response => {\r\n      if (response.ok) {\r\n        response.json().then(onData);\r\n      } else {\r\n        alert(response.status);\r\n      }\r\n    });\r\n  }\r\n}","import IconButton from \"@material-ui/core/IconButton\";\r\nimport {Add, Delete, Edit, OpenInNew} from \"@material-ui/icons\";\r\nimport MUIDataTable from \"mui-datatables\";\r\nimport React, {Component} from \"react\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport {State} from \"../state/State\";\r\nimport AuthoritiesService from \"../user/AuthoritiesService\";\r\n\r\nclass Table extends Component {\r\n  options = {\r\n    filterType: 'textField',\r\n    selectableRows: \"single\",\r\n    selectableRowsOnClick: true,\r\n    disableToolbarSelect: true,\r\n    selectableRowsHeader: false,\r\n    customToolbarSelect: (selectedRows, displayData, setSelectedRows) => {\r\n      if (selectedRows.data.length > 0) {\r\n        const entityName = State.data.showTable;\r\n        const entity     = State.data[entityName][selectedRows.data[0].dataIndex];\r\n\r\n        if (AuthoritiesService.hasAuthority(entityName)) {\r\n          return <React.Fragment>\r\n            <div>\r\n              <IconButton onClick={() => State.showForm(entityName, entity)}><Edit/></IconButton>\r\n              <IconButton\r\n                  onClick={() => State.services[entityName].delete(entity)}><Delete/></IconButton>\r\n            </div>\r\n          </React.Fragment>;\r\n        } else {\r\n            return <React.Fragment>\r\n                <IconButton onClick={() => State.showForm(entityName, entity)}><OpenInNew/></IconButton>\r\n            </React.Fragment>\r\n        }\r\n      }\r\n      return <React.Fragment/>\r\n    }\r\n  };\r\n\r\n  translateColumns = columns => {\r\n    const {t} = this.props;\r\n    columns.forEach(column => column.label = t(column.name));\r\n    return columns;\r\n  };\r\n\r\n  render() {\r\n    const {showTable} = State.data;\r\n    const {t} = this.props;\r\n    const hasAuthority = AuthoritiesService.hasAuthority(showTable);\r\n\r\n    const title = <div>\r\n      {t(showTable)}\r\n      {hasAuthority ? <IconButton onClick={() => State.update({\r\n                                                                showTable: null,\r\n                                                                showForm: showTable,\r\n                                                                entity: State.suppliers[showTable]()\r\n      })}>\r\n        <Add/>\r\n      </IconButton> : <div/>}\r\n    </div>;\r\n\r\n    return <MUIDataTable title={title}\r\n                         options={this.options}\r\n                         columns={this.translateColumns(State.columns[showTable])}\r\n                         data={State.data[showTable]}/>\r\n  }\r\n}\r\n\r\nexport default withTranslation()(Table);","import React, {Component} from \"react\";\r\nimport EntityEditor from \"../form/EntityEditor\";\r\nimport PictureUploadForm from \"../img/PictureUploadForm\";\r\nimport ScenarioView from \"../scenario/ScenarioView\";\r\nimport {State} from \"../state/State\";\r\nimport Table from \"./Table\";\r\n\r\nclass ContentPane extends Component {\r\n  render() {\r\n    const {showTable, showForm, showScenario, entity} = State.data;\r\n    let content                                       = <div/>;\r\n\r\n    if (showTable) {\r\n      content = <Table/>\r\n    } else if (showForm) {\r\n      if (showForm === 'picture') {\r\n        content = <PictureUploadForm value={entity.id ? entity : undefined}/>\r\n      } else {\r\n        content = <EntityEditor entity={entity} entityName={showForm}/>\r\n      }\r\n    } else if (showScenario) {\r\n      content = <ScenarioView/>\r\n    }\r\n\r\n    return content;\r\n  }\r\n\r\n}\r\n\r\nexport default ContentPane;","import DeterminantContainer from \"../rule/DeterminantContainer\";\r\nimport Price from \"../world/Price\";\r\nimport {Placement, placementJewelryName} from \"./Placement\";\r\nimport {CreateColumn, CreateFormField, RegisterEntity} from \"../Entity\";\r\nimport {FormFieldType} from \"../../form/FormFieldType\";\r\nimport {availabilityEntityName} from \"./Availability\";\r\nimport Resource from \"./Resource\";\r\n\r\nexport default class Jewelry extends DeterminantContainer {\r\n    static entityName: string = 'jewelry';\r\n\r\n    name: string;\r\n    description: string;\r\n    weight: number;\r\n    price: Price = new Price();\r\n    availability: string = 'COMMON';\r\n    primaryResource: Resource;\r\n    secondaryResource: Resource;\r\n    placement: string = Placement.NECK;\r\n\r\n    updateWith(entity: *): Jewelry {\r\n        super.updateWith(entity);\r\n        this.updateEntityProp(entity, 'price', () => new Price());\r\n        this.updateEntityProp(entity, 'primaryResource', () => new Resource());\r\n        this.updateEntityProp(entity, 'secondaryResource', () => new Resource());\r\n        return this;\r\n    }\r\n}\r\n\r\nRegisterEntity(Jewelry, [\r\n    CreateColumn('name', FormFieldType.TEXT),\r\n    CreateColumn('description', FormFieldType.TEXT_AREA),\r\n    CreateColumn('price', FormFieldType.PRICE),\r\n    CreateColumn('availability', FormFieldType.TEXT),\r\n], [\r\n    CreateFormField('name', FormFieldType.TEXT),\r\n    CreateFormField('description', FormFieldType.TEXT_AREA),\r\n    CreateFormField('weight', FormFieldType.FLOAT),\r\n    CreateFormField('price', FormFieldType.PRICE),\r\n    CreateFormField('availability', FormFieldType.ENUM_SELECT, availabilityEntityName),\r\n    CreateFormField('primaryResource', FormFieldType.ENTITY_SELECT, Resource.entityName),\r\n    CreateFormField('secondaryResource', FormFieldType.ENTITY_SELECT, Resource.entityName),\r\n    CreateFormField('placement', FormFieldType.ENUM_SELECT, placementJewelryName),\r\n]);","import React, {Component} from \"react\";\r\nimport {Button, Menu} from \"@material-ui/core\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport {State} from \"../state/State\";\r\n\r\nclass MenuComponent extends Component {\r\n    state = {\r\n        anchorEl: null\r\n    };\r\n\r\n    handleClick = event => {\r\n        this.setState({anchorEl: event.currentTarget})\r\n    };\r\n\r\n    handleClose = () => {\r\n        this.setState({anchorEl: null})\r\n    };\r\n\r\n    handleItemClick = entityName => () => {\r\n        this.handleClose();\r\n        State.showTable(entityName);\r\n    };\r\n\r\n    render() {\r\n        const {t, name, entities} = this.props;\r\n        return <div>\r\n            <Button id={name}\r\n                    onClick={this.handleClick}>\r\n                {t(name)}\r\n            </Button>\r\n            <Menu id={name}\r\n                  anchorEl={this.state.anchorEl}\r\n                  open={this.state.anchorEl !== null}\r\n                  onClose={this.handleClose}>\r\n                {\r\n                    entities.map(entityName =>\r\n                        <MenuItem key={entityName} onClick={this.handleItemClick(entityName)}>\r\n                            {t(entityName)}\r\n                        </MenuItem>)\r\n                }\r\n            </Menu>\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default withTranslation()(MenuComponent);","import IconButton from \"@material-ui/core/IconButton\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert'\r\nimport React, {Component} from \"react\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport Picture from \"../img/Picture\";\r\nimport {State} from \"../state/State\";\r\nimport AuthoritiesService from \"../user/AuthoritiesService\";\r\nimport User from \"../user/User\";\r\n\r\nclass ToolsMenu extends Component {\r\n  state = {\r\n    anchorEl: null\r\n  };\r\n\r\n  handleClick = event => {\r\n    this.setState({anchorEl: event.currentTarget})\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({anchorEl: null})\r\n  };\r\n\r\n  showPictureForm = () => {\r\n    this.handleClose();\r\n    State.showTable(Picture.entityName);\r\n  };\r\n\r\n  showScenarioView = () => {\r\n    this.handleClose();\r\n    State.updateScenario(null);\r\n  };\r\n\r\n  showUsersTable = () => {\r\n    this.handleClose();\r\n    State.showTable(User.entityName);\r\n  };\r\n\r\n  render() {\r\n    const {t}     = this.props;\r\n    const isAdmin = AuthoritiesService.hasAuthority('admin');\r\n\r\n    return <div>\r\n      <IconButton aria-label={'More'}\r\n                  aria-owns={this.state.anchorEl !== null ? 'app-tools-menu' : undefined}\r\n                  aria-haspopup={'true'}\r\n                  onClick={this.handleClick}>\r\n        <MoreVertIcon/>\r\n      </IconButton>\r\n\r\n      <Menu id={'app-tools-menu'}\r\n            anchorEl={this.state.anchorEl}\r\n            open={this.state.anchorEl !== null}\r\n            onClose={this.handleClose}>\r\n        {isAdmin && <MenuItem onClick={this.showUsersTable}>{t('user')}</MenuItem>}\r\n        <MenuItem onClick={this.showPictureForm}>{t('picture')}</MenuItem>\r\n        <MenuItem onClick={this.showScenarioView}>{t('scenario')}</MenuItem>\r\n      </Menu>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(ToolsMenu);","import {AppBar, CircularProgress, Toolbar} from \"@material-ui/core\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport React, {Component} from \"react\";\r\nimport {withTranslation} from \"react-i18next\";\r\nimport Select from \"react-select\";\r\nimport Flag from 'react-world-flags';\r\nimport RealmDataService from \"../client/RealmDataService\";\r\nimport Ammunition from \"../model/crafting/Ammunition\";\r\nimport Armor from \"../model/crafting/Armor\";\r\nimport ArmorBlueprint from \"../model/crafting/ArmorBlueprint\";\r\nimport ArmorPattern from \"../model/crafting/ArmorPattern\";\r\nimport Item from \"../model/crafting/Item\";\r\nimport Jewelry from \"../model/crafting/Jewelry\";\r\nimport MeleeWeapon from \"../model/crafting/MeleeWeapon\";\r\nimport MeleeWeaponBlueprint from \"../model/crafting/MeleeWeaponBlueprint\";\r\nimport RangedWeapon from \"../model/crafting/RangedWeapon\";\r\nimport RangedWeaponBlueprint from \"../model/crafting/RangedWeaponBlueprint\";\r\nimport Resource from \"../model/crafting/Resource\";\r\nimport Animal from \"../model/creature/Animal\";\r\nimport AnimalKind from \"../model/creature/AnimalKind\";\r\nimport Character from \"../model/creature/Character\";\r\nimport EyeColor from \"../model/creature/EyeColor\";\r\nimport HairColor from \"../model/creature/HairColor\";\r\nimport Person from \"../model/creature/Person\";\r\nimport PhysicalFeature from \"../model/creature/PhysicalFeature\";\r\nimport Skill from \"../model/knowledge/Skill\";\r\nimport Spell from \"../model/knowledge/Spell\";\r\nimport SpellSchool from \"../model/knowledge/SpellSchool\";\r\nimport Profession from \"../model/professions/Profession\";\r\nimport ProfessionClass from \"../model/professions/ProfessionClass\";\r\nimport Realm from \"../model/realm/Realm\";\r\nimport Scenario from \"../model/realm/Scenario\";\r\nimport Currency from \"../model/world/Currency\";\r\nimport Language from \"../model/world/Language\";\r\nimport Nation from \"../model/world/Nation\";\r\nimport Place from \"../model/world/Place\";\r\nimport Race from \"../model/world/Race\";\r\nimport Religion from \"../model/world/Religion\";\r\nimport {State} from \"../state/State\";\r\nimport AuthoritiesService from \"../user/AuthoritiesService\";\r\nimport MenuComponent from \"./MenuComponent\";\r\nimport ToolsMenu from \"./ToolsMenu\";\r\n\r\nconst styles           = theme => ({\r\n  languageIcon: {\r\n    marginLeft: 'auto', display: 'flex',\r\n  }, realmSelect: {\r\n    width: 200,\r\n  }\r\n});\r\nconst realmDataService = new RealmDataService();\r\n\r\nclass TopMenu extends Component {\r\n\r\n  showTable = entityName => () => {\r\n    State.update({showTable: entityName})\r\n  };\r\n\r\n  render() {\r\n    const {i18n, classes} = this.props;\r\n    const isGameMaster    = AuthoritiesService.hasAuthority('gamemaster');\r\n\r\n    const menuItems = isGameMaster ?\r\n        [<MenuComponent name={'world'}\r\n                        entities={[Nation.entityName,\r\n                                   Currency.entityName,\r\n                                   Language.entityName,\r\n                                   Race.entityName,\r\n                                   Religion.entityName,\r\n                                   Place.entityName,\r\n                                   Realm.entityName,\r\n                                   Scenario.entityName]}/>,\r\n         <MenuComponent name={'knowledge'}\r\n                        entities={[Skill.entityName,\r\n                                   ProfessionClass.entityName,\r\n                                   Profession.entityName,\r\n                                   SpellSchool.entityName,\r\n                                   Spell.entityName,]}/>,\r\n         <MenuComponent name={'crafting'}\r\n                        entities={[Item.entityName,\r\n                                   Armor.entityName,\r\n                                   MeleeWeapon.entityName,\r\n                                   RangedWeapon.entityName,\r\n                                   Ammunition.entityName,\r\n                                   Jewelry.entityName,]}/>,\r\n         <MenuComponent name={'types'}\r\n                        entities={[ArmorBlueprint.entityName,\r\n                                   MeleeWeaponBlueprint.entityName,\r\n                                   RangedWeaponBlueprint.entityName,\r\n                                   ArmorPattern.entityName,\r\n                                   Resource.entityName,]}/>,\r\n         < MenuComponent name={'creature'}\r\n                         entities={[...(State.data.currentRealm ? [Person.entityName] : []),\r\n                                    ...[Character.entityName,\r\n                                        EyeColor.entityName,\r\n                                        HairColor.entityName,\r\n                                        PhysicalFeature.entityName,\r\n                                        Animal.entityName,\r\n                                        AnimalKind.entityName,]]}/>] :\r\n        <div/>;\r\n\r\n    return <AppBar\r\n        position={\"relative\"}>\r\n      <Toolbar>\r\n        <ToolsMenu/>\r\n        {menuItems}\r\n        <div className={classes.languageIcon}>\r\n          {State.data.fetching.size > 0 && <IconButton><CircularProgress\r\n              color={\"secondary\"}/></IconButton>}\r\n          <Select className={classes.realmSelect}\r\n                  options={State.data.realm}\r\n                  getOptionLabel={option => <div>{option.name}</div>}\r\n                  getOptionValue={option => option.id}\r\n                  filterOption={(option, input) => option.data.name.startsWith(input)}\r\n                  value={State.data.currentRealm}\r\n                  onChange={realm => realmDataService.getRealmData(realm)}\r\n          />\r\n          <IconButton onClick={() => i18n.changeLanguage('en')}><Flag code={'gb'}\r\n                                                                      height={16}/></IconButton>\r\n          <IconButton onClick={() => i18n.changeLanguage('pl')}><Flag code={'pl'}\r\n                                                                      height={16}/></IconButton>\r\n        </div>\r\n      </Toolbar>\r\n    </AppBar>;\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(withTranslation()(TopMenu));\r\n","import Realm from \"../model/realm/Realm\";\r\nimport {State} from \"../state/State\";\r\nimport RemoteService from \"./RemoteService\";\r\n\r\nexport default class RealmDataService extends RemoteService {\r\n  getRealmData = (currentRealm: Realm) => {\r\n    if (currentRealm) {\r\n      this.requestForPath(`realmData/${currentRealm.id}`,\r\n                          data => State.update({currentRealmData: data, currentRealm: currentRealm}));\r\n    }\r\n  };\r\n}","import Picture from \"../img/Picture\";\r\nimport Ammunition      from \"../model/crafting/Ammunition\";\r\nimport MeleeWeapon     from \"../model/crafting/MeleeWeapon\";\r\nimport RangedWeapon    from \"../model/crafting/RangedWeapon\";\r\nimport Animal          from \"../model/creature/Animal\";\r\nimport AnimalKind      from \"../model/creature/AnimalKind\";\r\nimport Person          from \"../model/creature/Person\";\r\nimport Realm from \"../model/realm/Realm\";\r\nimport Scenario from \"../model/realm/Scenario\";\r\nimport Place from \"../model/world/Place\";\r\nimport {State}         from \"./State\";\r\nimport Nation          from \"../model/world/Nation\";\r\nimport Currency        from \"../model/world/Currency\";\r\nimport Language        from \"../model/world/Language\";\r\nimport Race            from \"../model/world/Race\";\r\nimport Religion        from \"../model/world/Religion\";\r\nimport Character       from \"../model/creature/Character\";\r\nimport Skill           from \"../model/knowledge/Skill\";\r\nimport ProfessionClass from \"../model/professions/ProfessionClass\";\r\nimport Profession      from \"../model/professions/Profession\";\r\nimport SpellSchool from \"../model/knowledge/SpellSchool\";\r\nimport Item                  from \"../model/crafting/Item\";\r\nimport {Availability}        from \"../model/crafting/Availability\";\r\nimport ArmorBlueprint        from \"../model/crafting/ArmorBlueprint\";\r\nimport Spell                 from \"../model/knowledge/Spell\";\r\nimport MeleeWeaponBlueprint  from \"../model/crafting/MeleeWeaponBlueprint\";\r\nimport RangedWeaponBlueprint from \"../model/crafting/RangedWeaponBlueprint\";\r\nimport ArmorPattern          from \"../model/crafting/ArmorPattern\";\r\nimport Resource              from \"../model/crafting/Resource\";\r\nimport EyeColor              from \"../model/creature/EyeColor\";\r\nimport HairColor             from \"../model/creature/HairColor\";\r\nimport PhysicalFeature       from \"../model/creature/PhysicalFeature\";\r\nimport Armor                 from \"../model/crafting/Armor\";\r\n\r\nconst DOMAINS = [\r\n    Nation, Currency, Language, Race, Religion, Place,\r\n    Character, EyeColor, HairColor, PhysicalFeature,\r\n    AnimalKind, Animal,\r\n    Skill, SpellSchool, Spell,\r\n    ProfessionClass, Profession,\r\n    Availability,\r\n    Item, Armor, MeleeWeapon, RangedWeapon, Ammunition,\r\n    ArmorBlueprint, MeleeWeaponBlueprint, RangedWeaponBlueprint,\r\n    ArmorPattern, Resource,\r\n    Person, Realm, Scenario,\r\n    Picture,\r\n];\r\n\r\nexport default class DataLoader {\r\n    static refreshData() {\r\n        Object.keys(State.services).forEach(serviceName => State.services[serviceName].loadData());\r\n    }\r\n}","import Button from \"@material-ui/core/Button\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React, {Component} from 'react';\r\nimport {withTranslation} from \"react-i18next\";\r\nimport FormFieldData from \"../form/FormFieldData\";\r\nimport {CreateFormField} from \"../form/FormFieldGenerator\";\r\nimport {FormFieldType} from \"../form/FormFieldType\";\r\nimport DataLoader from \"../state/DataLoader\";\r\nimport {State} from \"../state/State\";\r\nimport AuthoritiesService from \"./AuthoritiesService\";\r\nimport googleLogo from \"./google-logo.png\";\r\n\r\nconst loginFieldData = new FormFieldData();\r\nloginFieldData.name  = 'username';\r\nloginFieldData.type  = FormFieldType.TEXT;\r\n\r\nconst passwordFieldData = new FormFieldData();\r\npasswordFieldData.name  = 'password';\r\npasswordFieldData.type  = FormFieldType.PASSWORD;\r\n\r\nclass LoginComponent extends Component {\r\n  login = () => {\r\n    const user = State.data.entity;\r\n    if (user && user.username && user.password) {\r\n      fetch('login', {\r\n        method: 'post',\r\n        mode: 'cors',\r\n        headers: {'Content-Type': 'application/json'},\r\n        body: JSON.stringify(user)\r\n      })\r\n      .then(res => res.json())\r\n      .then(authData => {\r\n        if (authData) {\r\n          State.updateUser({...authData, token: true});\r\n          AuthoritiesService.updateAdminAuthoritiesIfNeeded();\r\n          DataLoader.refreshData();\r\n        }\r\n      })\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {t}        = this.props;\r\n    const loginField = new FormFieldData();\r\n    loginField.name  = 'username';\r\n\r\n    return <Grid container alignItems={\"center\"} spacing={2} xs={12} direction={\"column\"}>\r\n      <Grid item xs={6}>\r\n        <Typography>WFRP Helper</Typography>\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        {CreateFormField(loginFieldData, t, true)}\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        {CreateFormField(passwordFieldData, t, true)}\r\n      </Grid>\r\n      <Grid item xs={8}>\r\n        <Button onClick={this.login}>{t('login')}</Button>\r\n        <Button>{t('signup')}</Button>\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        <Button>\r\n          <img src={googleLogo} alt={t('login with Google')} style={{width: 50, height: 50}}/>\r\n          <a href={'https://wfrp-helper.ey.r.appspot.com/oauth2/authorize/google?redirect_uri=https://wfrp-helper-frontend-dot-wfrp-helper.ey.r.appspot.com/oauth2/redirect'}\r\n             style={{fontSize: 18}}>{t('login with Google')}</a>\r\n{/*\r\n          <a href={'https://wfrp-helper.ey.r.appspot.com/oauth2/authorize/google?redirect_uri=http://localhost:3000/oauth2/redirect'}\r\n             style={{fontSize: 18}}>{t('login with Google')}</a>\r\n          <a href={'http://localhost:1081/oauth2/authorize/google?redirect_uri=http://localhost:3000/oauth2/redirect'}\r\n             style={{fontSize: 18}}>{t('login with Google')}</a>\r\n*/}\r\n        </Button>\r\n      </Grid>\r\n    </Grid>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(LoginComponent);","import React, {Component} from 'react';\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {State} from \"../state/State\";\r\n\r\nclass OAuth2RedirectComponent extends Component {\r\n  render() {\r\n    const token = new RegExp('[\\\\?&]token=([^&#]*)').exec(this.props.location.search)[1];\r\n    State.updateUser({token: token});\r\n\r\n    return <Redirect to={\"/\"}/>;\r\n  }\r\n}\r\n\r\nexport default OAuth2RedirectComponent;","import Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport React, {Component} from 'react';\r\nimport {withTranslation} from \"react-i18next\";\r\nimport AuthoritiesService from \"./AuthoritiesService\";\r\n\r\nconst authoritiesService = new AuthoritiesService();\r\n\r\nclass PasswordChangeComponent extends Component {\r\n  state = {\r\n    password: null, repeat: null\r\n  };\r\n\r\n  onChange = prop => event => {\r\n    this.setState({[prop]: event.target.value})\r\n  };\r\n\r\n  savePassword = () => {\r\n    const {password, repeat} = this.state;\r\n    if (password === repeat) {\r\n      authoritiesService.updatePassword(password);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {password, repeat} = this.state;\r\n    const {t}                = this.props;\r\n\r\n    return <div>\r\n      <TextField key={'password'}\r\n                 label={t('password')}\r\n                 value={password || ''}\r\n                 type={'password'}\r\n                 onChange={this.onChange('password')}/>\r\n      <TextField key={'passwordRepeat'}\r\n                 label={t('passwordRepeat')}\r\n                 value={repeat || ''}\r\n                 type={'password'}\r\n                 onChange={this.onChange('repeat')}/>\r\n      <Button onClick={this.savePassword}>{t('save')}</Button>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default withTranslation()(PasswordChangeComponent);","import {grey, orange} from \"@material-ui/core/colors\";\r\nimport {createMuiTheme, MuiThemeProvider} from \"@material-ui/core/styles\";\r\nimport React, {Component} from 'react';\r\nimport {Route, Switch} from \"react-router-dom\";\r\nimport ContentPane from \"./content/ContentPane\";\r\nimport TopMenu from \"./menu/TopMenu\";\r\nimport DataLoader from \"./state/DataLoader\";\r\nimport {State} from \"./state/State\";\r\nimport AuthoritiesService from \"./user/AuthoritiesService\";\r\nimport LoginComponent from \"./user/LoginComponent\";\r\nimport OAuth2RedirectComponent from \"./user/OAuth2RedirectComponent\";\r\nimport PasswordChangeComponent from \"./user/PasswordChangeComponent\";\r\nimport User from \"./user/User\";\r\n\r\nconst theme = createMuiTheme({\r\n                               palette: {primary: grey, secondary: orange},\r\n                             });\r\nconst authoritiesService = new AuthoritiesService();\r\n\r\nexport default class App extends Component {\r\n\r\n  constructor(props: P, context: any) {\r\n    super(props, context);\r\n    State.onUpdate = data => {\r\n      this.setState({data: data})\r\n    };\r\n    State.data.entity = new User();\r\n  }\r\n\r\n  render() {\r\n    const {token, oneTimePassword} = State.data.currentUser;\r\n\r\n    if (!token) {\r\n      return <MuiThemeProvider theme={theme}>\r\n        <Switch>\r\n          {/* For static spring build */}\r\n          <Route exact path={\"/index.html\"} component={LoginComponent}/>\r\n          <Route exact path={\"/\"} component={LoginComponent}/>\r\n          <Route path={\"/oauth2/redirect\"} component={OAuth2RedirectComponent}/>\r\n        </Switch>\r\n      </MuiThemeProvider>\r\n    }\r\n\r\n    if (oneTimePassword) {\r\n      return <MuiThemeProvider theme={theme}>\r\n        <PasswordChangeComponent/>\r\n      </MuiThemeProvider>\r\n    }\r\n\r\n    if (!State.data.currentUser.authorities) {\r\n      authoritiesService.refreshAuthorities();\r\n    }\r\n\r\n    if (!State.data.initialized) {\r\n      DataLoader.refreshData();\r\n      State.data.initialized = true;\r\n    }\r\n\r\n    return (<MuiThemeProvider theme={theme}>\r\n      <TopMenu/>\r\n      <ContentPane/>\r\n    </MuiThemeProvider>);\r\n  }\r\n}\r\n"],"sourceRoot":""}