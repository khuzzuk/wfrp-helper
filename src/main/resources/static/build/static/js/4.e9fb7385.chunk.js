(this["webpackJsonpwfrp-helper-web"]=this["webpackJsonpwfrp-helper-web"]||[]).push([[4],{376:function(e,t,a){e.exports=a.p+"static/media/A.8ca41e5c.png"},609:function(e,t,a){e.exports=a.p+"static/media/google-logo.36158af3.png"},659:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Yn}));var n=a(32),i=a(36),s=a(55),r=a(637),l=a(0),o=a.n(l),c=a(3),m=a(109),d=a(348),p=a(129),h=a.n(p),u=a(640),y=a(641),E=a(642),g=(a(13),a(48)),v=a(131);class w{updateWith(e){return Object.assign(this,e),this}updateProp(e,t){"undefined"!==typeof e[t]&&(this[t]=e[t])}updateNumProp(e,t){(e[t]||0===e[t]||""===e[t])&&(this[t]=e[t])}updateEntityProp(e,t,a){e[t]&&(this[t]=a(),this[t].updateWith(e[t]))}updateEntityList(e,t,a){e[t]&&(this[t]=e[t].map(e=>{const t=a();return t.updateWith(e),t}))}}const N="text",f="password",x="text_area",C="boolean",R="integer",T="float",I="enum_select",b="enum_combobox",S="entity_select",L="entity_combobox",O="price",A="action_time",D="determinant",P="modifier",W="blueprint_select",k="race_determinants",F="character_sheet";var V=class{};class H{constructor(e){this.loadData=()=>{U.fetching(this.entityName),fetch(this.entityName,{mode:"cors",headers:{"Access-Control-Allow-Origin":"*"}}).then(this.handleErrors).then(e=>e.json()).then(e=>e.map(e=>U.suppliers[this.entityName]().updateWith(e))).then(e=>{U.update({[this.entityName]:e}),U.fetchingFinished(this.entityName)})},this.save=(e,t)=>{fetch(this.entityName,{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this.handleErrors).then(this.loadData).then(t)},this.handleErrors=e=>{if(200!==e.status){let t=e.json();throw 400===e.status?t.then(e=>{window.confirm(Array.from(new Set(e.errors.map(e=>"cannot set field "+e.field+" with "+e.rejectedValue+", "+e.message))).join("\n"))}):409===e.status?t.then(e=>{window.confirm(e.errors[0].message)}):403!==e.status&&401!==e.status||U.updateUser({token:null}),e}return e},this.entityName=e}delete(e){fetch(this.entityName,{method:"delete",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(this.handleErrors).then(()=>this.loadData())}}var j=class extends w{};const M=(e,t)=>{const a={filter:!1,sort:!1},n={name:e,options:a};switch(t){case N:case T:case R:case C:a.filter=!0,a.sort=!0;break;case O:case P:case A:a.filter=!1,a.sort=!0,a.customBodyRender=e=>e?e.toString():"";break;case S:case L:a.filter=!0,a.sort=!0,a.customBodyRender=e=>e?e.name:"";break;default:a.filter=!1,a.sort=!1}return n},K=(e,t,a,n,i)=>{const s=new V;return s.name=e,s.type=t,s.suggestions=a,s.toView=n,s.toModel=i,s},G=(e,t,a)=>{U.suppliers[e.entityName]=()=>new e,U.services[e.entityName]=new H(e.entityName),U.columns[e.entityName]=t,U.formFields[e.entityName]=a},U={data:{showTable:null,showForm:null,afterForm:null,fetching:new Set,currentUser:{username:null,password:null,token:!0}},services:{},formFields:{},columns:{},suppliers:{},onUpdate:e=>{},update(e){this.data=Object(v.a)({},this.data,{},e),this.onUpdate(this.data)},updateUser(e){this.data.currentUser=Object(v.a)({},this.data.currentUser,{},e),this.onUpdate(this.data)},showTable(e){this.update({entity:null,showForm:null,showTable:e,showScenario:!1})},showForm(e,t){this.update({entity:t,showForm:e,showTable:null,showScenario:!1})},updateScenario(e){this.update({entity:e,showForm:null,showTable:null,showScenario:!0})},updateEntity(e){this.data.entity.updateWith(e),this.update({entity:this.data.entity})},fetching(e){this.data.fetching.add(e),this.update({fetching:this.data.fetching})},fetchingFinished(e){this.data.fetching.delete(e),this.update({fetching:this.data.fetching})}};class B{constructor(){this.handleRawResponse=e=>t=>{200===t.status?t.text().then(e):403===t.status||401===t.status?U.updateUser({token:null}):console.warn(t.status)},this.handleResponse=e=>t=>{200===t.status?t.json().then(e):403===t.status||401===t.status?U.updateUser({token:!1}):console.warn(t.status)}}requestFor(e,t,a){const n=JSON.stringify(e);fetch(t,{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:n}).then(this.handleResponse(a))}postRequestWithoutResponse(e,t,a){const n=JSON.stringify(e);fetch(t,{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:n}).then(this.handleRawResponse(a))}requestForPath(e,t){fetch(e,{method:"get",mode:"cors",headers:{}}).then(this.handleResponse(t))}rawGetRequestFor(e,t){fetch(e,{method:"get",mode:"cors",headers:{}}).then(this.handleRawResponse(t))}rawPostRequest(e,t,a){fetch(e,{method:"post",mode:"cors",headers:{},body:t}).then(this.handleRawResponse(a))}}class _ extends j{}_.entityName="role",U.suppliers.role=()=>new _;class Y extends j{}Y.entityName="user",U.suppliers.user=()=>new Y,U.columns.user=[M("username",N)],U.formFields.user=[K("authorities",L,_.entityName)];const z=new H(Y.entityName),X=new H(_.entityName);class q extends B{refreshAuthorities(){this.requestForPath("authorities",e=>{U.updateUser({authorities:e}),q.updateAdminAuthoritiesIfNeeded()})}static hasAuthority(e){const t=U.data.currentUser.authorities;return t&&t.find(t=>t.authority.toLowerCase().endsWith(e.toLowerCase()))}updatePassword(e){this.postRequestWithoutResponse(Object(v.a)({},U.data.currentUser,{},{password:e}),"password",()=>U.updateUser({oneTimePassword:!1}))}static updateAdminAuthoritiesIfNeeded(){q.hasAuthority("admin")&&(X.loadData(),z.loadData(),U.services.user=z)}}var J=a(333),Q=a(624),Z=a(159),$=a(162);class ee extends l.Component{render(){const e=this.props,t=e.t,a=e.name,n=e.suggestions,i=void 0===n?a:n,s=e.value,r=e.label,l=void 0===r?t(a):r,c=e.data,d=void 0===c?U.data[i]:c,p=e.onChange,h=void 0===p?e=>U.updateEntity({[a]:e}):p,u=e.multi,y=e.editable;return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},o.a.createElement(Q.a,null,l)),o.a.createElement(m.a,{item:!0},o.a.createElement(Z.a,{textFieldProps:{label:l,InputLabelProps:{shrink:!1}},styles:ee.style,options:d,components:Object($.a)(),onChange:h,value:u?s:{label:s,value:s},getOptionLabel:e=>o.a.createElement("div",null,e.label?e.label:"string"===typeof e?e:void 0),getOptionValue:e=>e,isSearchable:!0,isClearable:!0,isMulti:u,isDisabled:!y})))}}ee.style={control:(e,t)=>Object(v.a)({},e,{width:400,marginLeft:10})};var te=Object(g.b)()(ee),ae=a(126);class ne extends l.Component{constructor(...e){super(...e),this.updateInt=e=>t=>{let a=parseInt(t.target.value);(a||0===a)&&e(a)}}render(){const e=this.props,t=e.onChange,a=Object(ae.a)(e,["onChange"]);return o.a.createElement(J.a,Object.assign({type:"number",onChange:this.updateInt(t)},a))}}var ie=ne;const se={ACTION:"ACTION",ROUND:"ROUND",TURN:"TURN",allOf(){return[this.ACTION,this.ROUND,this.TURN]}};class re extends w{constructor(...e){super(...e),this.actionType=se.ACTION,this.amount=1}toString(){switch(this.actionType){case se.ACTION:return this.amount;case se.ROUND:return this.amount+"r";case se.TURN:return this.amount+"t";default:return this.amount}}}class le extends l.Component{constructor(...e){super(...e),this.onUpdate=e=>{const t=this.props,a=t.name,n=t.value,i=void 0===n?U.data.entity[a]:n;Object.assign(i,e),U.updateEntity({[a]:i})}}render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.value,r=void 0===s?U.data.entity[a]:s,l=e.editable;return o.a.createElement(m.a,{container:!0,alignItems:"center",spacing:2},o.a.createElement(m.a,{item:!0},o.a.createElement(Q.a,null,i)),o.a.createElement(m.a,{item:!0},o.a.createElement(te,{key:"actionType",label:t("type"),data:se.allOf(),value:r.type,onChange:e=>this.onUpdate({type:e}),editable:l})),o.a.createElement(m.a,{item:!0},o.a.createElement(ie,{key:"amount",label:t("amount"),value:r.amount,onChange:e=>this.onUpdate({amount:e}),InputProps:{readOnly:!l}})))}}var oe=Object(g.b)()(le);class ce extends l.Component{render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.suggestions,r=void 0===s?a:s,l=e.data,c=void 0===l?U.data[r]:l,d=e.value,p=void 0===d?U.data.entity[a]:d,h=e.onChange,u=void 0===h?e=>U.updateEntity({[a]:e}):h,y=e.editable,E=p?o.a.createElement("div",null,t("price"),": ",p.suggestedPrice.toString(),",",t("wieght"),": ",p.suggestedWeight," kg"):o.a.createElement("div",null);return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},i),o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(Z.a,{textFieldProps:{label:i,InputLabelProps:{shrink:!1}},options:c,components:Object($.a)(),getOptionLabel:e=>o.a.createElement("div",null,e.name),getOptionValue:e=>e.id,filterOption:(e,t)=>e.data.name.startsWith(t),onChange:u,value:p,isDisabled:!y})),o.a.createElement(m.a,{item:!0},E))}}var me=Object(g.b)()(ce),de=a(347),pe=a(346),he=a(633);const ue={K2:"K2",K3:"K3",K4:"K4",K6:"K6",K8:"K8",K10:"K10",K12:"K12",K20:"K20",K100:"K100",allOf(){return[this.K2,this.K3,this.K4,this.K6,this.K8,this.K10,this.K12,this.K20,this.K100]}};class ye extends j{toString(){return this.rolls+this.dice}}U.data.dice=ue.allOf();const Ee={REGULAR:"REGULAR",PROFESSION:"PROFESSION",EXPERIENCE:"EXPERIENCE",DICE:"DICE",allOf(){return[this.REGULAR,this.PROFESSION,this.EXPERIENCE,this.DICE]}};var ge=class extends j{constructor(...e){super(...e),this.type=Ee.REGULAR,this.rolls=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"rolls",()=>new ye),this}toString(){return this.type+" "+this.value+" "+this.rolls.map(e=>e.toString()).join(" ")}};class ve extends j{constructor(...e){super(...e),this.value=0,this.modifiers=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"modifiers",()=>new ge),this}getExperienceExtensions(){return this.modifiers.filter(e=>e.type===Ee.EXPERIENCE)}calculateExperienceValue(){return this.value+this.getExperienceExtensions().reduce((e,t)=>e+t.value,0)}calculateFinalValue(){return this.value+this.modifiers.reduce((e,t)=>e+t.value,0)}}const we={SPEED:"SPEED",BATTLE:"BATTLE",SHOOTING:"SHOOTING",STRENGTH:"STRENGTH",DURABILITY:"DURABILITY",HEALTH:"HEALTH",INITIATIVE:"INITIATIVE",ATTACK:"ATTACK",DEXTERITY:"DEXTERITY",LEADER_SKILLS:"LEADER_SKILLS",INTELLIGENCE:"INTELLIGENCE",CONTROL:"CONTROL",WILL:"WILL",CHARISMA:"CHARISMA",PARRY:"PARRY",OPPONENT_PARRY:"OPPONENT_PARRY",allOf(){return[this.SPEED,this.BATTLE,this.SHOOTING,this.STRENGTH,this.DURABILITY,this.HEALTH,this.INITIATIVE,this.ATTACK,this.DEXTERITY,this.LEADER_SKILLS,this.INTELLIGENCE,this.CONTROL,this.WILL,this.CHARISMA,this.PARRY,this.OPPONENT_PARRY]},personal(){return[this.SPEED,this.BATTLE,this.SHOOTING,this.STRENGTH,this.DURABILITY,this.HEALTH,this.INITIATIVE,this.ATTACK,this.DEXTERITY,this.LEADER_SKILLS,this.INTELLIGENCE,this.CONTROL,this.WILL,this.CHARISMA]}};class Ne extends l.Component{constructor(...e){super(...e),this.updateDiceRoll=e=>{this.props.value.updateWith(e),U.update({currentDiceRollEdit:this.props.value})}}render(){const e=this.props,t=e.value,a=e.id,n=e.editable;return o.a.createElement("div",{key:a},o.a.createElement(te,{key:a+"_type",label:"dice",data:ue.allOf(),value:t.dice,onChange:e=>this.updateDiceRoll({dice:e}),editable:n}),o.a.createElement(ie,{key:a+"_rolls",label:"rolls",value:t.rolls,onChange:e=>this.updateDiceRoll({rolls:e}),InputProps:{readOnly:!n}}))}}class fe extends l.Component{constructor(...e){super(...e),this.update=e=>{this.props.value.updateWith(e),U.update({currentModifierEdit:this.props.value})},this.onAddDiceRoll=()=>{this.props.value.rolls.push(new ye),U.update({currentModifierEdit:this.props.value})}}render(){const e=this.props,t=e.t,a=e.name,n=e.value,i=e.label,s=void 0===i?t(a):i,r=e.id,l=e.types,c=void 0===l?Ee.allOf():l,d=e.editable;let p=o.a.createElement("div",null);return n.type===Ee.DICE&&(p=o.a.createElement(m.a,{item:!0},n.rolls.map(e=>o.a.createElement(Ne,{id:r,key:r,value:e,onChange:()=>U.update({currentModifierEdit:n}),editable:d})),d?o.a.createElement(de.a,{onClick:this.onAddDiceRoll},t("newDice")):o.a.createElement("div",null))),o.a.createElement(m.a,{container:!0,item:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},o.a.createElement(ie,{key:r+"_value",label:s+" \u2013 "+t("value"),value:n.value,onChange:e=>this.update({value:e}),InputProps:{readOnly:!d}})),o.a.createElement(m.a,{item:!0},o.a.createElement(te,{key:r||a+"_type",label:t("modifierType")+" "+a?t(a):n.id,data:c,value:n.type,onChange:e=>this.update({type:e}),editable:d})),p)}}var xe=Object(g.b)()(fe);class Ce extends l.Component{constructor(...e){super(...e),this.deleteItem=e=>{const t=this.props.value;t.splice(t.indexOf(e),1),U.update({currentDeterminantEdit:t})},this.update=(e,t)=>{e.updateWith(t),U.updateEntity({[this.props.name]:this.props.value})},this.addDeterminant=()=>{const e=U.data.entity,t=this.props.name;e[t]?(e[t].push(new ve),U.updateEntity({[t]:e[t]})):U.updateEntity({[t]:[new ve]})},this.addModifierToDeterminant=e=>()=>{e.modifiers.push(new ge),U.updateEntity({[this.props.name]:this.props.value})},this.updateModifier=e=>t=>{e.updateWith(t),U.updateEntity({[this.props.name]:this.props.value})}}render(){const e=this.props,t=e.t,a=e.name,n=e.value,i=e.modifierTypes,s=void 0===i?Ee.allOf():i,r=e.types,l=void 0===r?we.allOf():r,c=e.editable;return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},t(a)),o.a.createElement(m.a,{item:!0,container:!0,spacing:2,alignItems:"center"},n&&n.map(e=>(console.log(e),o.a.createElement(m.a,{item:!0,container:!0,spacing:2,alignItems:"center",key:e.id+e.type},o.a.createElement(m.a,{item:!0},o.a.createElement(te,{key:e.id+e.type,label:t(a)+e.type,data:l,value:e.type,onChange:t=>this.update(e,{type:t}),editable:c})),o.a.createElement(m.a,{item:!0},o.a.createElement(ie,{key:e.id+e.type+"value",label:"value",value:e.value,onChange:t=>this.update(e,{value:t}),InputProps:{readOnly:!c}})),o.a.createElement(m.a,{item:!0,container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},t("modifier")),o.a.createElement(m.a,{item:!0},e.modifiers&&e.modifiers.map(t=>o.a.createElement(pe.a,{key:e.id+e.type+"_"+t.id},o.a.createElement(xe,{id:e.id+e.type+t.id+t.type,value:t,types:s,editable:c})))),o.a.createElement(m.a,{item:!0},c?o.a.createElement(de.a,{onClick:this.addModifierToDeterminant(e)},t("newModifier")):o.a.createElement("div",null))),c?o.a.createElement(d.a,{key:e.id+e.type+"remove",onClick:()=>this.deleteItem(e)},o.a.createElement(he.a,null)):o.a.createElement("div",null))))),o.a.createElement(m.a,{item:!0},c?o.a.createElement(de.a,{onClick:this.addDeterminant},t("newDeterminant")):o.a.createElement("div",null)))}}var Re=Object(g.b)()(Ce);class Te extends l.Component{constructor(...e){super(...e),this.updateEntity=e=>{const t=this.props.name,a=U.data.entity;a.updateWith({[t]:e}),U.update({entity:a})}}render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.suggestions,r=void 0===s?a:s,l=e.data,c=void 0===l?U.data[r]:l,m=e.value,d=void 0===m?U.data.entity[a]:m,p=e.multi,h=void 0!==p&&p,u=e.onChange,y=void 0===u?this.updateEntity:u,E=e.editable;return o.a.createElement("div",null,o.a.createElement(Q.a,null,i),o.a.createElement(Z.a,{textFieldProps:{label:i,InputLabelProps:{shrink:!1}},options:c,components:Object($.a)(),getOptionLabel:e=>o.a.createElement("div",null,e.name||e.authority),getOptionValue:e=>e.id,filterOption:(e,t)=>!e.data.name||e.data.name.startsWith(t),onChange:y,value:d,isMulti:h,isDisabled:!E}))}}var Ie=Object(g.b)()(Te);class be extends l.Component{constructor(...e){super(...e),this.updatePrice=(e,t)=>a=>{const n=this.props,i=n.name,s=n.value,r=void 0===s?U.data.entity[i]:s;let l=parseInt(a.target.value);(l||0===l)&&e(Object(v.a)({},r,{},{[t]:l}))}}render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.onChange,r=void 0===s?e=>U.updateEntity({[a]:e}):s,l=e.value,c=void 0===l?U.data.entity[a]:l,d=e.editable;return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},o.a.createElement(Q.a,{style:{marginRight:10}},i)),o.a.createElement(m.a,{item:!0},o.a.createElement(J.a,{label:t("gold"),type:"number",value:c.gold,onChange:this.updatePrice(r,"gold"),InputProps:{readOnly:!d}})),o.a.createElement(m.a,{item:!0},o.a.createElement(J.a,{label:t("silver"),type:"number",value:c.silver,onChange:this.updatePrice(r,"silver"),InputProps:{readOnly:!d}})),o.a.createElement(m.a,{item:!0},o.a.createElement(J.a,{label:t("lead"),type:"number",value:c.lead,onChange:this.updatePrice(r,"lead"),InputProps:{readOnly:!d}})))}}var Se=Object(g.b)()(be);const Le=["SPEED","BATTLE","SHOOTING","STRENGTH","DURABILITY","HEALTH","INITIATIVE","ATTACK","DEXTERITY","LEADER_SKILLS","INTELLIGENCE","CONTROL","WILL","CHARISMA"];class Oe extends l.Component{constructor(...e){super(...e),this.regenerateDeterminants=e=>{e.determinants&&0!==e.determinants.length?(e.determinants.filter(e=>!e.modifiers).forEach(e=>{e.modifiers=[new ge]}),e.determinants.filter(e=>0===e.modifiers.length).forEach(e=>e.modifiers.push(new ge))):Le.forEach(t=>{const a=new ge;a.type=Ee.DICE;const n=new ve;n.type=t,n.modifiers.push(a),e.determinants.push(n)})},this.updateDiceType=e=>t=>{t||1!==e.modifiers[0].rolls.length?t&&0===e.modifiers[0].rolls.length?(e.modifiers[0].rolls.push(new ye),e.modifiers[0].rolls[0].dice=t):e.modifiers[0].rolls[0].dice=t:e.modifiers[0].rolls.length=0,U.updateEntity(U.data.entity)},this.updateDiceRolls=e=>t=>{0===t&&1===e.modifiers[0].rolls.length?e.modifiers[0].rolls.length=0:t>0&&0===e.modifiers[0].rolls.length?(e.modifiers[0].rolls.push(new ye),e.modifiers[0].rolls[0].rolls=t):e.modifiers[0].rolls[0].rolls=t,U.updateEntity(U.data.entity)},this.updateBasicModifier=e=>t=>{e.modifiers[0].value=t,U.updateEntity(U.data.entity)}}render(){const e=this.props.t,t=U.data.entity;this.regenerateDeterminants(t);const a=t.determinants.map(t=>[o.a.createElement(m.a,{item:!0,xs:1},e(t.type)),o.a.createElement(m.a,{item:!0,xs:3},o.a.createElement(te,{name:"dice",value:t.modifiers[0].rolls.length&&t.modifiers[0].rolls[0].dice,editable:!0,onChange:this.updateDiceType(t)})),o.a.createElement(m.a,{item:!0,xs:1},e("rolls")," ",o.a.createElement(ie,{value:t.modifiers[0].rolls.length&&t.modifiers[0].rolls[0].rolls,onChange:this.updateDiceRolls(t)})),o.a.createElement(m.a,{item:!0,xs:1},e("plus")," ",o.a.createElement(ie,{value:t.modifiers[0].value,onChange:this.updateBasicModifier(t)}))]);return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},a.map(e=>o.a.createElement(m.a,{item:!0,container:!0,xs:12,alignItems:"center"},e)))}}var Ae=Object(g.b)()(Oe),De=a(379),Pe=a(432),We=a(380),ke=a(268);class Fe extends j{updateWith(e){return super.updateWith(e)}}Fe.entityName="skill",G(Fe,[M("name",N),M("description",x)],[K("name",N),K("description",x)]);class Ve extends j{constructor(...e){super(...e),this.skills=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"skills",()=>new Fe),this}}Ve.entityName="professionClass",G(Ve,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("skills",L,Fe.entityName)]);class He extends j{constructor(...e){super(...e),this.determinants=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"determinants",()=>new ve),this}}class je extends He{constructor(...e){super(...e),this.skills=[],this.nextProfessions=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"professionClass",()=>new Ve),this.updateEntityList(e,"skills",()=>new Fe),this}}je.entityName="profession",G(je,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("professionClass",S,Ve.entityName),K("determinants",D),K("skills",L,Fe.entityName),K("nextProfessions",b,je.entityName)]);class Me{constructor(){this.determinants=[];const e=new ve;e.type=we.SPEED;const t=new ve;t.type=we.BATTLE;const a=new ve;a.type=we.SHOOTING;const n=new ve;n.type=we.STRENGTH;const i=new ve;i.type=we.DURABILITY;const s=new ve;s.type=we.HEALTH;const r=new ve;r.type=we.ATTACK;const l=new ve;l.type=we.INITIATIVE;const o=new ve;o.type=we.DEXTERITY;const c=new ve;c.type=we.LEADER_SKILLS;const m=new ve;m.type=we.INTELLIGENCE;const d=new ve;d.type=we.CONTROL;const p=new ve;p.type=we.WILL;const h=new ve;h.type=we.CHARISMA,this.determinants.push(e,t,a,n,i,s,r,l,o,c,m,d,p,h)}updateWith(e){return e.determinants&&e.determinants.forEach(e=>{const t=new ve;t.updateWith(e),this.replaceDeterminant(t)}),this}updateDeterminantValue(e,t){this.findDeterminant(t).value=e}findDeterminant(e){return this.determinants.find(t=>e===t.type)}replaceDeterminant(e){const t=this.findDeterminant(e.type);let a=this.determinants.indexOf(t);this.determinants.splice(a,1),this.determinants.push(e)}}const Ke=["ABUNDANT","PLENTIFUL","COMMON","AVERAGE","SCARCE","RARE","VERY_RARE"];U.data.availability=Ke;class Ge extends j{constructor(...e){super(...e),this.availability=Ke[0]}}Ge.entityName="armorPattern",G(Ge,[M("name",N),M("description",x),M("strength",R),M("availability",N)],[K("name",N),K("description",x),K("priceMultiplier",T),K("weight",T),K("strength",T),K("availability",I,"availability")]);class Ue extends w{constructor(...e){super(...e),this.gold=0,this.silver=0,this.lead=0}toString(){return this.gold+" "+this.silver+" "+this.lead}}U.suppliers.price=()=>new Ue;class Be extends j{constructor(...e){super(...e),this.availability="COMMON"}}Be.entityName="resource",G(Be,[M("name",N),M("description",x),M("priceMultiplier",T),M("durability",T),M("strength",T),M("availability",N)],[K("name",N),K("description",x),K("priceMultiplier",T),K("weight",T),K("durability",T),K("strength",T),K("availability",I,"availability")]);const _e={BODY:"BODY",HEAD:"HEAD",TORSO:"TORSO",HAND:"HAND",LEG:"LEG",BELT:"BELT",NECK:"NECK",FINGER:"FINGER",SHIELD:"SHIELD",BOTH_HANDS:"BOTH_HANDS",allOf(){return[this.BODY,this.HEAD,this.TORSO,this.HAND,this.LEG,this.BELT,this.NECK,this.FINGER,this.SHIELD,this.BOTH_HANDS]},armor(){return[this.BODY,this.HEAD,this.TORSO,this.HAND,this.LEG,this.BELT,this.SHIELD]},weapon(){return[this.HAND,this.BOTH_HANDS,this.SHIELD]},jewelry(){return[this.NECK,this.FINGER]}};U.data.placement=_e.allOf(),U.data.placementArmor=_e.armor(),U.data.placementWeapon=_e.weapon(),U.data.placementJewelry=_e.jewelry();class Ye extends He{constructor(...e){super(...e),this.suggestedPrice=new Ue,this.placement=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"suggestedPrice",()=>new Ue),this}}Ye.entityName="armorBlueprint",G(Ye,[M("name",N),M("description",x),M("armor",R),M("placement",N),M("suggestedPrice",O)],[K("name",N),K("description",x),K("armor",R),K("suggestedPrice",O),K("suggestedWeight",R),K("placement",b,"placementArmor"),K("determinants",D)]);class ze extends He{constructor(...e){super(...e),this.price=new Ue,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ue),this.updateEntityProp(e,"primaryResource",()=>new Be),this.updateEntityProp(e,"secondaryResource",()=>new Be),this.updateEntityProp(e,"type",()=>new Ye),this.updateEntityProp(e,"armorPattern",()=>new Ge),this}}ze.entityName="armor",G(ze,[M("name",N),M("description",x),M("price",O),M("type",S),M("armorPattern",S)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability"),K("primaryResource",S,Be.entityName),K("secondaryResource",S,Be.entityName),K("type",W,Ye.entityName),K("armorPattern",S,Ge.entityName),K("determinants",D)]);class Xe extends j{constructor(...e){super(...e),this.price=new Ue,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ue),this}}Xe.entityName="miscItem",G(Xe,[M("name",N),M("description",x),M("weight",T),M("price",O),M("availability",I)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability")]);class qe extends j{constructor(...e){super(...e),this.amount=1}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"item",()=>new Xe),this}}class Je extends He{constructor(...e){super(...e),this.suggestedPrice=new Ue,this.damage=new ge,this.prepareTime=new re,this.placement=_e.HAND}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"suggestedPrice",()=>new Ue),this.updateEntityProp(e,"damage",()=>new ge),this.updateEntityProp(e,"prepareTime",()=>new re),this}}Je.entityName="meleeWeaponBlueprint",G(Je,[M("name",N),M("description",x),M("damage",P),M("placement",N),M("suggestedPrice",O),M("suggestedWeight",T)],[K("name",N),K("description",x),K("suggestedPrice",O),K("suggestedWeight",R),K("damage",P),K("prepareTime",A),K("placement",b,"placementWeapon"),K("determinantes",D)]);class Qe extends He{constructor(...e){super(...e),this.price=new Ue,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ue),this.updateEntityProp(e,"primaryResource",()=>new Be),this.updateEntityProp(e,"secondaryResource",()=>new Be),this.updateEntityProp(e,"type",()=>new Je),this}getFinalValueForType(e){return vt.sumValueByTypeIn(this.type.determinants,e)+vt.sumValueByTypeIn(this.determinants,e)}}Qe.entityName="meleeWeapon",G(Qe,[M("name",N),M("description",x),M("price",O),M("type",S)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability"),K("primaryResource",S,Be.entityName),K("secondaryResource",S,Be.entityName),K("type",W,Je.entityName),K("determinants",D)]);class Ze extends j{constructor(...e){super(...e),this.levels=0}updateWith(e){return super.updateWith(e)}}Ze.entityName="spellSchool",G(Ze,[M("name",N),M("description",x),M("levels",R)],[K("name",N),K("description",x),K("levels",R)]);class $e extends j{constructor(...e){super(...e),this.prepareTime=new re,this.durationTime=new re,this.ingredients=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"prepareTime",()=>new re),this.updateEntityProp(e,"durationTime",()=>new re),this.updateEntityProp(e,"spellSchool",()=>new Ze),this.updateEntityList(e,"ingredients",()=>new Xe),this}}$e.entityName="spell",G($e,[M("name",N),M("description",x),M("level",R),M("manaCost",R),M("range",R)],[K("name",N),K("description",x),K("effect",x),K("level",R),K("manaCost",R),K("range",R),K("prepareTime",A),K("durationTime",A),K("spellSchool",S,Ze.entityName),K("ingredients",L,Xe.entityName)]);class et extends j{constructor(...e){super(...e),this.level=0}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"spellSchool",()=>new Ze),this}}class tt extends j{constructor(...e){super(...e),this.names=[]}}tt.entityName="nation";G(tt,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("names",x,null,e=>e.join("\n"),e=>e.replace("\r","").split("\n"))]);class at extends j{updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new tt),this}}at.entityName="worldLanguage",G(at,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("nations",L,tt.entityName)]);class nt extends j{updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new tt),this}}nt.entityName="currency",G(nt,[M("name",N),M("description",x),M("valueMultiplier",T)],[K("name",N),K("description",x),K("valueMultiplier",T),K("nations",L,tt.entityName)]);class it extends j{constructor(...e){super(...e),this.amount=new Ue}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"currency",U.suppliers.currency),this.updateEntityProp(e,"amount",U.suppliers.price),this}}U.suppliers.money=()=>new it;class st extends He{updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new tt),this}}st.entityName="race",G(st,[M("name",N),M("specialFeature",x)],[K("name",N),K("specialFeatures",x),K("nations",L,tt.entityName),K("determinants",k)]);class rt extends j{constructor(...e){super(...e),this.nations=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new tt),this}}rt.entityName="religion",G(rt,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("nations",L,tt.entityName)]);class lt extends He{}lt.entityName="animalKind",G(lt,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("determinants",D)]);class ot extends He{updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"animalKind",()=>new lt),this}}ot.entityName="animal",G(ot,[M("name",N),M("description",x),M("animalKind",S)],[K("name",N),K("description",x),K("animalKind",S,lt.entityName),K("determinants",D)]);class ct extends j{}ct.entityName="character",G(ct,[M("name",N),M("description",x)],[K("name",N),K("description",x)]);class mt extends j{}mt.entityName="eyeColor",G(mt,[M("name",N),M("description",x)],[K("name",N),K("description",x)]);class dt extends j{}dt.entityName="hairColor",G(dt,[M("name",N),M("description",x)],[K("name",N),K("description",x)]);class pt extends He{constructor(...e){super(...e),this.suggestedPrice=new Ue,this.damage=new ge,this.prepareTime=new re,this.placement=[_e.HAND],this.minimumRange=0,this.mediumRange=0,this.maximumRange=0}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"suggestedPrice",()=>new Ue),this.updateEntityProp(e,"damage",()=>new ge),this.updateEntityProp(e,"prepareTime",()=>new re),this}}pt.entityName="rangedWeaponBlueprint",G(pt,[M("name",N),M("description",x),M("damage",P),M("minimumRange",R),M("mediumRange",R),M("maximumRange",R),M("prepareTime",A),M("suggestedPrice",O),M("suggestedWeight",T)],[K("name",N),K("description",x),K("suggestedPrice",O),K("suggestedWeight",R),K("damage",P),K("prepareTime",A),K("placement",b,"placementWeapon"),K("minimumRange",R),K("mediumRange",R),K("maximumRange",R),K("determinants",D)]);class ht extends He{constructor(...e){super(...e),this.price=new Ue,this.availability="COMMON",this.weaponTypes=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ue),this.updateEntityProp(e,"primaryResource",()=>new Be),this.updateEntityProp(e,"secondaryResource",()=>new Be),this.updateEntityList(e,"weaponTypes",()=>new pt),this}}ht.entityName="ammunition",G(ht,[M("name",N),M("description",x),M("price",O),M("type",S),M("availability",N)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability"),K("primaryResource",S,Be.entityName),K("secondaryResource",S,Be.entityName),K("weaponTypes",L,pt.entityName),K("determinants",D)]);class ut extends He{constructor(...e){super(...e),this.price=new Ue,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ue),this.updateEntityProp(e,"primaryResource",()=>new Be),this.updateEntityProp(e,"secondaryResource",()=>new Be),this.updateEntityProp(e,"type",()=>new pt),this}}ut.entityName="rangedWeapon",G(ut,[M("name",N),M("description",x),M("price",O),M("type",S)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability"),K("primaryResource",S,Be.entityName),K("secondaryResource",S,Be.entityName),K("type",W,pt.entityName),K("determinants",D)]);class yt extends j{constructor(...e){super(...e),this.ammunitionAmount=0}updateWith(e){return super.updateWith(e),super.updateEntityProp(e,"rangedWeapon",()=>new ut),super.updateEntityProp(e,"ammunition",()=>new ht),this}}class Et extends He{}Et.entityName="physicalFeature",G(Et,[M("name",N),M("description",x)],[K("name",N),K("description",x),K("determinants",D)]);class gt extends j{constructor(...e){super(...e),this.physicalFeatures=[],this.determinants=new Me,this.professions=[],this.skills=[],this.inventory=[],this.meleeWeapons=[],this.rangedWeapons=[],this.armor=[],this.spellSchools=[],this.spells=[],this.animals=[],this.money=[],this.languages=[]}updateWith(e){return this.updateProp(e,"id"),this.updateProp(e,"uuid"),this.updateProp(e,"version"),this.updateProp(e,"name"),this.updateProp(e,"gender"),this.updateNumProp(e,"age"),this.updateNumProp(e,"height"),this.updateNumProp(e,"weight"),this.updateNumProp(e,"fatePoints"),this.updateNumProp(e,"mana"),this.updateNumProp(e,"currentMana"),this.updateNumProp(e,"sanityPoints"),this.updateNumProp(e,"totalExperience"),this.updateNumProp(e,"experience"),this.updateProp(e,"birthplace"),this.updateProp(e,"parents"),this.updateProp(e,"family"),this.updateProp(e,"health"),this.updateEntityProp(e,"nation",()=>new tt),this.updateEntityProp(e,"religion",()=>new rt),this.updateEntityProp(e,"hairColor",()=>new dt),this.updateEntityProp(e,"eyeColor",()=>new mt),this.updateEntityProp(e,"race",()=>new st),this.updateEntityProp(e,"personality",()=>new ct),this.updateEntityProp(e,"determinants",()=>new Me),this.updateEntityProp(e,"professionClass",()=>new Ve),this.updateEntityProp(e,"currentProfession",()=>new je),this.updateEntityList(e,"physicalFeatures",()=>new Et),this.updateEntityList(e,"professions",()=>new je),this.updateEntityList(e,"skills",()=>new Fe),this.updateEntityList(e,"inventory",()=>new qe),this.updateEntityList(e,"meleeWeapons",()=>new Qe),this.updateEntityList(e,"rangedWeapons",()=>new yt),this.updateEntityList(e,"armor",()=>new ze),this.updateEntityList(e,"spellSchools",()=>new et),this.updateEntityList(e,"spells",()=>new $e),this.updateEntityList(e,"animals",()=>new ot),this.updateEntityList(e,"money",()=>new it),this.updateEntityList(e,"languages",()=>new at),this}}gt.entityName="person",G(gt,[M("name",N),M("race",S),M("nation",S),M("currentProfession",S),M("totalExperience",N)],[K("person",F)]);class vt extends B{addExperienceExtension(e,t){this.requestFor(e,"determinant/addExperienceExtension",e=>vt.afterResponse(e,t))}removeExperienceExtension(e,t){this.requestFor(e,"determinant/removeExperienceExtension",e=>vt.afterResponse(e,t))}static afterResponse(e,t){const a=new ve;a.updateWith(e),t(a)}static findDeterminantIn(e,t){return e.find(e=>t===e.type)}static removeModifiersByType(e,t){let a=vt.findModifierByType(e,t);for(;a;)e.splice(e.indexOf(a),1),a=vt.findModifierByType(e,t);return e}static findModifierByType(e,t){return e.find(e=>e.type===t)}static sumValueByTypeIn(e,t){return e.filter(e=>t===e.type).reduce((e,t)=>e+t.calculateFinalValue(),0)}static updateProfessionExtensions(e,t){t.determinants=t.determinants.map(t=>(vt.setProfessionExtensions(e,t),t))}static setProfessionExtensions(e,t){const a=vt.findDeterminantIn(e.determinants,t.type);a&&(t.modifiers=vt.removeModifiersByType(t.modifiers,Ee.PROFESSION),a.modifiers.forEach(e=>{const a=new ge;a.type=e.type,a.value=e.value,t.modifiers.push(a)}))}rollForRace(e){const t=U.data.entity;console.assert(t.type===gt);const a=t.determinants;this.requestForPath("determinant/generateDeterminants/"+t.race.id,e=>{e.determinants.forEach(e=>{a.updateDeterminantValue(e.value,e.type)}),U.updateEntity({determinants:a})})}}class wt extends B{calculateMeleeDamage(e,t){this.rawGetRequestFor("gear/getMeleeWeaponDamage/".concat(e),t)}calculateArmorValue(e,t){this.rawGetRequestFor("gear/getArmorValue/".concat(e),t)}calculatePersonArmorValue(e,t){this.requestFor(e,"gear/getArmorValuesForGear",t)}static addPersonalRangedWeapon(e){const t=U.data.entity.rangedWeapons,a=new yt;a.rangedWeapon=e,t.push(a),U.updateEntity({rangedWeapons:t})}}class Nt extends j{constructor(...e){super(...e),this.nations=[],this.spellSchools=[],this.persons=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new tt),this.updateEntityList(e,"races",()=>new st),this.updateEntityList(e,"spellSchools",()=>new Ze),this.updateEntityList(e,"persons",()=>new gt),this}}Nt.entityName="realm",G(Nt,[M("name",N)],[K("name",N),K("nations",L,tt.entityName),K("spellSchools",L,Ze.entityName),K("persons",L,gt.entityName)]);class ft{constructor(){this.currentSpellSchools=[],this.currentSkills=[]}}const xt=(e,t)=>e.filter(e=>!t.find(t=>e.name===t.name)),Ct=(e,t)=>{const a=e.indexOf(t);return a>=0&&e.splice(a,1),e},Rt=(e,t)=>(t.find(t=>t.id===e.id)||t.push(e),t),Tt=(e,t)=>e.find(e=>e.name===t.name);function It(e,t,a=[],n=a){let i=t;return a.forEach(e=>i=i[e]),e.find(e=>{let t=e;return n.forEach(e=>t=t[e]),t===i})}function bt(e,t){const a=e.indexOf(t);return a>=0&&e.splice(a,1),e}class St extends B{getAvailableSpellSchools(e,t){this.requestFor(e,"magic/getAvailableSpellSchools",t)}static getRelevantSpells(){const e=U.data.entity,t=e.spells,a=e.spellSchools;return U.data.spell.filter(e=>!It(t,e,["name"])).filter(e=>{const t=It(a,e,["spellSchool","name"]);return t&&t.level>=e.level})}}var Lt=a(376),Ot=a.n(Lt);const At={MALE:"MALE",FEMALE:"FEMALE",allOf(){return[this.MALE,this.FEMALE]}};U.data.gender=At.allOf();class Dt{static addItemToInventory(e){let t=U.data.entity.inventory;if(!It(t,e,["name"],["item","name"])){const a=new qe;a.item=e,a.amount=0,t.push(a),U.updateEntity({inventory:t})}}static inventoryWeight(){return(U.data.entity.inventory.map(e=>e.item.weight*e.amount).reduce((e,t)=>e+t,0)+U.data.entity.meleeWeapons.map(e=>e.weight).reduce((e,t)=>e+t,0)+U.data.entity.rangedWeapons.map(e=>Dt.calculateRangedWeaponWeight(e)).reduce((e,t)=>e+t,0)+U.data.entity.armor.map(e=>e.weight).reduce((e,t)=>e+t,0)).toFixed(2)}static calculateRangedWeaponWeight(e){let t=0;return e.rangedWeapon&&(t+=e.rangedWeapon.weight),e.ammunition&&(t+=e.ammunition.weight*e.ammunitionAmount),t}}class Pt{static addMoney(e){const t=new it;t.currency=e,U.data.entity.money.push(t),U.updateEntity({money:U.data.entity.money})}}class Wt{static getProfessions(){const e=U.data.entity.professionClass,t=U.data[je.entityName];return e?t.filter(t=>t.professionClass&&t.professionClass.id===e.id):U.data[je.entityName]}static updateProfession(e){const t=U.data.entity,a=t.professions,n=t.determinants,i=vt.updateProfessionExtensions(e,n);Rt(e,a),U.updateEntity({currentProfession:e,professions:a,determinants:i})}static removeProfessionFromHistory(e){const t=U.data.entity,a=t.professions,n=t.currentProfession;Ct(a,e),n&&e.id===n.id&&(U.data.entity.currentProfession=null),U.updateEntity({professions:a})}static nextProfessions(){const e=U.data.entity.currentProfession;return e&&e.nextProfessions?e.nextProfessions:[]}}class kt extends l.Component{render(){const e=this.props,t=e.animal,a=Object(ae.a)(e,["animal"]);return o.a.createElement("div",Object.assign({},a,{onContextMenu:e=>{e.preventDefault(),U.updateEntity({animals:bt(U.data.entity.animals,t)})}}),o.a.createElement("div",null,t.name))}}class Ft{constructor(){this.armorValues=new Map,_e.allOf().forEach(e=>{this.armorValues.set(e,0)})}getArmorValue(e){return this.armorValues.get(e)}updateWith(e){this.armorValues=new Map,_e.allOf().map(t=>this.armorValues.set(t,e[t]))}}const Vt={position:"absolute",width:20,textAlign:"center"},Ht={container:{position:"relative"},shield:Object(v.a)({},Vt,{left:130,top:85}),head:Object(v.a)({},Vt,{left:15,top:100}),rightHand:Object(v.a)({},Vt,{left:15,top:170}),leftHand:Object(v.a)({},Vt,{left:155,top:162}),torso:Object(v.a)({},Vt,{left:155,top:230}),rightLeg:Object(v.a)({},Vt,{left:15,top:295}),leftLeg:Object(v.a)({},Vt,{left:155,top:295})},jt=new wt;class Mt extends l.Component{constructor(...e){super(...e),this.state={armorValues:new Ft},this.updateArmorValues=()=>{jt.calculatePersonArmorValue(U.data.entity.armor.map(e=>e.id),e=>{const t=new Ft;t.updateWith(e),this.setState({armorValues:t,armor:U.data.entity.armor})})}}render(){const e=this.props,t=e.classes,a=e.className,n=Object(ae.a)(e,["classes","className"]);return U.data.entity.armor!==this.state.armor&&this.updateArmorValues(),o.a.createElement("div",Object.assign({className:"".concat(t.container," ").concat(a)},n),o.a.createElement("p",{className:t.shield},this.state.armorValues.getArmorValue(_e.SHIELD)),o.a.createElement("p",{className:t.head},this.state.armorValues.getArmorValue(_e.HEAD)),o.a.createElement("p",{className:t.rightHand},this.state.armorValues.getArmorValue(_e.HAND)),o.a.createElement("p",{className:t.leftHand},this.state.armorValues.getArmorValue(_e.HAND)),o.a.createElement("p",{className:t.torso},this.state.armorValues.getArmorValue(_e.TORSO)),o.a.createElement("p",{className:t.rightLeg},this.state.armorValues.getArmorValue(_e.LEG)),o.a.createElement("p",{className:t.leftLeg},this.state.armorValues.getArmorValue(_e.LEG)))}}var Kt=h()(Ht)(Mt);const Gt={display:"flex",flexDirection:"row"};class Ut extends l.Component{constructor(...e){super(...e),this.updateEntity=e=>t=>{t.preventDefault(),U.updateEntity({armor:Ct(U.data.entity.armor,e)})}}render(){const e=this.props,t=e.t,a=e.armor,n=e.disabled;let i=[o.a.createElement("div",{style:{width:150}},a.name),o.a.createElement("div",{style:{width:210}},t(a.type.placement)),o.a.createElement("div",{style:{width:50}},a.weight)];return n?o.a.createElement("div",{style:Gt},i):o.a.createElement("div",{style:Gt,onContextMenu:this.updateEntity(a)},i)}}var Bt=Object(g.b)()(Ut);class _t extends l.PureComponent{constructor(...e){super(...e),this.parse=e=>t=>{const a=this.props,n=a.name,i=a.variant,s=t.target.value;if(""!==s)if(i===zt.INT){const a=parseInt(s);a||0===a?e(a):t.target.value=U.data.entity[n]||""}else if(i===zt.FLOAT){const a=parseFloat(s);a||0===a?e(a):t.target.value=U.data.entity[n]||""}else e(s);else e(s)}}render(){const e=this.props,t=e.name,a=e.value,n=void 0===a?U.data.entity[t]:a,i=e.classes,s=e.customStyle,r=e.onChange,l=void 0===r?e=>U.updateEntity({[t]:e}):r;return e.multiline?o.a.createElement("textarea",{className:i.input,style:s,value:n,onChange:this.parse(l)}):o.a.createElement("input",{className:i.input,style:s,value:n,onChange:this.parse(l)})}}var Yt=h()({input:{backgroundColor:"transparent",border:0,width:"100%",fontFamily:"wfrp",fontSize:"24px",textAlign:"center",outline:"none"}})(_t);const zt={TEXT:"TEXT",INT:"INT",FLOAT:"FLOAT"};class Xt extends l.Component{constructor(...e){super(...e),this.updateAmount=e=>{this.props.inventory.amount=e,U.updateEntity({inventory:U.data.entity.inventory})}}render(){const e=this.props.inventory;return o.a.createElement("div",{style:{width:290,display:"flex"},onContextMenu:t=>{t.preventDefault();const a=U.data.entity.inventory;bt(a,e),U.updateEntity({inventory:a})}},o.a.createElement("div",{style:{width:150,minWidth:150}},e.item.name),o.a.createElement("div",{style:{width:70,textAlign:"center"}},Xt.calculateWeight(e)),o.a.createElement(Yt,{style:{width:50,textAlign:"center"},variant:zt.FLOAT,value:e.amount,onChange:this.updateAmount}))}}Xt.calculateWeight=e=>(e.amount*e.item.weight).toFixed(2);var qt=Xt;class Jt extends l.Component{constructor(...e){super(...e),this.updateAmount=e=>t=>{this.props.money.amount[e]=t,U.updateEntity({money:U.data.entity.money})}}render(){const e=this.props,t=e.money,a=Object(ae.a)(e,["money"]);return o.a.createElement("div",Object.assign({},a,{style:{display:"flex"},onContextMenu:e=>{e.preventDefault(),U.updateEntity({money:bt(U.data.entity.money,t)})}}),o.a.createElement("div",{style:{width:145}},t.currency.name),o.a.createElement(Yt,{customStyle:{width:40},value:t.amount.gold,onChange:this.updateAmount("gold"),variant:zt.INT}),o.a.createElement(Yt,{customStyle:{width:45},value:t.amount.silver,onChange:this.updateAmount("silver"),variant:zt.INT}),o.a.createElement(Yt,{customStyle:{width:50},value:t.amount.lead,onChange:this.updateAmount("lead"),variant:zt.INT}))}}var Qt=a(660),Zt=a(378),$t=a.n(Zt);const ea=new vt,ta=e=>o.a.createElement($t.a,Object.assign({style:{fontSize:14,margin:-2}},e));class aa extends l.Component{constructor(...e){super(...e),this.addExtension=()=>{ea.addExperienceExtension(this.props.ext,this.props.onChange)},this.removeExtension=()=>{ea.removeExperienceExtension(this.props.ext,this.props.onChange)}}render(){const e=this.props,t=e.ext,a=e.classes,n=e.customClassName,i=(e.onChange,Object(ae.a)(e,["ext","classes","customClassName","onChange"]));let s="0",r=[];if(t){r=t.getExperienceExtensions();const e=t?t.modifiers.find(e=>e.type===Ee.PROFESSION):null;e&&(s=e.value)}return o.a.createElement("div",Object.assign({className:"".concat(a.fieldContainer," ").concat(n)},i,{onClick:this.addExtension,onContextMenu:e=>{e.preventDefault(),this.removeExtension()}}),o.a.createElement("p",{className:a.extension},"+"+s),o.a.createElement("div",{className:a.checkboxContainer},r.map(e=>o.a.createElement(ta,{key:e.value+"-"+e.type}))))}}var na=Object(Qt.a)({fieldContainer:{position:"relative"},extension:{position:"absolute",top:"-10px",textAlign:"center",width:"100%"},checkboxContainer:{position:"absolute",right:"5px",display:"flex",flexFlow:"row",flexWrap:"wrap",maxWidth:40,zIndex:1}})(aa);const ia={row1:{paddingTop:10,maxHeight:35,minHeight:35,width:"100%",display:"flex"},row2:{maxHeight:50,minHeight:50,width:"100%",display:"flex"},row3:{maxHeight:50,minHeight:50,width:"100%",display:"flex",textAlign:"center"},firstInRow:{minHeight:50,maxHeight:50,minWidth:47,maxWidth:47},otherInRow:{maxHeight:50,minHeight:50,minWidth:47,maxWidth:47},otherInRow2:{maxHeight:50,minHeight:50,minWidth:46,maxWidth:46},lastRowChild:{margin:"15px 0 0 0"}};class sa extends l.Component{constructor(...e){super(...e),this.updateDeterminant=e=>t=>{e.value=t,U.updateEntity({determinants:U.data.entity.determinants})},this.updateDeterminantExperience=e=>{const t=U.data.entity.determinants;t.replaceDeterminant(e),U.updateEntity({determinants:t})}}render(){const e=this.props,t=e.classes,a=Object(ae.a)(e,["classes"]),n=U.data.entity.determinants,i=n.findDeterminant(we.SPEED),s=n.findDeterminant(we.BATTLE),r=n.findDeterminant(we.SHOOTING),l=n.findDeterminant(we.STRENGTH),c=n.findDeterminant(we.DURABILITY),m=n.findDeterminant(we.HEALTH),d=n.findDeterminant(we.ATTACK),p=n.findDeterminant(we.INITIATIVE),h=n.findDeterminant(we.DEXTERITY),u=n.findDeterminant(we.LEADER_SKILLS),y=n.findDeterminant(we.INTELLIGENCE),E=n.findDeterminant(we.CONTROL),g=n.findDeterminant(we.WILL),v=n.findDeterminant(we.CHARISMA);return o.a.createElement("div",a,o.a.createElement("div",{className:t.row1},o.a.createElement(Yt,{className:t.firstInRow,value:i.value,onChange:this.updateDeterminant(i),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow,value:s.value,onChange:this.updateDeterminant(s),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow,value:r.value,onChange:this.updateDeterminant(r),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow,value:l.value,onChange:this.updateDeterminant(l),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow,value:c.value,onChange:this.updateDeterminant(c),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow2,value:m.value,onChange:this.updateDeterminant(m),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow,value:p.value,onChange:this.updateDeterminant(p),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow2,value:d.value,onChange:this.updateDeterminant(d),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow2,value:h.value,onChange:this.updateDeterminant(h),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow2,value:u.value,onChange:this.updateDeterminant(u),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow2,value:y.value,onChange:this.updateDeterminant(y),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow2,value:E.value,onChange:this.updateDeterminant(E),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow2,value:g.value,onChange:this.updateDeterminant(g),variant:zt.INT}),o.a.createElement(Yt,{className:t.otherInRow,value:v.value,onChange:this.updateDeterminant(v),variant:zt.INT})),o.a.createElement("div",{className:t.row2},o.a.createElement(na,{ext:i,customClassName:t.firstInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:s,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:r,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:l,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:c,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:m,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:p,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:d,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:h,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:u,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:y,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:E,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:g,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(na,{ext:v,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience})),o.a.createElement("div",{className:t.row3},o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.firstInRow," ")},i.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},s.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},r.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},l.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},c.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},m.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},p.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},d.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},h.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},u.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},y.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},E.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},g.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},v.calculateExperienceValue())))}}var ra=Object(Qt.a)(ia)(sa);const la={control:(e,t)=>({width:"100%",display:"flex"}),dropdownIndicator:(e,t)=>({color:"transparent"}),indicatorSeparator:(e,t)=>({color:"transparent"})},oa={control:(e,t)=>({width:"100%",display:"flex"}),dropdownIndicator:(e,t)=>({color:"transparent"}),indicatorSeparator:(e,t)=>({color:"transparent"}),clearIndicator:(e,t)=>({color:"transparent"}),multiValueRemove:(e,t)=>({color:"ghostwhite",maxHeight:"1px"}),singleValue:(e,t)=>({color:"black",maxHeight:"1px"}),multiValueLabel:(e,t)=>({background:"transparent",display:"inline-flex","&::after":{content:'","'}}),multiValue:(e,t)=>({background:"transparent",display:"inline-flex",height:"14px"})};class ca extends l.Component{render(){const e=this.props,t=e.name,a=e.propName,n=void 0===a?t:a,i=e.value,s=void 0===i?U.data.entity[n]:i,r=e.options,l=void 0===r?U.data[t]:r,c=e.multi,m=e.className,d=e.customStyle,p=e.onChange,h=void 0===p?e=>U.updateEntity({[n]:e}):p;return o.a.createElement(De.a,{title:s&&s.description?s.description:""},o.a.createElement("div",{style:Object(v.a)({},{display:"inline-block"},{},d)},o.a.createElement(Z.a,{className:m,styles:c?oa:la,value:s,options:l,onChange:h,components:Object($.a)(),getOptionLabel:e=>o.a.createElement("div",null,e.name),getOptionValue:e=>e.id,filterOption:(e,t)=>e.data.name.startsWith(t),placeholder:o.a.createElement("div",null),isSearchable:!0,isMulti:c})))}}class ma extends l.Component{render(){const e=this.props.pWep,t=e.rangedWeapon,a=t.type,n=a.prepareTime.toString();return o.a.createElement("div",{style:{display:"flex",flexDirection:"column"},onContextMenu:t=>{t.preventDefault(),U.updateEntity({rangedWeapons:Ct(U.data.entity.rangedWeapons,e)})}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:{width:190}},t.name),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.minimumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.mediumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.maximumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.damage.value),o.a.createElement("div",{style:{width:38,textAlign:"center"}},n)),o.a.createElement("div",{style:{width:170,height:45,marginLeft:10,display:"flex"}},o.a.createElement(ca,{name:ht.entityName,customStyle:{width:140,height:45},value:e.ammunition,onChange:t=>{e.ammunition=t,this.setState({newAmmunition:t})}}),o.a.createElement("div",{onContextMenu:t=>{t.preventDefault(),e.ammunition=null,e.ammunitionAmount=0,this.setState({newAmmunition:null})}},e.ammunition?o.a.createElement(Yt,{customStyle:{width:40},value:e.ammunitionAmount,variant:zt.INT,onChange:t=>{e.ammunitionAmount=t,this.setState({currentAmount:t})}}):o.a.createElement("div",null))))}}var da=h()({ammunitionAmountField:{minWidth:40,maxWidth:40}})(ma);a(502);class pa extends l.Component{render(){const e=this.props,t=e.classes,a=e.customStyle,n=e.listStyle,i=e.name,s=e.propName,r=void 0===s?i:s,l=e.value,c=(void 0===l&&U.data.entity[i],e.data),m=void 0===c?U.data[i]:c,d=e.onGearAdd,p=void 0===d?e=>U.updateEntity({[r]:Rt(e,U.data.entity[r])}):d,h=e.children,u=Object(ae.a)(e,["classes","customStyle","listStyle","name","propName","value","data","onGearAdd","children"]);Object(v.a)({},t,{},a);return o.a.createElement("div",Object.assign({style:{width:"100%"}},u),o.a.createElement(ca,{name:i,options:m,customStyle:{width:"100%"},onChange:p,value:null}),o.a.createElement(ke.a,{style:Object(v.a)({},{height:"100%",width:"100%"},{},n)},h))}}var ha=h()({container:{width:"100%"},selectComponent:{width:"100%"},itemsList:{height:"100%",width:"100%",overflow:"auto"},itemContainer:{display:"flex",flexDirection:"row"}})(pa);const ua={control:(e,t)=>({width:"100%",display:"flex"}),dropdownIndicator:(e,t)=>({color:"transparent"}),indicatorSeparator:(e,t)=>({color:"white"})};class ya extends l.Component{constructor(...e){super(...e),this.getData=e=>e.map(e=>({label:e,value:e})),this.onSelected=e=>{this.props.onChange(e&&e.value)}}render(){const e=this.props,t=e.name,a=e.value,n=void 0===a?U.data.entity[t]:a,i=e.options,s=void 0===i?U.data[t]:i,r=Object(ae.a)(e,["name","value","options"]);return o.a.createElement(Z.a,Object.assign({},r,{styles:ua,options:s,value:{label:n,value:n},getOptionLabel:e=>o.a.createElement("div",null,e.label?e.label:"string"===typeof e?e:void 0),getOptionValue:e=>e,onChange:e=>U.updateEntity({[t]:e}),components:Object($.a)(),isSearchable:!0}))}}class Ea extends l.Component{constructor(...e){super(...e),this.state={anchorEl:null,currentElement:null},this.handleClick=e=>t=>{this.setState({anchorEl:t.currentTarget,currentElement:e})},this.onRemove=e=>()=>{this.handleClose(),this.props.onRemove(e)},this.handleClose=()=>{this.setState({anchorEl:null,currentElement:null})}}render(){const e=this.props,t=e.name,a=e.data,n=void 0===a?U.data.entity[t]:a,i=(e.onRemove,e.listStyle,Object(ae.a)(e,["name","data","onRemove","listStyle"]));return o.a.createElement("div",i,n.map((e,t)=>{const a=e.name||e;return o.a.createElement("div",{key:"listed-entity-"+a,style:{display:"inline-block"}},e.name?e.description?o.a.createElement(De.a,{title:e.description},o.a.createElement("p",{onClick:this.handleClick(e),style:{margin:0}},(t>0?", ":"")+a)):o.a.createElement("p",{onClick:this.handleClick(e),style:{margin:0}},(t>0?", ":"")+a):o.a.createElement("p",{style:{margin:0}},(t>0?", ":"")+a),e.name&&o.a.createElement(Pe.a,{id:"listed-menu-item-"+e.name,anchorEl:this.state.anchorEl,open:e===this.state.currentElement&&null!==this.state.anchorEl,onClose:this.handleClose},o.a.createElement(We.a,{onClick:this.onRemove(e)},"Remove")))}))}}class ga extends l.Component{constructor(...e){super(...e),this.calc=(e,t)=>[e*t,e*t*6,e*t*360/1e3],this.calculateSpeed=e=>[this.calc(e,2),this.calc(e,4),this.calc(e,16)]}render(){const e=this.props,t=e.classes,a=e.entity,n=void 0===a?U.data.entity:a,i=this.calculateSpeed(n.determinants.findDeterminant(we.SPEED).calculateExperienceValue());return o.a.createElement("div",{className:t.container},o.a.createElement("div",{className:t.firstRow},o.a.createElement("div",{className:t.cell},i[0][0]),o.a.createElement("div",{className:t.cell},i[0][1]),o.a.createElement("div",{className:t.cell},i[0][2])),o.a.createElement("div",{className:t.nextRow},o.a.createElement("div",{className:t.cell},i[1][0]),o.a.createElement("div",{className:t.cell},i[1][1]),o.a.createElement("div",{className:t.cell},i[1][2])),o.a.createElement("div",{className:t.nextRow},o.a.createElement("div",{className:t.cell},i[2][0]),o.a.createElement("div",{className:t.cell},i[2][1]),o.a.createElement("div",{className:t.cell},i[2][2])))}}var va=h()({container:{height:160,width:200,paddingLeft:140,paddingTop:80,display:"flex",flexFlow:"column"},firstRow:{display:"flex",height:45,width:"100%"},nextRow:{display:"flex",height:45,width:"100%"},cell:{width:70,textAlign:"center",alignSelf:"center"}})(ga);class wa extends l.Component{constructor(...e){super(...e),this.onContextMenu=e=>t=>{t.preventDefault(),U.updateEntity({spells:bt(U.data.entity.spells,e)})}}render(){const e=this.props,t=e.spell,a=e.disabled,n=t.ingredients.map(e=>e.name).join(", "),i=[o.a.createElement("div",{style:{width:155}},t.name),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.level),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.manaCost),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.range),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.durationTime.toString()),o.a.createElement("div",{style:{width:140}},n),o.a.createElement("div",{style:{width:130}},t.effect)];return a?o.a.createElement("div",{style:{display:"flex"}},i):o.a.createElement("div",{style:{display:"flex"},onContextMenu:this.onContextMenu(t)},i)}}var Na=wa;class fa extends l.Component{constructor(...e){super(...e),this.state={availableSpellSchools:new Map},this.onSpellSchoolAdd=e=>{const t=U.data.entity.spellSchools,a=t.indexOf(t.find(t=>t.spellSchool.name===e.name));a>=0&&t.splice(a,1);let n=this.state.availableSpellSchools.get(e);U.updateEntity({spellSchools:[...t,n]})},this.onSpellSchoolRemove=e=>t=>{t.preventDefault();let a=bt(U.data.entity.spellSchools,e);this.refreshRelevantMagicSchools(),U.updateEntity({spellSchools:a})},this.refreshRelevantMagicSchools=()=>{const e=new ft;e.currentSpellSchools=U.data.entity.spellSchools,e.realm=U.data.currentRealm,fa.magicService.getAvailableSpellSchools(e,this.setSpellSchools)},this.setSpellSchools=e=>{this.setState({availableSpellSchools:this.assembleSpellSchools(e),currentSpellSchools:U.data.entity.spellSchools})},this.assembleSpellSchools=e=>{const t=this.state.availableSpellSchools;return t.clear(),e.forEach(e=>t.set(e.spellSchool,e)),t}}render(){const e=U.data.entity;this.state.currentSpellSchools!==e.spellSchools&&this.refreshRelevantMagicSchools();const t=[...this.state.availableSpellSchools.keys()];return o.a.createElement("div",null,o.a.createElement(ha,{style:{height:400,width:200,paddingTop:10},listStyle:{height:300,width:"100%",overflow:"auto"},data:t,onGearAdd:this.onSpellSchoolAdd},e.spellSchools.map(e=>o.a.createElement("p",{key:fa.spellSchoolLevelText(e),style:{margin:0},onContextMenu:this.onSpellSchoolRemove(e)},fa.spellSchoolLevelText(e)))))}}fa.magicService=new St,fa.spellSchoolLevelText=e=>e.spellSchool.name+" p. "+e.level;var xa=fa;const Ca=new wt;class Ra extends l.Component{constructor(...e){super(...e),this.state={damageText:""},this.updateDamageValue=()=>{Ca.calculateMeleeDamage(this.props.weapon.id,e=>this.setState({damageText:e,weapon:this.props.weapon}))},this.onRightClick=(e,t)=>a=>{a.preventDefault(),U.updateEntity({[e]:Ct(U.data.entity[e],t)})}}render(){const e=this.props,t=e.name,a=e.classes,n=e.customStyle,i=e.weapon,s=e.disabled,r=Object(v.a)({},a,{},n);i!==this.state.weapon&&this.updateDamageValue();const l=[o.a.createElement("div",{className:r.itemName},i.name),o.a.createElement("div",{className:r.itemVariable},i.getFinalValueForType(we.INITIATIVE)),o.a.createElement("div",{className:r.itemVariable},i.getFinalValueForType(we.BATTLE)),o.a.createElement("div",{className:r.damageText},this.state.damageText),o.a.createElement("div",{className:r.itemVariable},i.getFinalValueForType(we.PARRY))];return s?o.a.createElement("div",{className:r.itemContainer},l):o.a.createElement("div",{className:r.itemContainer,onContextMenu:this.onRightClick(t,i)},l)}}var Ta=h()({itemContainer:{display:"flex",flexDirection:"row"},itemName:{minWidth:180,maxWidth:180},itemVariable:{minWidth:51,maxWidth:51,textAlign:"center"},damageText:{minWidth:51,maxWidth:51,textAlign:"center",fontSize:12,paddingTop:5}})(Ra);class Ia extends l.Component{constructor(...e){super(...e),this.determinantService=new vt,this.state={anchorEl:null,currentElement:null,generateStatsAction:()=>{const e=U.data.entity.race;e&&this.determinantService.rollForRace(e)}},this.handleClose=()=>{this.setState({anchorEl:null,showMenu:""})}}render(){const e=this.props,t=e.classes,a=e.t,n=U.data.entity;return o.a.createElement("div",{className:t.root},o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:33,paddingLeft:33,width:860}},o.a.createElement(Yt,{name:"name",customStyle:{width:200}}),o.a.createElement(ca,{name:st.entityName,customStyle:{width:140,paddingLeft:20},options:U.data.currentRealmData.races}),o.a.createElement(ya,{name:"gender",className:t.genderSelect}),o.a.createElement(ca,{name:Ve.entityName,customStyle:{width:240}}),o.a.createElement(ca,{name:ct.entityName,propName:"personality",customStyle:{width:148}})),o.a.createElement("div",{style:{paddingTop:30,paddingLeft:33,width:860}},o.a.createElement(Yt,{name:"age",variant:zt.INT,customStyle:{width:80}}),o.a.createElement(Yt,{name:"height",variant:zt.INT,customStyle:{width:100,paddingLeft:10}}),o.a.createElement(Yt,{name:"weight",variant:zt.FLOAT,customStyle:{width:90,paddingLeft:20}}),o.a.createElement(ca,{name:dt.entityName,customStyle:{width:110,paddingLeft:10}}),o.a.createElement(ca,{name:mt.entityName,customStyle:{width:90,paddingLeft:0}}),o.a.createElement(ca,{name:Et.entityName,propName:"physicalFeatures",multi:!0,customStyle:{width:280,paddingLeft:60,maxHeight:70,position:"relative",top:-30,fontSize:"14px"}})),o.a.createElement("div",{style:{paddingTop:30,paddingLeft:33,width:860,height:40,display:"flex"}},o.a.createElement(ca,{name:je.entityName,propName:"currentProfession",options:Wt.getProfessions(),onChange:Wt.updateProfession,customStyle:{width:235,paddingLeft:0}}),o.a.createElement(ke.a,{style:{width:360,height:40}},o.a.createElement(Ea,{name:"professions",onRemove:Wt.removeProfessionFromHistory,style:{display:"inline-block",width:350,fontSize:"14px"}})),o.a.createElement(ke.a,{style:{width:200,height:40}},o.a.createElement(Ea,{name:"outgoingProfessions",data:Wt.nextProfessions(),onRemove:Wt.removeProfessionFromHistory,style:{display:"inline-block",width:200,height:40,fontSize:"14px"}}))),o.a.createElement("div",{style:{paddingTop:43,width:890,display:"flex"}},o.a.createElement("div",{style:{width:230,height:50},onContextMenu:e=>{e.preventDefault(),this.setState({anchorEl:e.target,currentElement:["generateStats"]})}}),o.a.createElement(ra,{style:{width:650}})),o.a.createElement("div",{style:{paddingTop:10,paddingLeft:20,width:860,display:"flex"}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:0,width:430}},o.a.createElement(ha,{style:{width:400,height:220,paddingLeft:40,paddingTop:10},listStyle:{height:180},name:Qe.entityName,propName:"meleeWeapons"},n.meleeWeapons.map(e=>o.a.createElement(Ta,{key:e.name,name:"meleeWeapons",weapon:e}))),o.a.createElement(ha,{style:{width:400,height:230,paddingLeft:30,paddingTop:10},listStyle:{height:180},name:ut.entityName,onGearAdd:wt.addPersonalRangedWeapon},n.rangedWeapons.map(e=>o.a.createElement(da,{key:e.rangedWeapon.name,name:"meleeWeapons",pWep:e}))),o.a.createElement(ha,{style:{width:400,height:220,paddingLeft:20},name:ze.entityName},n.armor.map(e=>o.a.createElement(Bt,{key:e.name,name:"meleeWeapons",armor:e})))),o.a.createElement("div",{style:{paddingTop:0,paddingLeft:10,width:210}},o.a.createElement(ha,{style:{width:200,height:360,paddingLeft:0,paddingTop:10},listStyle:{height:300},name:Fe.entityName,propName:"skills",data:xt(U.data.skill,n.skills)},n.skills.map(e=>o.a.createElement(De.a,{title:e.description},o.a.createElement("p",{key:e.name,style:{margin:0},onContextMenu:t=>{t.preventDefault(),U.updateEntity({skills:Ct(n.skills,e)})}},e.name)))),o.a.createElement(Kt,null)),o.a.createElement(xa,null))),o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840,display:"flex"}},o.a.createElement(ha,{style:{width:630},listStyle:{height:220},name:$e.entityName,propName:"spells",data:St.getRelevantSpells()},n.spells.map(e=>o.a.createElement(Na,{spell:e}))),o.a.createElement("div",{style:{width:200}},o.a.createElement(Yt,{name:"fatePoints",variant:zt.INT,customStyle:{width:"100%",height:50,paddingTop:55}}),o.a.createElement(Yt,{name:"mana",variant:zt.INT,customStyle:{width:"100%",height:50,paddingTop:30}}),o.a.createElement(Yt,{name:"currentMana",variant:zt.INT,customStyle:{width:"100%",height:50,paddingTop:35}}))),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:300,paddingTop:20}},o.a.createElement(ha,{style:{width:300},listStyle:{height:370},name:Xe.entityName,onGearAdd:Dt.addItemToInventory},n.inventory.map(e=>o.a.createElement(qt,{key:e.item.name,inventory:e}))),o.a.createElement("div",{style:{paddingLeft:200}},Dt.inventoryWeight()," kg"),o.a.createElement(ha,{style:{width:285},listStyle:{height:150},name:nt.entityName,data:U.data.currentRealmData.currencies,onGearAdd:Pt.addMoney},n.money.map(e=>o.a.createElement(Jt,{key:e.currency.name,money:e})))),o.a.createElement("div",null,o.a.createElement(va,null),o.a.createElement("div",{style:{width:350,height:160,paddingTop:10,display:"flex"}},o.a.createElement(ha,{style:{width:100,paddingTop:15},listStyle:{height:100},name:at.entityName,propName:"languages",data:U.data.currentRealmData.languages},n.languages.map(e=>o.a.createElement("div",{onContextMenu:t=>{t.preventDefault(),U.updateEntity({languages:bt(n.languages,e)})}},e.name))),o.a.createElement(Yt,{name:"health",variant:zt.TEXT,multiline:!0,customStyle:{width:130,height:100,alignSelf:"flex-end"}}),o.a.createElement(Yt,{name:"sanityPoints",variant:zt.INT,customStyle:{width:100,paddingLeft:10}})),o.a.createElement("div",{style:{width:350}},o.a.createElement(ca,{name:tt.entityName,customStyle:{width:170,height:50,marginLeft:170,marginTop:50},options:U.data.currentRealmData.nations}),o.a.createElement(Yt,{name:"parents",variant:zt.TEXT,customStyle:{width:120,height:35,marginTop:0,marginLeft:220}}),o.a.createElement(Yt,{name:"family",variant:zt.TEXT,customStyle:{width:220,height:80,marginLeft:110}})),o.a.createElement("div",{style:{width:350,display:"flex"}},o.a.createElement(Yt,{name:"socialLevel",variant:zt.TEXT,customStyle:{width:80,height:60,marginTop:10,marginLeft:110}}),o.a.createElement(ca,{name:rt.entityName,customStyle:{width:150,marginTop:35,marginLeft:5},data:U.data.currentRealmData.religions}))),o.a.createElement("div",{style:{marginLeft:20,marginTop:50}},o.a.createElement("div",{style:{marginTop:20}},"aktualnie:"),o.a.createElement(Yt,{name:"experience",variant:zt.INT,customStyle:{width:150,height:150}}),o.a.createElement("div",{style:{marginTop:20}},"ca\u0142kowicie:"),o.a.createElement(Yt,{name:"totalExperience",variant:zt.INT,customStyle:{width:150,height:150}}))),o.a.createElement(ha,{style:{width:700},listStyle:{height:100},name:ot.entityName,propName:"animals"},n.animals.map(e=>o.a.createElement(kt,{animal:e}))))),o.a.createElement(Pe.a,{anchorEl:this.state.anchorEl,open:this.state.currentElement&&null!==this.state.anchorEl,onClose:this.handleClose},this.state.currentElement&&this.state.currentElement.map(e=>o.a.createElement(We.a,{onClick:()=>{this.handleClose(),this.state[e+"Action"]()}},a(e)))))}}var ba=h()(()=>({root:{marginTop:5,background:"url(".concat(Ot.a,")"),fontFamily:"wfrp",fontSize:"24px",backgroundSize:"cover",height:"1231px",width:"1800px",display:"flex"},genderSelect:{display:"inline-block",width:85}}))(Object(g.b)()(Ia));const Sa=e=>o.a.createElement($t.a,Object.assign({style:{fontSize:14,margin:-2}},e));class La extends l.Component{render(){const e=this.props,t=e.ext,a=e.classes,n=e.customClassName,i=Object(ae.a)(e,["ext","classes","customClassName"]);let s="0",r=[];if(t){r=t.getExperienceExtensions();const e=t?t.modifiers.find(e=>e.type===Ee.PROFESSION):null;e&&(s=e.value)}return o.a.createElement("div",Object.assign({className:"".concat(a.fieldContainer," ").concat(n)},i),o.a.createElement("p",{className:a.extension},"+"+s),o.a.createElement("div",{className:a.checkboxContainer},r.map(e=>o.a.createElement(Sa,{key:e.value+"-"+e.type}))))}}var Oa=Object(Qt.a)({fieldContainer:{position:"relative"},extension:{position:"absolute",top:"-10px",textAlign:"center",width:"100%"},checkboxContainer:{position:"absolute",right:"5px",display:"flex",flexFlow:"row",flexWrap:"wrap",maxWidth:40,zIndex:1}})(La);class Aa extends l.Component{render(){const e=this.props,t=e.classes,a=Object(ae.a)(e,["classes"]),n=U.data.entity.determinants,i=n.findDeterminant(we.SPEED),s=n.findDeterminant(we.BATTLE),r=n.findDeterminant(we.SHOOTING),l=n.findDeterminant(we.STRENGTH),c=n.findDeterminant(we.DURABILITY),m=n.findDeterminant(we.HEALTH),d=n.findDeterminant(we.ATTACK),p=n.findDeterminant(we.INITIATIVE),h=n.findDeterminant(we.DEXTERITY),u=n.findDeterminant(we.LEADER_SKILLS),y=n.findDeterminant(we.INTELLIGENCE),E=n.findDeterminant(we.CONTROL),g=n.findDeterminant(we.WILL),v=n.findDeterminant(we.CHARISMA);return o.a.createElement("div",a,o.a.createElement("div",{className:t.row1,style:{paddingLeft:15}},o.a.createElement("div",{className:t.firstInRow},i.value),o.a.createElement("div",{className:t.otherInRow},s.value),o.a.createElement("div",{className:t.otherInRow},r.value),o.a.createElement("div",{className:t.otherInRow},l.value),o.a.createElement("div",{className:t.otherInRow},c.value),o.a.createElement("div",{className:t.otherInRow2},m.value),o.a.createElement("div",{className:t.otherInRow},p.value),o.a.createElement("div",{className:t.otherInRow2},d.value),o.a.createElement("div",{className:t.otherInRow2},h.value),o.a.createElement("div",{className:t.otherInRow2},u.value),o.a.createElement("div",{className:t.otherInRow2},y.value),o.a.createElement("div",{className:t.otherInRow2},E.value),o.a.createElement("div",{className:t.otherInRow2},g.value),o.a.createElement("div",{className:t.otherInRow},v.value)),o.a.createElement("div",{className:t.row2},o.a.createElement(Oa,{ext:i,customClassName:t.firstInRow}),o.a.createElement(Oa,{ext:s,customClassName:t.otherInRow}),o.a.createElement(Oa,{ext:r,customClassName:t.otherInRow}),o.a.createElement(Oa,{ext:l,customClassName:t.otherInRow}),o.a.createElement(Oa,{ext:c,customClassName:t.otherInRow}),o.a.createElement(Oa,{ext:m,customClassName:t.otherInRow2}),o.a.createElement(Oa,{ext:p,customClassName:t.otherInRow}),o.a.createElement(Oa,{ext:d,customClassName:t.otherInRow2}),o.a.createElement(Oa,{ext:h,customClassName:t.otherInRow2}),o.a.createElement(Oa,{ext:u,customClassName:t.otherInRow2}),o.a.createElement(Oa,{ext:y,customClassName:t.otherInRow2}),o.a.createElement(Oa,{ext:E,customClassName:t.otherInRow2}),o.a.createElement(Oa,{ext:g,customClassName:t.otherInRow2}),o.a.createElement(Oa,{ext:v,customClassName:t.otherInRow})),o.a.createElement("div",{className:t.row3},o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.firstInRow," ")},i.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},s.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},r.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},l.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},c.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},m.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},p.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},d.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},h.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},u.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},y.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},E.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},g.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},v.calculateExperienceValue())))}}var Da=Object(Qt.a)(ia)(Aa);class Pa extends l.Component{render(){const e=this.props.pWep,t=e.rangedWeapon,a=t.type,n=a.prepareTime.toString();return o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:{width:190}},t.name),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.minimumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.mediumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.maximumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.damage.value),o.a.createElement("div",{style:{width:38,textAlign:"center"}},n)),o.a.createElement("div",{style:{width:170,height:45,marginLeft:10,display:"flex"}},o.a.createElement("div",{style:{width:140,height:45}},e.ammunition&&e.ammunition.name),o.a.createElement("div",null,e.ammunition?o.a.createElement("div",{style:{width:40}},e.ammunitionAmount):o.a.createElement("div",null))))}}var Wa=Pa;class ka extends l.Component{render(){const e=this.props,t=e.children,a=e.data,n=e.listStyle,i=Object(ae.a)(e,["children","data","listStyle"]);return o.a.createElement("div",i,o.a.createElement(ke.a,{style:Object(v.a)({},{height:"100%",width:"100%"},{},n)},t,a&&a.map(e=>o.a.createElement("div",null,e.name||e))))}}var Fa=ka;class Va extends l.Component{constructor(...e){super(...e),this.determinantService=new vt,this.state={anchorEl:null,currentElement:null,generateStatsAction:()=>{const e=U.data.entity.race;e&&this.determinantService.rollForRace(e)}},this.handleClose=()=>{this.setState({anchorEl:null,showMenu:""})},this.listToDivs=e=>e?e.map(e=>o.a.createElement("div",null,e.name)):o.a.createElement("div",null)}render(){const e=this.props,t=e.classes,a=e.t,n=(e.editable,U.data.entity);return o.a.createElement("div",{className:t.root},o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:40,paddingLeft:33,width:860,display:"flex"}},o.a.createElement("div",{style:{width:200}},n.name),o.a.createElement("div",{style:{width:140,paddingLeft:20}},n.race&&n.race.name),o.a.createElement("div",{style:{display:"inline-block",width:85}},"MALE"===n.gender?"M":"K"),o.a.createElement("div",{style:{width:240}},n.professionClass&&n.professionClass.name),o.a.createElement("div",{style:{width:148}},a(n.personality&&n.personality.name))),o.a.createElement("div",{style:{paddingTop:40,paddingLeft:33,width:860,display:"flex"}},o.a.createElement("div",{style:{width:80,paddingLeft:5}},n.age),o.a.createElement("div",{style:{width:100,paddingLeft:10}},n.height," cm"),o.a.createElement("div",{style:{width:90,paddingLeft:20}},n.weight," kg"),o.a.createElement("div",{style:{width:110,paddingLeft:10}},n.hairColor&&n.hairColor.name),o.a.createElement("div",{style:{width:90,paddingLeft:0}},n.eyeColor&&n.eyeColor.name),o.a.createElement("div",{style:{width:265,paddingLeft:70,maxHeight:70,position:"relative",top:-30,fontSize:"14px"}},this.listToDivs(n.physicalFeatures))),o.a.createElement("div",{style:{paddingTop:40,paddingLeft:33,width:860,display:"flex"}},o.a.createElement("div",{style:{width:240,paddingLeft:10}},n.currentProfession&&n.currentProfession.name),o.a.createElement(Fa,{data:n.professions,style:{display:"inline-block",width:350,fontSize:"14px"}}),o.a.createElement(Ea,{name:"outgoingProfessions",data:Wt.nextProfessions(),onRemove:Wt.removeProfessionFromHistory,style:{display:"inline-block",width:200,height:40,fontSize:"14px"}})),o.a.createElement("div",{style:{paddingTop:50,width:890,display:"flex"}},o.a.createElement("div",{style:{width:230,height:50}}),o.a.createElement(Da,{style:{width:650}})),o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:860,display:"flex"}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:0,width:430}},o.a.createElement(Fa,{style:{width:400,height:170,paddingLeft:40,paddingTop:60}},n.meleeWeapons.map(e=>o.a.createElement(Ta,{key:e.name,name:"meleeWeapons",weapon:e,disabled:!0}))),o.a.createElement(Fa,{style:{width:400,height:180,paddingLeft:30,paddingTop:60}},n.rangedWeapons.map(e=>o.a.createElement(Wa,{key:e.rangedWeapon.name,pWep:e}))),o.a.createElement(Fa,{style:{width:400,height:230,paddingLeft:20,paddingTop:50}},n.armor.map(e=>o.a.createElement(Bt,{key:e.name,name:"meleeWeapons",armor:e,disabled:!0})))),o.a.createElement("div",{style:{paddingTop:0,paddingLeft:10,width:210}},o.a.createElement(Fa,{style:{width:200,height:315,paddingLeft:0,paddingTop:60}},n.skills.map(e=>o.a.createElement(De.a,{title:e.description},o.a.createElement("p",{key:e.name,style:{margin:0}},e.name)))),o.a.createElement(Kt,null)),o.a.createElement(Fa,{style:{height:350,width:200,paddingTop:60},listStyle:{height:250,width:"100%",overflow:"auto"}},n.spellSchools.map(e=>o.a.createElement("p",{key:xa.spellSchoolLevelText(e),style:{margin:0}},xa.spellSchoolLevelText(e)))))),o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840,display:"flex"}},o.a.createElement(Fa,{style:{width:630,height:170,paddingTop:50}},n.spells.map(e=>o.a.createElement(Na,{spell:e,disabled:!0}))),o.a.createElement("div",{style:{width:200}},o.a.createElement("div",{style:{width:"100%",height:50,paddingTop:60,textAlign:"center"}},n.fatePoints),o.a.createElement("div",{style:{width:"100%",height:50,paddingTop:35,textAlign:"center"}},n.mana),o.a.createElement("div",{style:{width:"100%",height:50,paddingTop:40,textAlign:"center"}},n.currentMana))),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:300,paddingTop:20}},o.a.createElement(Fa,{style:{width:300,height:368,paddingTop:30}},n.inventory.map(e=>o.a.createElement("div",{key:e.id,style:{width:290,display:"flex"}},o.a.createElement("div",{style:{width:150,minWidth:150}},e.item.name),o.a.createElement("div",{style:{width:70,textAlign:"center"}},qt.calculateWeight(e)," kg"),o.a.createElement("div",{style:{width:50,textAlign:"center"}},e.amount)))),o.a.createElement("div",{style:{paddingLeft:200}},Dt.inventoryWeight()," kg"),o.a.createElement(Fa,{style:{width:285,height:150,paddingTop:50}},n.money.map(e=>o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:150}},e.currency.name),o.a.createElement("div",{style:{width:35,textAlign:"center"}},e.amount.gold),o.a.createElement("div",{style:{width:35,textAlign:"center"}},e.amount.silver),o.a.createElement("div",{style:{width:50,textAlign:"center"}},e.amount.lead))))),o.a.createElement("div",null,o.a.createElement(va,null),o.a.createElement("div",{style:{width:350,height:160,paddingTop:55,display:"flex"}},o.a.createElement(Fa,{style:{width:90,height:100}},n.languages.map(e=>o.a.createElement("div",null,e.name))),o.a.createElement("div",{style:{width:130,height:100,paddingLeft:10}},n.health),o.a.createElement("div",{style:{width:100,paddingLeft:10,textAlign:"center"}},n.sanityPoints)),o.a.createElement("div",{style:{width:350}},o.a.createElement("div",{style:{width:170,height:50,marginLeft:170,marginTop:50}},n.nation&&n.nation.name),o.a.createElement("div",{style:{width:120,height:35,marginTop:0,marginLeft:220}},n.parents),o.a.createElement("div",{style:{width:220,height:80,marginLeft:110}},n.family)),o.a.createElement("div",{style:{width:350,display:"flex"}},o.a.createElement("div",{style:{width:80,height:60,marginTop:10,marginLeft:110}},n.socialLevel),o.a.createElement("div",{style:{width:150,marginTop:35,marginLeft:5}},n.religion&&n.religion.name))),o.a.createElement("div",{style:{marginLeft:20,marginTop:50}},o.a.createElement("div",{style:{marginTop:20}},"aktualnie:"),o.a.createElement("div",{style:{width:150,height:150}},n.experience),o.a.createElement("div",{style:{marginTop:20}},"ca\u0142kowicie:"),o.a.createElement("div",{style:{width:150,height:150}},n.totalExperience))),o.a.createElement(Fa,{style:{width:700},listStyle:{height:100},name:ot.entityName,propName:"animals"},n.animals.map(e=>o.a.createElement(kt,{animal:e}))))),o.a.createElement(Pe.a,{anchorEl:this.state.anchorEl,open:this.state.currentElement&&null!==this.state.anchorEl,onClose:this.handleClose},this.state.currentElement&&this.state.currentElement.map(e=>o.a.createElement(We.a,{onClick:()=>{this.handleClose(),this.state[e+"Action"]()}},a(e)))))}}var Ha=h()(()=>({root:{marginTop:5,background:"url(".concat(Ot.a,")"),fontFamily:"wfrp",fontSize:"24px",backgroundSize:"cover",height:"1231px",width:"1800px",display:"flex"},genderSelect:{display:"inline-block",width:85}}))(Object(g.b)()(Va));const ja={root:{display:"flex"},field:{width:"100%"}},Ma=(e,t,a)=>{const n=e.name,i=e.type,s=e.suggestions,r=e.toView,l=e.toModel;let c=U.data.entity[n];c=r?r(c):c;const m=Ka(n,l);switch(i){case N:return o.a.createElement(J.a,{key:n,label:t(n),value:c||"",onChange:m,style:ja.field,InputProps:{readOnly:!a}});case f:return o.a.createElement(J.a,{key:n,label:t(n),value:c||"",onChange:m,style:ja.field,type:"password",InputProps:{readOnly:!a}});case x:return o.a.createElement(J.a,{key:n,label:t(n),value:c||"",onChange:m,multiline:!0,style:ja.field,InputProps:{readOnly:!a}});case R:return o.a.createElement(ie,{key:n,label:t(n),value:c||"",onChange:m,style:ja.field,InputProps:{readOnly:!a}});case T:return o.a.createElement(J.a,{key:n,label:t(n),value:c||"",type:"number",onChange:m,style:ja.field,InputProps:{readOnly:!a}});case D:return o.a.createElement(Re,{key:n,name:n,value:c,editable:a});case S:return o.a.createElement(Ie,{key:n,name:n,suggestions:s,editable:a});case L:return o.a.createElement(Ie,{key:n,name:n,suggestions:s,multi:!0,editable:a});case I:return o.a.createElement(te,{key:n,name:n,suggestions:s,value:c,editable:a});case b:return o.a.createElement(te,{key:n,name:n,suggestions:s,value:c,multi:!0,editable:a});case O:return o.a.createElement(Se,{key:n,name:n,editable:a});case A:return o.a.createElement(oe,{key:n,name:n,editable:a});case P:return o.a.createElement(xe,{id:n,name:n,value:c,editable:a});case W:return o.a.createElement(me,{key:n,name:n,suggestions:s,editable:a});case k:return o.a.createElement(Ae,{key:n});case F:return a?o.a.createElement(ba,null):o.a.createElement(Ha,null)}throw e},Ka=(e,t)=>a=>{const n=a.target?a.target.value:a,i=t?t(n):n,s=U.data.entity;s.updateWith({[e]:i}),U.update({entity:s})};class Ga extends l.Component{constructor(...e){super(...e),this.saveForm=()=>{const e=this.props,t=e.entity,a=e.entityName;U.services[a].save(t,()=>U.showTable(a))},this.getFormFields=()=>{const e=this.props,t=e.entityName,a=e.t,n=q.hasAuthority(t);return U.formFields[t].map(e=>Ma(e,a,n)).map(e=>o.a.createElement(m.a,{key:e.key,item:!0},e))},this.updateEntity=(e,t)=>a=>{const n=t?t(a.target.value):a.target.value;this.updateForm({[e]:n})},this.updateForm=e=>{this.props.entity.updateWith(e),this.setState({entity:this.props.entity})}}render(){const e=this.props,t=e.entityName,a=e.classes,n=q.hasAuthority(t);return o.a.createElement(m.a,{container:!0,direction:"column",className:a.root},this.getFormFields(),o.a.createElement(m.a,{item:!0},n?[o.a.createElement(d.a,{onClick:this.saveForm},o.a.createElement(u.a,null)),o.a.createElement(d.a,{onClick:()=>U.showTable(t)},o.a.createElement(y.a,null))]:o.a.createElement(d.a,{onClick:()=>{U.data.afterForm?U.data.afterForm():U.showTable(t)}},o.a.createElement(E.a,null))))}}var Ua=Object(g.b)()(h()(e=>({root:{width:"95%",margin:"auto"}}))(Ga)),Ba=a(612);class _a extends j{updateWith(e){return super.updateWith(e),this.updateEntityProp("nation",()=>new tt),this}}_a.entityName="place",G(_a,[M("name",N),M("description",x),M("nation",S)],[K("name",N),K("description",x),K("nation",S,tt.entityName)]);class Ya extends j{updateWith(e){return super.updateWith(e),this.updateEntityProp("place",()=>new _a),this}}Ya.entityName="picture",G(Ya,[M("name",N),M("place",S)],[]);const za=new class extends B{uploadPicture(e,t){this.rawPostRequest(Ya.entityName,e,t)}updateMetadata(e,t){this.postRequestWithoutResponse(e,Ya.entityName,t)}};class Xa extends l.Component{constructor(...e){super(...e),this.onResponse=()=>{U.showTable(Ya.entityName),U.services.picture.loadData()},this.upload=e=>{const t=e[0];if(!t)return;const a=new FormData;a.append("file",t),za.uploadPicture(a,this.onResponse)},this.setName=e=>{const t=e.target.value;this.props.value.name=t,this.setState({name:t})},this.setPlace=e=>{this.props.value.place=e,this.setState({place:e})},this.save=()=>{const e=this.props.value,t={id:e.id,name:e.name};e.place&&(t.placeId=e.place.id),za.updateMetadata(t,this.onResponse)}}render(){const e=this.props,t=e.value,a=e.t,n=q.hasAuthority(Ya.entityName);return o.a.createElement("div",{style:{margin:10}},t?o.a.createElement(m.a,{container:!0,spacing:2},o.a.createElement(m.a,{item:!0,container:!0,xs:12,alignItems:"center"},o.a.createElement(m.a,{item:!0,xs:4},o.a.createElement(J.a,{value:t?t.name:"",onChange:this.setName,disabled:!t})),o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(Ie,{name:_a.entityName,onChange:this.setPlace,value:t.place,editable:!0})),o.a.createElement(m.a,{item:!0,xs:2},n?o.a.createElement(de.a,{onClick:this.save},a("save")):o.a.createElement("div",null))),o.a.createElement(m.a,{item:!0,xs:12},o.a.createElement("img",{src:Ya.entityName+"/"+t.id,alt:t.name,style:{maxWidth:"80vw",maxHeight:"50vh"}}))):o.a.createElement(Ba.a,{acceptedFiles:["image/jpeg","image/jpg","image/png"],onChange:this.upload}),o.a.createElement(d.a,{onClick:()=>U.showTable(Ya.entityName)},o.a.createElement(y.a,null)))}}var qa=Object(g.b)()(Xa),Ja=a(411),Qa=a(611);class Za extends j{constructor(...e){super(...e),this.places=[],this.persons=[]}updateWith(e){return this.updateProp(e,"id"),this.updateProp(e,"uuid"),this.updateProp(e,"name"),this.updateEntityProp(e,"realm",()=>new Nt),this.updateEntityList(e,"places",()=>new _a),this.updateEntityList(e,"persons",()=>new gt),this}}Za.entityName="scenario",G(Za,[M("name",N),M("realm",S)],[K("name",N),K("realm",S,Nt.entityName),K("places",L,_a.entityName),K("persons",L,gt.entityName)]);class $a extends l.Component{constructor(...e){super(...e),this.state={currentScenario:void 0,images:[],imgStyle:{maxWidth:"40vw",height:"30vh"},viewerIsOpen:!1,currentImage:null},this.fetchImages=e=>{(class{static fetchPicturesForScenario(e,t){fetch("".concat(Ya.entityName,"/").concat(Za.entityName,"/").concat(e.id),{method:"get"}).then(e=>{e.ok?e.json().then(t):alert(e.status)})}}).fetchPicturesForScenario(e,e=>{const t=e.map(e=>"picture/".concat(e));this.setState({images:t})})}}render(){const e=U.data.entity,t=this.state,a=t.images,n=t.imgStyle,i=t.viewerIsOpen,s=t.currentImage;return o.a.createElement("div",{style:{paddingTop:10}},e?o.a.createElement(m.a,{container:!0,spacing:2},o.a.createElement(m.a,{item:!0,container:!0,xs:3},e.persons.map(t=>o.a.createElement(m.a,{item:!0,xs:3},o.a.createElement(de.a,{onClick:()=>{U.showForm(gt.entityName,t),U.update({afterForm:()=>U.updateScenario(e)})}},t.name)))),o.a.createElement(m.a,{item:!0,container:!0,xs:9,spacing:2},a.map((e,t)=>o.a.createElement(m.a,{item:!0},o.a.createElement(pe.a,{elevation:6},o.a.createElement("img",{src:e,alt:e,style:n,onClick:()=>this.setState({currentImage:t,viewerIsOpen:!0})})))))):o.a.createElement("div",null,o.a.createElement(Ie,{name:Za.entityName,onChange:e=>{U.updateScenario(e),this.fetchImages(e)},value:null,editable:!0})),o.a.createElement(Qa.a,null,o.a.createElement(Ja.a,{onClose:()=>this.setState({viewerIsOpen:!1,currentImage:null}),open:i},o.a.createElement(Qa.b,{currentIndex:s,views:a.map(e=>({source:e}))}))))}}var en=Object(g.b)()($a),tn=a(655),an=a(656),nn=a(657),sn=a(658),rn=a(591),ln=a.n(rn);const on=[tt.entityName,at.entityName,rt.entityName,nt.entityName,st.entityName,Ze.entityName,gt.entityName],cn={nation:"nations",worldLanguage:"languages",religion:"religions",currency:"currencies",race:"races",spellSchool:"spellSchools",person:"persons"};class mn extends B{constructor(...e){super(...e),this.getRealmData=e=>{e&&this.requestForPath("realmData/".concat(e.id),t=>U.update({currentRealmData:t,currentRealm:e}))}}static hasRealmData(e){return U.data.currentRealm&&U.data.currentRealmData&&on.includes(e)}static getRealmData(e){return U.data.currentRealmData[cn[e]]}}class dn extends l.Component{constructor(...e){super(...e),this.options={filterType:"textField",selectableRows:"single",selectableRowsOnClick:!0,disableToolbarSelect:!0,selectableRowsHeader:!1,customToolbarSelect:(e,t,a)=>{if(e.data.length>0){const a=U.data.showTable,n=t[e.data[0].dataIndex],i=Tt(U.data[a],{name:n.data[0]});return q.hasAuthority(a)?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(d.a,{onClick:()=>U.showForm(a,i)},o.a.createElement(tn.a,null)),o.a.createElement(d.a,{onClick:()=>U.services[a].delete(i)},o.a.createElement(an.a,null)))):o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{onClick:()=>U.showForm(a,i)},o.a.createElement(nn.a,null)))}return o.a.createElement(o.a.Fragment,null)}},this.translateColumns=e=>{const t=this.props.t;return e.forEach(e=>e.label=t(e.name)),e}}render(){const e=U.data.showTable,t=this.props.t,a=q.hasAuthority(e),n=o.a.createElement("div",null,t(e),a?o.a.createElement(d.a,{onClick:()=>U.update({showTable:null,showForm:e,entity:U.suppliers[e]()})},o.a.createElement(sn.a,null)):o.a.createElement("div",null)),i=mn.hasRealmData(e)?mn.getRealmData(e):U.data[e];return o.a.createElement(ln.a,{title:n,options:this.options,columns:this.translateColumns(U.columns[e]),data:i})}}var pn=Object(g.b)()(dn);class hn extends l.Component{render(){const e=U.data,t=e.showTable,a=e.showForm,n=e.showScenario,i=e.entity;let s=o.a.createElement("div",null);return t?s=o.a.createElement(pn,null):a?s="picture"===a?o.a.createElement(qa,{value:i.id?i:void 0}):o.a.createElement(Ua,{entity:i,entityName:a}):n&&(s=o.a.createElement(en,null)),s}}var un=hn,yn=a(654),En=a(404),gn=a(111),vn=a(607),wn=a.n(vn);class Nn extends He{constructor(...e){super(...e),this.price=new Ue,this.availability="COMMON",this.placement=_e.NECK}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ue),this.updateEntityProp(e,"primaryResource",()=>new Be),this.updateEntityProp(e,"secondaryResource",()=>new Be),this}}Nn.entityName="jewelry",G(Nn,[M("name",N),M("description",x),M("price",O),M("availability",N)],[K("name",N),K("description",x),K("weight",T),K("price",O),K("availability",I,"availability"),K("primaryResource",S,Be.entityName),K("secondaryResource",S,Be.entityName),K("placement",I,"placementJewelry")]);const fn={[tt.entityName]:[],[nt.entityName]:[tt.entityName],[at.entityName]:[tt.entityName],[st.entityName]:[],[rt.entityName]:[tt.entityName],[_a.entityName]:[tt.entityName],[ct.entityName]:[],[mt.entityName]:[],[dt.entityName]:[],[Et.entityName]:[],[lt.entityName]:[],[ot.entityName]:[lt.entityName],[Fe.entityName]:[],[Ze.entityName]:[],[$e.entityName]:[Ze.entityName],[Ve.entityName]:[],[je.entityName]:[Ve.entityName],[Xe.entityName]:[],[ze.entityName]:[Be.entityName,Ye.entityName,Ge.entityName],[Qe.entityName]:[Be.entityName,Je.entityName],[ut.entityName]:[Be.entityName,pt.entityName],[ht.entityName]:[Be.entityName,pt.entityName],[Ye.entityName]:[],[Je.entityName]:[],[pt.entityName]:[],[Ge.entityName]:[],[Nn.entityName]:[Be.entityName],[Be.entityName]:[],[Nt.entityName]:[],[Za.entityName]:[_a.entityName,gt.entityName],[Ya.entityName]:[],[gt.entityName]:[nt.entityName,at.entityName,st.entityName,rt.entityName,Et.entityName,ot.entityName,Fe.entityName,Ze.entityName,$e.entityName,je.entityName,Xe.entityName,ze.entityName,Qe.entityName,ut.entityName,Nn.entityName]};class xn{static refreshData(){Object.keys(U.services).forEach(e=>U.services[e].loadData())}static refreshForEntity(e){U.services[e].loadData(),fn[e].forEach(e=>this.refreshForEntity(e))}}class Cn extends l.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.handleClick=e=>{this.setState({anchorEl:e.currentTarget})},this.handleClose=()=>{this.setState({anchorEl:null})},this.handleItemClick=e=>()=>{this.handleClose(),xn.refreshForEntity(e),U.showTable(e)}}render(){const e=this.props,t=e.t,a=e.name,n=e.entities;return o.a.createElement("div",null,o.a.createElement(de.a,{id:a,onClick:this.handleClick},t(a)),o.a.createElement(Pe.a,{id:a,anchorEl:this.state.anchorEl,open:null!==this.state.anchorEl,onClose:this.handleClose},n.map(e=>o.a.createElement(We.a,{key:e,onClick:this.handleItemClick(e)},t(e)))))}}var Rn=Object(g.b)()(Cn),Tn=a(608),In=a.n(Tn);class bn extends l.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.handleClick=e=>{this.setState({anchorEl:e.currentTarget})},this.handleClose=()=>{this.setState({anchorEl:null})},this.showPictureForm=()=>{this.handleClose(),U.showTable(Ya.entityName)},this.showScenarioView=()=>{this.handleClose(),U.updateScenario(null)},this.showUsersTable=()=>{this.handleClose(),U.showTable(Y.entityName)}}render(){const e=this.props.t,t=q.hasAuthority("admin");return o.a.createElement("div",null,o.a.createElement(d.a,{"aria-label":"More","aria-owns":null!==this.state.anchorEl?"app-tools-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},o.a.createElement(In.a,null)),o.a.createElement(Pe.a,{id:"app-tools-menu",anchorEl:this.state.anchorEl,open:null!==this.state.anchorEl,onClose:this.handleClose},t&&o.a.createElement(We.a,{onClick:this.showUsersTable},e("user")),o.a.createElement(We.a,{onClick:this.showPictureForm},e("picture")),o.a.createElement(We.a,{onClick:this.showScenarioView},e("scenario"))))}}var Sn=Object(g.b)()(bn);const Ln=new mn;class On extends l.Component{constructor(...e){super(...e),this.showTable=e=>()=>{U.update({showTable:e})}}render(){const e=this.props,t=e.i18n,a=e.classes,n=q.hasAuthority("gamemaster")?[o.a.createElement(Rn,{name:"world",entities:[tt.entityName,nt.entityName,at.entityName,st.entityName,rt.entityName,_a.entityName,Nt.entityName,Za.entityName]}),o.a.createElement(Rn,{name:"knowledge",entities:[Fe.entityName,Ve.entityName,je.entityName,Ze.entityName,$e.entityName]}),o.a.createElement(Rn,{name:"crafting",entities:[Xe.entityName,ze.entityName,Qe.entityName,ut.entityName,ht.entityName,Nn.entityName]}),o.a.createElement(Rn,{name:"types",entities:[Ye.entityName,Je.entityName,pt.entityName,Ge.entityName,Be.entityName]}),o.a.createElement(Rn,{name:"creature",entities:[...U.data.currentRealm?[gt.entityName]:[],ct.entityName,mt.entityName,dt.entityName,Et.entityName,ot.entityName,lt.entityName]})]:o.a.createElement("div",null);return o.a.createElement(yn.a,{position:"relative"},o.a.createElement(En.a,null,o.a.createElement(Sn,null),n,o.a.createElement("div",{className:a.languageIcon},U.data.fetching.size>0&&o.a.createElement(d.a,null,o.a.createElement(gn.a,{color:"secondary"})),o.a.createElement(Z.a,{className:a.realmSelect,options:U.data.realm,getOptionLabel:e=>o.a.createElement("div",null,e.name),getOptionValue:e=>e.id,filterOption:(e,t)=>e.data.name.startsWith(t),value:U.data.currentRealm,onChange:e=>Ln.getRealmData(e)}),o.a.createElement(d.a,{onClick:()=>t.changeLanguage("en")},o.a.createElement(wn.a,{code:"gb",height:16})),o.a.createElement(d.a,{onClick:()=>t.changeLanguage("pl")},o.a.createElement(wn.a,{code:"pl",height:16})))))}}var An=h()(e=>({languageIcon:{marginLeft:"auto",display:"flex"},realmSelect:{width:200}}))(Object(g.b)()(On)),Dn=a(105),Pn=a(609),Wn=a.n(Pn);const kn=new V;kn.name="username",kn.type=N;const Fn=new V;Fn.name="password",Fn.type=f;class Vn extends l.Component{constructor(...e){super(...e),this.login=()=>{const e=U.data.entity;e&&e.username&&e.password&&fetch("login",{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{e&&(U.updateUser(Object(v.a)({},e,{token:!0})),q.updateAdminAuthoritiesIfNeeded(),xn.refreshData())})}}render(){const e=this.props.t;return(new V).name="username",o.a.createElement(m.a,{container:!0,alignItems:"center",spacing:2,xs:12,direction:"column"},o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(Dn.a,null,"WFRP Helper")),o.a.createElement(m.a,{item:!0,xs:6},Ma(kn,e,!0)),o.a.createElement(m.a,{item:!0,xs:6},Ma(Fn,e,!0)),o.a.createElement(m.a,{item:!0,xs:8},o.a.createElement(de.a,{onClick:this.login},e("login")),o.a.createElement(de.a,null,e("signup"))),o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(de.a,null,o.a.createElement("img",{src:Wn.a,alt:e("login with Google"),style:{width:50,height:50}}),o.a.createElement("a",{href:"https://wfrp-helper.ey.r.appspot.com/oauth2/authorize/google?redirect_uri=https://wfrp-helper-frontend-dot-wfrp-helper.ey.r.appspot.com/oauth2/redirect",style:{fontSize:18}},e("login with Google")))))}}var Hn=Object(g.b)()(Vn);class jn extends l.Component{render(){const e=new RegExp("[\\?&]token=([^&#]*)").exec(this.props.location.search)[1];return U.updateUser({token:e}),o.a.createElement(c.a,{to:"/"})}}var Mn=jn;const Kn=new q;class Gn extends l.Component{constructor(...e){super(...e),this.state={password:null,repeat:null},this.onChange=e=>t=>{this.setState({[e]:t.target.value})},this.savePassword=()=>{const e=this.state,t=e.password;t===e.repeat&&Kn.updatePassword(t)}}render(){const e=this.state,t=e.password,a=e.repeat,n=this.props.t;return o.a.createElement("div",null,o.a.createElement(J.a,{key:"password",label:n("password"),value:t||"",type:"password",onChange:this.onChange("password")}),o.a.createElement(J.a,{key:"passwordRepeat",label:n("passwordRepeat"),value:a||"",type:"password",onChange:this.onChange("repeat")}),o.a.createElement(de.a,{onClick:this.savePassword},n("save")))}}var Un=Object(g.b)()(Gn);const Bn=Object(s.a)({palette:{primary:n.a,secondary:i.a}}),_n=new q;class Yn extends l.Component{constructor(e,t){super(e,t),U.onUpdate=e=>{this.setState({data:e})},U.data.entity=new Y}render(){const e=U.data.currentUser,t=e.token,a=e.oneTimePassword;return t?a?o.a.createElement(r.a,{theme:Bn},o.a.createElement(Un,null)):(U.data.currentUser.authorities||_n.refreshAuthorities(),U.data.initialized||(xn.refreshData(),U.data.initialized=!0),o.a.createElement(r.a,{theme:Bn},o.a.createElement(An,null),o.a.createElement(un,null))):o.a.createElement(r.a,{theme:Bn},o.a.createElement(c.d,null,o.a.createElement(c.b,{exact:!0,path:"/index.html",component:Hn}),o.a.createElement(c.b,{exact:!0,path:"/",component:Hn}),o.a.createElement(c.b,{path:"/oauth2/redirect",component:Mn})))}}}}]);
//# sourceMappingURL=4.e9fb7385.chunk.js.map