(this["webpackJsonpwfrp-helper-web"]=this["webpackJsonpwfrp-helper-web"]||[]).push([[4],{376:function(e,t,a){e.exports=a.p+"static/media/A.8ca41e5c.png"},609:function(e,t,a){e.exports=a.p+"static/media/google-logo.36158af3.png"},659:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Mn}));var n=a(32),i=a(36),s=a(55),r=a(637),l=a(0),o=a.n(l),c=a(3),m=a(109),d=a(348),p=a(129),h=a.n(p),u=a(640),E=a(641),y=a(642),g=(a(13),a(48)),v=a(132);class w{updateWith(e){return Object.assign(this,e),this}updateProp(e,t){(e[t]||""===e[t])&&(this[t]=e[t])}updateNumProp(e,t){(e[t]||0===e[t]||""===e[t])&&(this[t]=e[t])}updateEntityProp(e,t,a){e[t]&&(this[t]=a(),this[t].updateWith(e[t]))}updateEntityList(e,t,a){e[t]&&(this[t]=e[t].map(e=>{const t=a();return t.updateWith(e),t}))}}const f="text",N="password",x="text_area",C="boolean",T="integer",R="float",I="enum_select",b="enum_combobox",S="entity_select",L="entity_combobox",A="price",O="action_time",D="determinant",P="modifier",W="blueprint_select",k="race_determinants",F="character_sheet";var V=class{};class H{constructor(e){this.loadData=()=>{K.fetching(this.entityName),fetch(this.entityName,{mode:"cors",headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer "+K.data.currentUser.token}}).then(this.handleErrors).then(e=>e.json()).then(e=>e.map(e=>K.suppliers[this.entityName]().updateWith(e))).then(e=>{K.update({[this.entityName]:e}),K.fetchingFinished(this.entityName)})},this.save=(e,t)=>{fetch(this.entityName,{method:"post",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+K.data.currentUser.token},body:JSON.stringify(e)}).then(this.handleErrors).then(this.loadData).then(t)},this.handleErrors=e=>{if(200!==e.status){let t=e.json();throw 400===e.status?t.then(e=>{window.confirm(Array.from(new Set(e.errors.map(e=>"cannot set field "+e.field+" with "+e.rejectedValue+", "+e.message))).join("\n"))}):409===e.status?t.then(e=>{window.confirm(e.errors[0].message)}):403!==e.status&&401!==e.status||K.updateUser({token:null}),e}return e},this.entityName=e}delete(e){fetch(this.entityName,{method:"delete",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+K.data.currentUser.token},body:JSON.stringify(e)}).then(this.handleErrors).then(()=>this.loadData())}}var j=class extends w{};const M=(e,t)=>{const a={filter:!1,sort:!1},n={name:e,options:a};switch(t){case f:case R:case T:case C:a.filter=!0,a.sort=!0;break;case A:case P:case O:a.filter=!1,a.sort=!0,a.customBodyRender=e=>e?e.toString():"";break;case S:case L:a.filter=!0,a.sort=!0,a.customBodyRender=e=>e?e.name:"";break;default:a.filter=!1,a.sort=!1}return n},U=(e,t,a,n,i)=>{const s=new V;return s.name=e,s.type=t,s.suggestions=a,s.toView=n,s.toModel=i,s},B=(e,t,a)=>{K.suppliers[e.entityName]=()=>new e,K.services[e.entityName]=new H(e.entityName),K.columns[e.entityName]=t,K.formFields[e.entityName]=a},K={data:{showTable:null,showForm:null,afterForm:null,fetching:new Set,currentUser:{username:null,password:null,token:null}},services:{},formFields:{},columns:{},suppliers:{},onUpdate:e=>{},update(e){this.data=Object(v.a)({},this.data,{},e),this.onUpdate(this.data)},updateUser(e){this.data.currentUser=Object(v.a)({},this.data.currentUser,{},e),this.onUpdate(this.data)},showTable(e){this.update({entity:null,showForm:null,showTable:e,showScenario:!1})},showForm(e,t){this.update({entity:t,showForm:e,showTable:null,showScenario:!1})},updateScenario(e){this.update({entity:e,showForm:null,showTable:null,showScenario:!0})},updateEntity(e){this.data.entity.updateWith(e),this.update({entity:this.data.entity})},fetching(e){this.data.fetching.add(e),this.update({fetching:this.data.fetching})},fetchingFinished(e){this.data.fetching.delete(e),this.update({fetching:this.data.fetching})}};class G{constructor(){this.handleRawResponse=e=>t=>{200===t.status?t.text().then(e):403===t.status||401===t.status?K.updateUser({token:null}):console.warn(t.status)},this.handleResponse=e=>t=>{200===t.status?t.json().then(e):403===t.status||401===t.status?K.updateUser({token:null}):console.warn(t.status)}}requestFor(e,t,a){const n=JSON.stringify(e);fetch(t,{method:"post",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+K.data.currentUser.token},body:n}).then(this.handleResponse(a))}postRequestWithoutResponse(e,t,a){const n=JSON.stringify(e);fetch(t,{method:"post",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+K.data.currentUser.token},body:n}).then(this.handleRawResponse(a))}requestForPath(e,t){fetch(e,{method:"get",mode:"cors",headers:{Authorization:"Bearer "+K.data.currentUser.token}}).then(this.handleResponse(t))}rawGetRequestFor(e,t){fetch(e,{method:"get",mode:"cors",headers:{Authorization:"Bearer "+K.data.currentUser.token}}).then(this.handleRawResponse(t))}rawPostRequest(e,t,a){fetch(e,{method:"post",mode:"cors",headers:{Authorization:"Bearer "+K.data.currentUser.token},body:t}).then(this.handleRawResponse(a))}}class _ extends j{}_.entityName="role",K.suppliers.role=()=>new _;class z extends j{}z.entityName="user",K.suppliers.user=()=>new z,K.columns.user=[M("username",f)],K.formFields.user=[U("authorities",L,_.entityName)];const Y=new H(z.entityName),X=new H(_.entityName);class q extends G{refreshAuthorities(){this.requestForPath("authorities",e=>{K.updateUser({authorities:e}),q.updateAdminAuthoritiesIfNeeded()})}static hasAuthority(e){const t=K.data.currentUser.authorities;return t&&t.find(t=>t.authority.toLowerCase().endsWith(e.toLowerCase()))}updatePassword(e){this.postRequestWithoutResponse(Object(v.a)({},K.data.currentUser,{},{password:e}),"password",()=>K.updateUser({oneTimePassword:!1}))}static updateAdminAuthoritiesIfNeeded(){q.hasAuthority("admin")&&(X.loadData(),Y.loadData(),K.services.user=Y)}}var J=a(333),Q=a(624),Z=a(159),$=a(162);class ee extends l.Component{render(){const e=this.props,t=e.t,a=e.name,n=e.suggestions,i=void 0===n?a:n,s=e.value,r=e.label,l=void 0===r?t(a):r,c=e.data,d=void 0===c?K.data[i]:c,p=e.onChange,h=void 0===p?e=>K.updateEntity({[a]:e}):p,u=e.multi,E=e.editable;return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},o.a.createElement(Q.a,null,l)),o.a.createElement(m.a,{item:!0},o.a.createElement(Z.a,{textFieldProps:{label:l,InputLabelProps:{shrink:!1}},styles:ee.style,options:d,components:Object($.a)(),onChange:h,value:u?s:{label:s,value:s},getOptionLabel:e=>o.a.createElement("div",null,e.label?e.label:"string"===typeof e?e:void 0),getOptionValue:e=>e,isSearchable:!0,isClearable:!0,isMulti:u,isDisabled:!E})))}}ee.style={control:(e,t)=>Object(v.a)({},e,{width:400,marginLeft:10})};var te=Object(g.b)()(ee),ae=a(126);class ne extends l.Component{constructor(...e){super(...e),this.updateInt=e=>t=>{let a=parseInt(t.target.value);(a||0===a)&&e(a)}}render(){const e=this.props,t=e.onChange,a=Object(ae.a)(e,["onChange"]);return o.a.createElement(J.a,Object.assign({type:"number",onChange:this.updateInt(t)},a))}}var ie=ne;const se={ACTION:"ACTION",ROUND:"ROUND",TURN:"TURN",allOf(){return[this.ACTION,this.ROUND,this.TURN]}};class re extends w{constructor(...e){super(...e),this.actionType=se.ACTION,this.amount=1}toString(){switch(this.actionType){case se.ACTION:return this.amount;case se.ROUND:return this.amount+"r";case se.TURN:return this.amount+"t";default:return this.amount}}}class le extends l.Component{constructor(...e){super(...e),this.onUpdate=e=>{const t=this.props,a=t.name,n=t.value,i=void 0===n?K.data.entity[a]:n;Object.assign(i,e),K.updateEntity({[a]:i})}}render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.value,r=void 0===s?K.data.entity[a]:s,l=e.editable;return o.a.createElement(m.a,{container:!0,alignItems:"center",spacing:2},o.a.createElement(m.a,{item:!0},o.a.createElement(Q.a,null,i)),o.a.createElement(m.a,{item:!0},o.a.createElement(te,{key:"actionType",label:t("type"),data:se.allOf(),value:r.type,onChange:e=>this.onUpdate({type:e}),editable:l})),o.a.createElement(m.a,{item:!0},o.a.createElement(ie,{key:"amount",label:t("amount"),value:r.amount,onChange:e=>this.onUpdate({amount:e}),InputProps:{readOnly:!l}})))}}var oe=Object(g.b)()(le);class ce extends l.Component{render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.suggestions,r=void 0===s?a:s,l=e.data,c=void 0===l?K.data[r]:l,d=e.value,p=void 0===d?K.data.entity[a]:d,h=e.onChange,u=void 0===h?e=>K.updateEntity({[a]:e}):h,E=e.editable,y=p?o.a.createElement("div",null,t("price"),": ",p.suggestedPrice.toString(),",",t("wieght"),": ",p.suggestedWeight," kg"):o.a.createElement("div",null);return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},i),o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(Z.a,{textFieldProps:{label:i,InputLabelProps:{shrink:!1}},options:c,components:Object($.a)(),getOptionLabel:e=>o.a.createElement("div",null,e.name),getOptionValue:e=>e.id,filterOption:(e,t)=>e.data.name.startsWith(t),onChange:u,value:p,isDisabled:!E})),o.a.createElement(m.a,{item:!0},y))}}var me=Object(g.b)()(ce),de=a(347),pe=a(346),he=a(633);const ue={K2:"K2",K3:"K3",K4:"K4",K6:"K6",K8:"K8",K10:"K10",K12:"K12",K20:"K20",K100:"K100",allOf(){return[this.K2,this.K3,this.K4,this.K6,this.K8,this.K10,this.K12,this.K20,this.K100]}};class Ee extends j{toString(){return this.rolls+this.dice}}K.data.dice=ue.allOf();const ye={REGULAR:"REGULAR",PROFESSION:"PROFESSION",EXPERIENCE:"EXPERIENCE",DICE:"DICE",allOf(){return[this.REGULAR,this.PROFESSION,this.EXPERIENCE,this.DICE]}};var ge=class extends j{constructor(...e){super(...e),this.type=ye.REGULAR,this.rolls=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"rolls",()=>new Ee),this}toString(){return this.type+" "+this.value+" "+this.rolls.map(e=>e.toString()).join(" ")}};class ve extends j{constructor(...e){super(...e),this.value=0,this.modifiers=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"modifiers",()=>new ge),this}getExperienceExtensions(){return this.modifiers.filter(e=>e.type===ye.EXPERIENCE)}calculateExperienceValue(){return this.value+this.getExperienceExtensions().reduce((e,t)=>e+t.value,0)}calculateFinalValue(){return this.value+this.modifiers.reduce((e,t)=>e+t.value,0)}}const we={SPEED:"SPEED",BATTLE:"BATTLE",SHOOTING:"SHOOTING",STRENGTH:"STRENGTH",DURABILITY:"DURABILITY",HEALTH:"HEALTH",INITIATIVE:"INITIATIVE",ATTACK:"ATTACK",DEXTERITY:"DEXTERITY",LEADER_SKILLS:"LEADER_SKILLS",INTELLIGENCE:"INTELLIGENCE",CONTROL:"CONTROL",WILL:"WILL",CHARISMA:"CHARISMA",PARRY:"PARRY",OPPONENT_PARRY:"OPPONENT_PARRY",allOf(){return[this.SPEED,this.BATTLE,this.SHOOTING,this.STRENGTH,this.DURABILITY,this.HEALTH,this.INITIATIVE,this.ATTACK,this.DEXTERITY,this.LEADER_SKILLS,this.INTELLIGENCE,this.CONTROL,this.WILL,this.CHARISMA,this.PARRY,this.OPPONENT_PARRY]},personal(){return[this.SPEED,this.BATTLE,this.SHOOTING,this.STRENGTH,this.DURABILITY,this.HEALTH,this.INITIATIVE,this.ATTACK,this.DEXTERITY,this.LEADER_SKILLS,this.INTELLIGENCE,this.CONTROL,this.WILL,this.CHARISMA]}};class fe extends l.Component{constructor(...e){super(...e),this.updateDiceRoll=e=>{this.props.value.updateWith(e),K.update({currentDiceRollEdit:this.props.value})}}render(){const e=this.props,t=e.value,a=e.id,n=e.editable;return o.a.createElement("div",{key:a},o.a.createElement(te,{key:a+"_type",label:"dice",data:ue.allOf(),value:t.dice,onChange:e=>this.updateDiceRoll({dice:e}),editable:n}),o.a.createElement(ie,{key:a+"_rolls",label:"rolls",value:t.rolls,onChange:e=>this.updateDiceRoll({rolls:e}),InputProps:{readOnly:!n}}))}}class Ne extends l.Component{constructor(...e){super(...e),this.update=e=>{this.props.value.updateWith(e),K.update({currentModifierEdit:this.props.value})},this.onAddDiceRoll=()=>{this.props.value.rolls.push(new Ee),K.update({currentModifierEdit:this.props.value})}}render(){const e=this.props,t=e.t,a=e.name,n=e.value,i=e.label,s=void 0===i?t(a):i,r=e.id,l=e.types,c=void 0===l?ye.allOf():l,d=e.editable;let p=o.a.createElement("div",null);return n.type===ye.DICE&&(p=o.a.createElement(m.a,{item:!0},n.rolls.map(e=>o.a.createElement(fe,{id:r,key:r,value:e,onChange:()=>K.update({currentModifierEdit:n}),editable:d})),d?o.a.createElement(de.a,{onClick:this.onAddDiceRoll},t("newDice")):o.a.createElement("div",null))),o.a.createElement(m.a,{container:!0,item:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},o.a.createElement(ie,{key:r+"_value",label:s+" \u2013 "+t("value"),value:n.value,onChange:e=>this.update({value:e}),InputProps:{readOnly:!d}})),o.a.createElement(m.a,{item:!0},o.a.createElement(te,{key:r||a+"_type",label:t("modifierType")+" "+a?t(a):n.id,data:c,value:n.type,onChange:e=>this.update({type:e}),editable:d})),p)}}var xe=Object(g.b)()(Ne);class Ce extends l.Component{constructor(...e){super(...e),this.deleteItem=e=>{const t=this.props.value;t.splice(t.indexOf(e),1),K.update({currentDeterminantEdit:t})},this.update=(e,t)=>{e.updateWith(t),K.updateEntity({[this.props.name]:this.props.value})},this.addDeterminant=()=>{const e=K.data.entity,t=this.props.name;e[t]?(e[t].push(new ve),K.updateEntity({[t]:e[t]})):K.updateEntity({[t]:[new ve]})},this.addModifierToDeterminant=e=>()=>{e.modifiers.push(new ge),K.updateEntity({[this.props.name]:this.props.value})},this.updateModifier=e=>t=>{e.updateWith(t),K.updateEntity({[this.props.name]:this.props.value})}}render(){const e=this.props,t=e.t,a=e.name,n=e.value,i=e.modifierTypes,s=void 0===i?ye.allOf():i,r=e.types,l=void 0===r?we.allOf():r,c=e.editable;return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},t(a)),o.a.createElement(m.a,{item:!0,container:!0,spacing:2,alignItems:"center"},n&&n.map(e=>(console.log(e),o.a.createElement(m.a,{item:!0,container:!0,spacing:2,alignItems:"center",key:e.id+e.type},o.a.createElement(m.a,{item:!0},o.a.createElement(te,{key:e.id+e.type,label:t(a)+e.type,data:l,value:e.type,onChange:t=>this.update(e,{type:t}),editable:c})),o.a.createElement(m.a,{item:!0},o.a.createElement(ie,{key:e.id+e.type+"value",label:"value",value:e.value,onChange:t=>this.update(e,{value:t}),InputProps:{readOnly:!c}})),o.a.createElement(m.a,{item:!0,container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},t("modifier")),o.a.createElement(m.a,{item:!0},e.modifiers&&e.modifiers.map(t=>o.a.createElement(pe.a,{key:e.id+e.type+"_"+t.id},o.a.createElement(xe,{id:e.id+e.type+t.id+t.type,value:t,types:s,editable:c})))),o.a.createElement(m.a,{item:!0},c?o.a.createElement(de.a,{onClick:this.addModifierToDeterminant(e)},t("newModifier")):o.a.createElement("div",null))),c?o.a.createElement(d.a,{key:e.id+e.type+"remove",onClick:()=>this.deleteItem(e)},o.a.createElement(he.a,null)):o.a.createElement("div",null))))),o.a.createElement(m.a,{item:!0},c?o.a.createElement(de.a,{onClick:this.addDeterminant},t("newDeterminant")):o.a.createElement("div",null)))}}var Te=Object(g.b)()(Ce);class Re extends l.Component{constructor(...e){super(...e),this.updateEntity=e=>{const t=this.props.name,a=K.data.entity;a.updateWith({[t]:e}),K.update({entity:a})}}render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.suggestions,r=void 0===s?a:s,l=e.data,c=void 0===l?K.data[r]:l,m=e.value,d=void 0===m?K.data.entity[a]:m,p=e.multi,h=void 0!==p&&p,u=e.onChange,E=void 0===u?this.updateEntity:u,y=e.editable;return o.a.createElement("div",null,o.a.createElement(Q.a,null,i),o.a.createElement(Z.a,{textFieldProps:{label:i,InputLabelProps:{shrink:!1}},options:c,components:Object($.a)(),getOptionLabel:e=>o.a.createElement("div",null,e.name||e.authority),getOptionValue:e=>e.id,filterOption:(e,t)=>!e.data.name||e.data.name.startsWith(t),onChange:E,value:d,isMulti:h,isDisabled:!y}))}}var Ie=Object(g.b)()(Re);class be extends l.Component{constructor(...e){super(...e),this.updatePrice=(e,t)=>a=>{const n=this.props,i=n.name,s=n.value,r=void 0===s?K.data.entity[i]:s;let l=parseInt(a.target.value);(l||0===l)&&e(Object(v.a)({},r,{},{[t]:l}))}}render(){const e=this.props,t=e.t,a=e.name,n=e.label,i=void 0===n?t(a):n,s=e.onChange,r=void 0===s?e=>K.updateEntity({[a]:e}):s,l=e.value,c=void 0===l?K.data.entity[a]:l,d=e.editable;return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},o.a.createElement(m.a,{item:!0},o.a.createElement(Q.a,{style:{marginRight:10}},i)),o.a.createElement(m.a,{item:!0},o.a.createElement(J.a,{label:t("gold"),type:"number",value:c.gold,onChange:this.updatePrice(r,"gold"),InputProps:{readOnly:!d}})),o.a.createElement(m.a,{item:!0},o.a.createElement(J.a,{label:t("silver"),type:"number",value:c.silver,onChange:this.updatePrice(r,"silver"),InputProps:{readOnly:!d}})),o.a.createElement(m.a,{item:!0},o.a.createElement(J.a,{label:t("lead"),type:"number",value:c.lead,onChange:this.updatePrice(r,"lead"),InputProps:{readOnly:!d}})))}}var Se=Object(g.b)()(be);const Le=["SPEED","BATTLE","SHOOTING","STRENGTH","DURABILITY","HEALTH","INITIATIVE","ATTACK","DEXTERITY","LEADER_SKILLS","INTELLIGENCE","CONTROL","WILL","CHARISMA"];class Ae extends l.Component{constructor(...e){super(...e),this.regenerateDeterminants=e=>{e.determinants&&0!==e.determinants.length?(e.determinants.filter(e=>!e.modifiers).forEach(e=>{e.modifiers=[new ge]}),e.determinants.filter(e=>0===e.modifiers.length).forEach(e=>e.modifiers.push(new ge))):Le.forEach(t=>{const a=new ge;a.type=ye.DICE;const n=new ve;n.type=t,n.modifiers.push(a),e.determinants.push(n)})},this.updateDiceType=e=>t=>{t||1!==e.modifiers[0].rolls.length?t&&0===e.modifiers[0].rolls.length?(e.modifiers[0].rolls.push(new Ee),e.modifiers[0].rolls[0].dice=t):e.modifiers[0].rolls[0].dice=t:e.modifiers[0].rolls.length=0,K.updateEntity(K.data.entity)},this.updateDiceRolls=e=>t=>{0===t&&1===e.modifiers[0].rolls.length?e.modifiers[0].rolls.length=0:t>0&&0===e.modifiers[0].rolls.length?(e.modifiers[0].rolls.push(new Ee),e.modifiers[0].rolls[0].rolls=t):e.modifiers[0].rolls[0].rolls=t,K.updateEntity(K.data.entity)},this.updateBasicModifier=e=>t=>{e.modifiers[0].value=t,K.updateEntity(K.data.entity)}}render(){const e=this.props.t,t=K.data.entity;this.regenerateDeterminants(t);const a=t.determinants.map(t=>[o.a.createElement(m.a,{item:!0,xs:1},e(t.type)),o.a.createElement(m.a,{item:!0,xs:3},o.a.createElement(te,{name:"dice",value:t.modifiers[0].rolls.length&&t.modifiers[0].rolls[0].dice,editable:!0,onChange:this.updateDiceType(t)})),o.a.createElement(m.a,{item:!0,xs:1},e("rolls")," ",o.a.createElement(ie,{value:t.modifiers[0].rolls.length&&t.modifiers[0].rolls[0].rolls,onChange:this.updateDiceRolls(t)})),o.a.createElement(m.a,{item:!0,xs:1},e("plus")," ",o.a.createElement(ie,{value:t.modifiers[0].value,onChange:this.updateBasicModifier(t)}))]);return o.a.createElement(m.a,{container:!0,spacing:2,alignItems:"center"},a.map(e=>o.a.createElement(m.a,{item:!0,container:!0,xs:12,alignItems:"center"},e)))}}var Oe=Object(g.b)()(Ae),De=a(379),Pe=a(432),We=a(380),ke=a(268);class Fe extends j{updateWith(e){return super.updateWith(e)}}Fe.entityName="skill",B(Fe,[M("name",f),M("description",x)],[U("name",f),U("description",x)]);class Ve extends j{constructor(...e){super(...e),this.skills=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"skills",()=>new Fe),this}}Ve.entityName="professionClass",B(Ve,[M("name",f),M("description",x)],[U("name",f),U("description",x),U("skills",L,Fe.entityName)]);class He extends j{constructor(...e){super(...e),this.determinants=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"determinants",()=>new ve),this}}class je extends He{constructor(...e){super(...e),this.skills=[],this.nextProfessions=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"professionClass",()=>new Ve),this.updateEntityList(e,"skills",()=>new Fe),this}}je.entityName="profession",B(je,[M("name",f),M("description",x)],[U("name",f),U("description",x),U("professionClass",S,Ve.entityName),U("determinants",D),U("skills",L,Fe.entityName),U("nextProfessions",b,je.entityName)]);class Me{constructor(){this.determinants=[];const e=new ve;e.type=we.SPEED;const t=new ve;t.type=we.BATTLE;const a=new ve;a.type=we.SHOOTING;const n=new ve;n.type=we.STRENGTH;const i=new ve;i.type=we.DURABILITY;const s=new ve;s.type=we.HEALTH;const r=new ve;r.type=we.ATTACK;const l=new ve;l.type=we.INITIATIVE;const o=new ve;o.type=we.DEXTERITY;const c=new ve;c.type=we.LEADER_SKILLS;const m=new ve;m.type=we.INTELLIGENCE;const d=new ve;d.type=we.CONTROL;const p=new ve;p.type=we.WILL;const h=new ve;h.type=we.CHARISMA,this.determinants.push(e,t,a,n,i,s,r,l,o,c,m,d,p,h)}updateWith(e){return e.determinants&&e.determinants.forEach(e=>{const t=new ve;t.updateWith(e),this.replaceDeterminant(t)}),this}updateDeterminantValue(e,t){this.findDeterminant(t).value=e}findDeterminant(e){return this.determinants.find(t=>e===t.type)}replaceDeterminant(e){const t=this.findDeterminant(e.type);let a=this.determinants.indexOf(t);this.determinants.splice(a,1),this.determinants.push(e)}}const Ue=["ABUNDANT","PLENTIFUL","COMMON","AVERAGE","SCARCE","RARE","VERY_RARE"];K.data.availability=Ue;class Be extends j{constructor(...e){super(...e),this.availability=Ue[0]}}Be.entityName="armorPattern",B(Be,[M("name",f),M("description",x),M("strength",T),M("availability",f)],[U("name",f),U("description",x),U("priceMultiplier",R),U("weight",R),U("strength",R),U("availability",I,"availability")]);class Ke extends w{constructor(...e){super(...e),this.gold=0,this.silver=0,this.lead=0}toString(){return this.gold+" "+this.silver+" "+this.lead}}K.suppliers.price=()=>new Ke;class Ge extends j{constructor(...e){super(...e),this.availability="COMMON"}}Ge.entityName="resource",B(Ge,[M("name",f),M("description",x),M("priceMultiplier",R),M("durability",R),M("strength",R),M("availability",f)],[U("name",f),U("description",x),U("priceMultiplier",R),U("weight",R),U("durability",R),U("strength",R),U("availability",I,"availability")]);const _e={BODY:"BODY",HEAD:"HEAD",TORSO:"TORSO",HAND:"HAND",LEG:"LEG",BELT:"BELT",NECK:"NECK",FINGER:"FINGER",SHIELD:"SHIELD",BOTH_HANDS:"BOTH_HANDS",allOf(){return[this.BODY,this.HEAD,this.TORSO,this.HAND,this.LEG,this.BELT,this.NECK,this.FINGER,this.SHIELD,this.BOTH_HANDS]},armor(){return[this.BODY,this.HEAD,this.TORSO,this.HAND,this.LEG,this.BELT,this.SHIELD]},weapon(){return[this.HAND,this.BOTH_HANDS,this.SHIELD]},jewelry(){return[this.NECK,this.FINGER]}};K.data.placement=_e.allOf(),K.data.placementArmor=_e.armor(),K.data.placementWeapon=_e.weapon(),K.data.placementJewelry=_e.jewelry();class ze extends He{constructor(...e){super(...e),this.suggestedPrice=new Ke,this.placement=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"suggestedPrice",()=>new Ke),this}}ze.entityName="armorBlueprint",B(ze,[M("name",f),M("description",x),M("armor",T),M("placement",f),M("suggestedPrice",A)],[U("name",f),U("description",x),U("armor",T),U("suggestedPrice",A),U("suggestedWeight",T),U("placement",b,"placementArmor"),U("determinants",D)]);class Ye extends He{constructor(...e){super(...e),this.price=new Ke,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ke),this.updateEntityProp(e,"primaryResource",()=>new Ge),this.updateEntityProp(e,"secondaryResource",()=>new Ge),this.updateEntityProp(e,"type",()=>new ze),this.updateEntityProp(e,"armorPattern",()=>new Be),this}}Ye.entityName="armor",B(Ye,[M("name",f),M("description",x),M("price",A),M("type",S),M("armorPattern",S)],[U("name",f),U("description",x),U("weight",R),U("price",A),U("availability",I,"availability"),U("primaryResource",S,Ge.entityName),U("secondaryResource",S,Ge.entityName),U("type",W,ze.entityName),U("armorPattern",S,Be.entityName),U("determinants",D)]);class Xe extends j{constructor(...e){super(...e),this.price=new Ke,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ke),this}}Xe.entityName="miscItem",B(Xe,[M("name",f),M("description",x),M("weight",R),M("price",A),M("availability",I)],[U("name",f),U("description",x),U("weight",R),U("price",A),U("availability",I,"availability")]);class qe extends j{constructor(...e){super(...e),this.amount=1}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"item",()=>new Xe),this}}class Je extends He{constructor(...e){super(...e),this.suggestedPrice=new Ke,this.damage=new ge,this.prepareTime=new re,this.placement=_e.HAND}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"suggestedPrice",()=>new Ke),this.updateEntityProp(e,"damage",()=>new ge),this.updateEntityProp(e,"prepareTime",()=>new re),this}}Je.entityName="meleeWeaponBlueprint",B(Je,[M("name",f),M("description",x),M("damage",P),M("placement",f),M("suggestedPrice",A),M("suggestedWeight",R)],[U("name",f),U("description",x),U("suggestedPrice",A),U("suggestedWeight",T),U("damage",P),U("prepareTime",O),U("placement",b,"placementWeapon"),U("determinantes",D)]);class Qe extends He{constructor(...e){super(...e),this.price=new Ke,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ke),this.updateEntityProp(e,"primaryResource",()=>new Ge),this.updateEntityProp(e,"secondaryResource",()=>new Ge),this.updateEntityProp(e,"type",()=>new Je),this}getFinalValueForType(e){return vt.sumValueByTypeIn(this.type.determinants,e)+vt.sumValueByTypeIn(this.determinants,e)}}Qe.entityName="meleeWeapon",B(Qe,[M("name",f),M("description",x),M("price",A),M("type",S)],[U("name",f),U("description",x),U("weight",R),U("price",A),U("availability",I,"availability"),U("primaryResource",S,Ge.entityName),U("secondaryResource",S,Ge.entityName),U("type",W,Je.entityName),U("determinants",D)]);class Ze extends j{constructor(...e){super(...e),this.levels=0}updateWith(e){return super.updateWith(e)}}Ze.entityName="spellSchool",B(Ze,[M("name",f),M("description",x),M("levels",T)],[U("name",f),U("description",x),U("levels",T)]);class $e extends j{constructor(...e){super(...e),this.prepareTime=new re,this.durationTime=new re,this.ingredients=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"prepareTime",()=>new re),this.updateEntityProp(e,"durationTime",()=>new re),this.updateEntityProp(e,"spellSchool",()=>new Ze),this.updateEntityList(e,"ingredients",()=>new Xe),this}}$e.entityName="spell",B($e,[M("name",f),M("description",x),M("level",T),M("manaCost",T),M("range",T)],[U("name",f),U("description",x),U("effect",x),U("level",T),U("manaCost",T),U("range",T),U("prepareTime",O),U("durationTime",O),U("spellSchool",S,Ze.entityName),U("ingredients",L,Xe.entityName)]);class et extends j{constructor(...e){super(...e),this.level=0}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"spellSchool",()=>new Ze),this}}class tt extends j{constructor(...e){super(...e),this.names=[]}}tt.entityName="nation";B(tt,[M("name",f),M("description",x)],[U("name",f),U("description",x),U("names",x,null,e=>e.join("\n"),e=>e.replace("\r","").split("\n"))]);class at extends j{updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new tt),this}}at.entityName="worldLanguage",B(at,[M("name",f),M("description",x)],[U("name",f),U("description",x),U("nations",L,tt.entityName)]);class nt extends j{updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new tt),this}}nt.entityName="currency",B(nt,[M("name",f),M("description",x),M("valueMultiplier",R)],[U("name",f),U("description",x),U("valueMultiplier",R),U("nations",L,tt.entityName)]);class it extends j{constructor(...e){super(...e),this.amount=new Ke}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"currency",K.suppliers.currency),this.updateEntityProp(e,"amount",K.suppliers.price),this}}K.suppliers.money=()=>new it;class st extends He{}st.entityName="race",B(st,[M("name",f),M("specialFeature",x)],[U("name",f),U("specialFeatures",x),U("determinants",k)]);class rt extends j{constructor(...e){super(...e),this.nations=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new tt),this}}rt.entityName="religion",B(rt,[M("name",f),M("description",x)],[U("name",f),U("description",x),U("nations",L,tt.entityName)]);class lt extends He{}lt.entityName="animalKind",B(lt,[M("name",f),M("description",x)],[U("name",f),U("description",x),U("determinants",D)]);class ot extends He{updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"animalKind",()=>new lt),this}}ot.entityName="animal",B(ot,[M("name",f),M("description",x),M("animalKind",S)],[U("name",f),U("description",x),U("animalKind",S,lt.entityName),U("determinants",D)]);class ct extends j{}ct.entityName="character",B(ct,[M("name",f),M("description",x)],[U("name",f),U("description",x)]);class mt extends j{}mt.entityName="eyeColor",B(mt,[M("name",f),M("description",x)],[U("name",f),U("description",x)]);class dt extends j{}dt.entityName="hairColor",B(dt,[M("name",f),M("description",x)],[U("name",f),U("description",x)]);class pt extends He{constructor(...e){super(...e),this.suggestedPrice=new Ke,this.damage=new ge,this.prepareTime=new re,this.placement=[_e.HAND],this.minimumRange=0,this.mediumRange=0,this.maximumRange=0}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"suggestedPrice",()=>new Ke),this.updateEntityProp(e,"damage",()=>new ge),this.updateEntityProp(e,"prepareTime",()=>new re),this}}pt.entityName="rangedWeaponBlueprint",B(pt,[M("name",f),M("description",x),M("damage",P),M("minimumRange",T),M("mediumRange",T),M("maximumRange",T),M("prepareTime",O),M("suggestedPrice",A),M("suggestedWeight",R)],[U("name",f),U("description",x),U("suggestedPrice",A),U("suggestedWeight",T),U("damage",P),U("prepareTime",O),U("placement",b,"placementWeapon"),U("minimumRange",T),U("mediumRange",T),U("maximumRange",T),U("determinants",D)]);class ht extends He{constructor(...e){super(...e),this.price=new Ke,this.availability="COMMON",this.weaponTypes=[]}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ke),this.updateEntityProp(e,"primaryResource",()=>new Ge),this.updateEntityProp(e,"secondaryResource",()=>new Ge),this.updateEntityList(e,"weaponTypes",()=>new pt),this}}ht.entityName="ammunition",B(ht,[M("name",f),M("description",x),M("price",A),M("type",S),M("availability",f)],[U("name",f),U("description",x),U("weight",R),U("price",A),U("availability",I,"availability"),U("primaryResource",S,Ge.entityName),U("secondaryResource",S,Ge.entityName),U("weaponTypes",L,pt.entityName),U("determinants",D)]);class ut extends He{constructor(...e){super(...e),this.price=new Ke,this.availability="COMMON"}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ke),this.updateEntityProp(e,"primaryResource",()=>new Ge),this.updateEntityProp(e,"secondaryResource",()=>new Ge),this.updateEntityProp(e,"type",()=>new pt),this}}ut.entityName="rangedWeapon",B(ut,[M("name",f),M("description",x),M("price",A),M("type",S)],[U("name",f),U("description",x),U("weight",R),U("price",A),U("availability",I,"availability"),U("primaryResource",S,Ge.entityName),U("secondaryResource",S,Ge.entityName),U("type",W,pt.entityName),U("determinants",D)]);class Et extends j{constructor(...e){super(...e),this.ammunitionAmount=0}updateWith(e){return super.updateWith(e),super.updateEntityProp(e,"rangedWeapon",()=>new ut),super.updateEntityProp(e,"ammunition",()=>new ht),this}}class yt extends He{}yt.entityName="physicalFeature",B(yt,[M("name",f),M("description",x)],[U("name",f),U("description",x),U("determinants",D)]);class gt extends j{constructor(...e){super(...e),this.physicalFeatures=[],this.determinants=new Me,this.professions=[],this.skills=[],this.inventory=[],this.meleeWeapons=[],this.rangedWeapons=[],this.armor=[],this.spellSchools=[],this.spells=[],this.animals=[],this.money=[],this.languages=[]}updateWith(e){return this.updateProp(e,"id"),this.updateProp(e,"uuid"),this.updateProp(e,"name"),this.updateProp(e,"gender"),this.updateNumProp(e,"age"),this.updateNumProp(e,"height"),this.updateNumProp(e,"weight"),this.updateNumProp(e,"fatePoints"),this.updateNumProp(e,"mana"),this.updateNumProp(e,"currentMana"),this.updateNumProp(e,"sanityPoints"),this.updateNumProp(e,"totalExperience"),this.updateNumProp(e,"experience"),this.updateProp(e,"birthplace"),this.updateProp(e,"parents"),this.updateProp(e,"family"),this.updateProp(e,"health"),this.updateEntityProp(e,"nation",()=>new tt),this.updateEntityProp(e,"religion",()=>new rt),this.updateEntityProp(e,"hairColor",()=>new dt),this.updateEntityProp(e,"eyeColor",()=>new mt),this.updateEntityProp(e,"race",()=>new st),this.updateEntityProp(e,"personality",()=>new ct),this.updateEntityProp(e,"determinants",()=>new Me),this.updateEntityProp(e,"professionClass",()=>new Ve),this.updateEntityProp(e,"currentProfession",()=>new je),this.updateEntityList(e,"physicalFeatures",()=>new yt),this.updateEntityList(e,"professions",()=>new je),this.updateEntityList(e,"skills",()=>new Fe),this.updateEntityList(e,"inventory",()=>new qe),this.updateEntityList(e,"meleeWeapons",()=>new Qe),this.updateEntityList(e,"rangedWeapons",()=>new Et),this.updateEntityList(e,"armor",()=>new Ye),this.updateEntityList(e,"spellSchools",()=>new et),this.updateEntityList(e,"spells",()=>new $e),this.updateEntityList(e,"animals",()=>new ot),this.updateEntityList(e,"money",()=>new it),this.updateEntityList(e,"languages",()=>new at),this}}gt.entityName="person",B(gt,[M("name",f),M("race",S),M("nation",S),M("currentProfession",S),M("totalExperience",f)],[U("person",F)]);class vt extends G{addExperienceExtension(e,t){this.requestFor(e,"determinant/addExperienceExtension",e=>vt.afterResponse(e,t))}removeExperienceExtension(e,t){this.requestFor(e,"determinant/removeExperienceExtension",e=>vt.afterResponse(e,t))}static afterResponse(e,t){const a=new ve;a.updateWith(e),t(a)}static findDeterminantIn(e,t){return e.find(e=>t===e.type)}static removeModifiersByType(e,t){let a=vt.findModifierByType(e,t);for(;a;)e.splice(e.indexOf(a),1),a=vt.findModifierByType(e,t);return e}static findModifierByType(e,t){return e.find(e=>e.type===t)}static sumValueByTypeIn(e,t){return e.filter(e=>t===e.type).reduce((e,t)=>e+t.calculateFinalValue(),0)}static updateProfessionExtensions(e,t){t.determinants=t.determinants.map(t=>(vt.setProfessionExtensions(e,t),t))}static setProfessionExtensions(e,t){const a=vt.findDeterminantIn(e.determinants,t.type);a&&(t.modifiers=vt.removeModifiersByType(t.modifiers,ye.PROFESSION),a.modifiers.forEach(e=>{const a=new ge;a.type=e.type,a.value=e.value,t.modifiers.push(a)}))}rollForRace(e){const t=K.data.entity;console.assert(t.type===gt);const a=t.determinants;this.requestForPath("determinant/generateDeterminants/"+t.race.id,e=>{e.determinants.forEach(e=>{a.updateDeterminantValue(e.value,e.type)}),K.updateEntity({determinants:a})})}}class wt extends G{calculateMeleeDamage(e,t){this.rawGetRequestFor("gear/getMeleeWeaponDamage/".concat(e),t)}calculateArmorValue(e,t){this.rawGetRequestFor("gear/getArmorValue/".concat(e),t)}calculatePersonArmorValue(e,t){this.requestFor(e,"gear/getArmorValuesForGear",t)}static addPersonalRangedWeapon(e){const t=K.data.entity.rangedWeapons,a=new Et;a.rangedWeapon=e,t.push(a),K.updateEntity({rangedWeapons:t})}}class ft extends j{constructor(...e){super(...e),this.nations=[],this.spellSchools=[],this.persons=[]}updateWith(e){return super.updateWith(e),this.updateEntityList(e,"nations",()=>new tt),this.updateEntityList(e,"races",()=>new st),this.updateEntityList(e,"spellSchools",()=>new Ze),this.updateEntityList(e,"persons",()=>new gt),this}}ft.entityName="realm",B(ft,[M("name",f)],[U("name",f),U("nations",L,tt.entityName),U("spellSchools",L,Ze.entityName),U("persons",L,gt.entityName)]);class Nt{constructor(){this.currentSpellSchools=[],this.currentSkills=[]}}const xt=(e,t)=>e.filter(e=>!t.find(t=>e.name===t.name)),Ct=(e,t)=>{const a=e.indexOf(t);return a>=0&&e.splice(a,1),e},Tt=(e,t)=>(t.find(t=>t.id===e.id)||t.push(e),t);function Rt(e,t,a=[],n=a){let i=t;return a.forEach(e=>i=i[e]),e.find(e=>{let t=e;return n.forEach(e=>t=t[e]),t===i})}function It(e,t){const a=e.indexOf(t);return a>=0&&e.splice(a,1),e}class bt extends G{getAvailableSpellSchools(e,t){this.requestFor(e,"magic/getAvailableSpellSchools",t)}static getRelevantSpells(){const e=K.data.entity,t=e.spells,a=e.spellSchools;return K.data.spell.filter(e=>!Rt(t,e,["name"])).filter(e=>{const t=Rt(a,e,["spellSchool","name"]);return t&&t.level>=e.level})}}var St=a(376),Lt=a.n(St);const At={MALE:"MALE",FEMALE:"FEMALE",allOf(){return[this.MALE,this.FEMALE]}};K.data.gender=At.allOf();class Ot{static addItemToInventory(e){let t=K.data.entity.inventory;if(!Rt(t,e,["name"],["item","name"])){const a=new qe;a.item=e,a.amount=0,t.push(a),K.updateEntity({inventory:t})}}static inventoryWeight(){return(K.data.entity.inventory.map(e=>e.item.weight*e.amount).reduce((e,t)=>e+t,0)+K.data.entity.meleeWeapons.map(e=>e.weight).reduce((e,t)=>e+t,0)+K.data.entity.rangedWeapons.map(e=>Ot.calculateRangedWeaponWeight(e)).reduce((e,t)=>e+t,0)+K.data.entity.armor.map(e=>e.weight).reduce((e,t)=>e+t,0)).toFixed(2)}static calculateRangedWeaponWeight(e){let t=0;return e.rangedWeapon&&(t+=e.rangedWeapon.weight),e.ammunition&&(t+=e.ammunition.weight*e.ammunitionAmount),t}}class Dt{static addMoney(e){const t=new it;t.currency=e,K.data.entity.money.push(t),K.updateEntity({money:K.data.entity.money})}}class Pt{static getProfessions(){const e=K.data.entity.professionClass,t=K.data[je.entityName];return e?t.filter(t=>t.professionClass&&t.professionClass.id===e.id):K.data[je.entityName]}static updateProfession(e){const t=K.data.entity,a=t.professions,n=t.determinants,i=vt.updateProfessionExtensions(e,n);Tt(e,a),K.updateEntity({currentProfession:e,professions:a,determinants:i})}static removeProfessionFromHistory(e){const t=K.data.entity,a=t.professions,n=t.currentProfession;Ct(a,e),n&&e.id===n.id&&(K.data.entity.currentProfession=null),K.updateEntity({professions:a})}static nextProfessions(){const e=K.data.entity.currentProfession;return e&&e.nextProfessions?e.nextProfessions:[]}}class Wt extends l.Component{render(){const e=this.props,t=e.animal,a=Object(ae.a)(e,["animal"]);return o.a.createElement("div",Object.assign({},a,{onContextMenu:e=>{e.preventDefault(),K.updateEntity({animals:It(K.data.entity.animals,t)})}}),o.a.createElement("div",null,t.name))}}class kt{constructor(){this.armorValues=new Map,_e.allOf().forEach(e=>{this.armorValues.set(e,0)})}getArmorValue(e){return this.armorValues.get(e)}updateWith(e){this.armorValues=new Map,_e.allOf().map(t=>this.armorValues.set(t,e[t]))}}const Ft={position:"absolute",width:20,textAlign:"center"},Vt={container:{position:"relative"},shield:Object(v.a)({},Ft,{left:130,top:85}),head:Object(v.a)({},Ft,{left:15,top:100}),rightHand:Object(v.a)({},Ft,{left:15,top:170}),leftHand:Object(v.a)({},Ft,{left:155,top:162}),torso:Object(v.a)({},Ft,{left:155,top:230}),rightLeg:Object(v.a)({},Ft,{left:15,top:295}),leftLeg:Object(v.a)({},Ft,{left:155,top:295})},Ht=new wt;class jt extends l.Component{constructor(...e){super(...e),this.state={armorValues:new kt},this.updateArmorValues=()=>{Ht.calculatePersonArmorValue(K.data.entity.armor.map(e=>e.id),e=>{const t=new kt;t.updateWith(e),this.setState({armorValues:t,armor:K.data.entity.armor})})}}render(){const e=this.props,t=e.classes,a=e.className,n=Object(ae.a)(e,["classes","className"]);return K.data.entity.armor!==this.state.armor&&this.updateArmorValues(),o.a.createElement("div",Object.assign({className:"".concat(t.container," ").concat(a)},n),o.a.createElement("p",{className:t.shield},this.state.armorValues.getArmorValue(_e.SHIELD)),o.a.createElement("p",{className:t.head},this.state.armorValues.getArmorValue(_e.HEAD)),o.a.createElement("p",{className:t.rightHand},this.state.armorValues.getArmorValue(_e.HAND)),o.a.createElement("p",{className:t.leftHand},this.state.armorValues.getArmorValue(_e.HAND)),o.a.createElement("p",{className:t.torso},this.state.armorValues.getArmorValue(_e.TORSO)),o.a.createElement("p",{className:t.rightLeg},this.state.armorValues.getArmorValue(_e.LEG)),o.a.createElement("p",{className:t.leftLeg},this.state.armorValues.getArmorValue(_e.LEG)))}}var Mt=h()(Vt)(jt);const Ut={display:"flex",flexDirection:"row"};class Bt extends l.Component{constructor(...e){super(...e),this.updateEntity=e=>t=>{t.preventDefault(),K.updateEntity({armor:Ct(K.data.entity.armor,e)})}}render(){const e=this.props,t=e.t,a=e.armor,n=e.disabled;let i=[o.a.createElement("div",{style:{width:150}},a.name),o.a.createElement("div",{style:{width:210}},t(a.type.placement)),o.a.createElement("div",{style:{width:50}},a.weight)];return n?o.a.createElement("div",{style:Ut},i):o.a.createElement("div",{style:Ut,onContextMenu:this.updateEntity(a)},i)}}var Kt=Object(g.b)()(Bt);class Gt extends l.PureComponent{constructor(...e){super(...e),this.parse=e=>t=>{const a=this.props,n=a.name,i=a.variant,s=t.target.value;if(""!==s)if(i===zt.INT){const a=parseInt(s);a||0===a?e(a):t.target.value=K.data.entity[n]||""}else if(i===zt.FLOAT){const a=parseFloat(s);a||0===a?e(a):t.target.value=K.data.entity[n]||""}else e(s);else e(s)}}render(){const e=this.props,t=e.name,a=e.value,n=void 0===a?K.data.entity[t]:a,i=e.classes,s=e.customStyle,r=e.onChange,l=void 0===r?e=>K.updateEntity({[t]:e}):r;return e.multiline?o.a.createElement("textarea",{className:i.input,style:s,value:n,onChange:this.parse(l)}):o.a.createElement("input",{className:i.input,style:s,value:n,onChange:this.parse(l)})}}var _t=h()({input:{backgroundColor:"transparent",border:0,width:"100%",fontFamily:"wfrp",fontSize:"24px",textAlign:"center",outline:"none"}})(Gt);const zt={TEXT:"TEXT",INT:"INT",FLOAT:"FLOAT"};class Yt extends l.Component{constructor(...e){super(...e),this.updateAmount=e=>{this.props.inventory.amount=e,K.updateEntity({inventory:K.data.entity.inventory})}}render(){const e=this.props.inventory;return o.a.createElement("div",{style:{width:290,display:"flex"},onContextMenu:t=>{t.preventDefault();const a=K.data.entity.inventory;It(a,e),K.updateEntity({inventory:a})}},o.a.createElement("div",{style:{width:150,minWidth:150}},e.item.name),o.a.createElement("div",{style:{width:70,textAlign:"center"}},Yt.calculateWeight(e)),o.a.createElement(_t,{style:{width:50,textAlign:"center"},variant:zt.FLOAT,value:e.amount,onChange:this.updateAmount}))}}Yt.calculateWeight=e=>(e.amount*e.item.weight).toFixed(2);var Xt=Yt;class qt extends l.Component{constructor(...e){super(...e),this.updateAmount=e=>t=>{this.props.money.amount[e]=t,K.updateEntity({money:K.data.entity.money})}}render(){const e=this.props,t=e.money,a=Object(ae.a)(e,["money"]);return o.a.createElement("div",Object.assign({},a,{style:{display:"flex"},onContextMenu:e=>{e.preventDefault(),K.updateEntity({money:It(K.data.entity.money,t)})}}),o.a.createElement("div",{style:{width:145}},t.currency.name),o.a.createElement(_t,{customStyle:{width:40},value:t.amount.gold,onChange:this.updateAmount("gold"),variant:zt.INT}),o.a.createElement(_t,{customStyle:{width:45},value:t.amount.silver,onChange:this.updateAmount("silver"),variant:zt.INT}),o.a.createElement(_t,{customStyle:{width:50},value:t.amount.lead,onChange:this.updateAmount("lead"),variant:zt.INT}))}}var Jt=a(660),Qt=a(378),Zt=a.n(Qt);const $t=new vt,ea=e=>o.a.createElement(Zt.a,Object.assign({style:{fontSize:14,margin:-2}},e));class ta extends l.Component{constructor(...e){super(...e),this.addExtension=()=>{$t.addExperienceExtension(this.props.ext,this.props.onChange)},this.removeExtension=()=>{$t.removeExperienceExtension(this.props.ext,this.props.onChange)}}render(){const e=this.props,t=e.ext,a=e.classes,n=e.customClassName,i=(e.onChange,Object(ae.a)(e,["ext","classes","customClassName","onChange"]));let s="0",r=[];if(t){r=t.getExperienceExtensions();const e=t?t.modifiers.find(e=>e.type===ye.PROFESSION):null;e&&(s=e.value)}return o.a.createElement("div",Object.assign({className:"".concat(a.fieldContainer," ").concat(n)},i,{onClick:this.addExtension,onContextMenu:e=>{e.preventDefault(),this.removeExtension()}}),o.a.createElement("p",{className:a.extension},"+"+s),o.a.createElement("div",{className:a.checkboxContainer},r.map(e=>o.a.createElement(ea,{key:e.value+"-"+e.type}))))}}var aa=Object(Jt.a)({fieldContainer:{position:"relative"},extension:{position:"absolute",top:"-10px",textAlign:"center",width:"100%"},checkboxContainer:{position:"absolute",right:"5px",display:"flex",flexFlow:"row",flexWrap:"wrap",maxWidth:40,zIndex:1}})(ta);const na={row1:{paddingTop:10,maxHeight:35,minHeight:35,width:"100%",display:"flex"},row2:{maxHeight:50,minHeight:50,width:"100%",display:"flex"},row3:{maxHeight:50,minHeight:50,width:"100%",display:"flex",textAlign:"center"},firstInRow:{minHeight:50,maxHeight:50,minWidth:47,maxWidth:47},otherInRow:{maxHeight:50,minHeight:50,minWidth:47,maxWidth:47},otherInRow2:{maxHeight:50,minHeight:50,minWidth:46,maxWidth:46},lastRowChild:{margin:"15px 0 0 0"}};class ia extends l.Component{constructor(...e){super(...e),this.updateDeterminant=e=>t=>{e.value=t,K.updateEntity({determinants:K.data.entity.determinants})},this.updateDeterminantExperience=e=>{const t=K.data.entity.determinants;t.replaceDeterminant(e),K.updateEntity({determinants:t})}}render(){const e=this.props,t=e.classes,a=Object(ae.a)(e,["classes"]),n=K.data.entity.determinants,i=n.findDeterminant(we.SPEED),s=n.findDeterminant(we.BATTLE),r=n.findDeterminant(we.SHOOTING),l=n.findDeterminant(we.STRENGTH),c=n.findDeterminant(we.DURABILITY),m=n.findDeterminant(we.HEALTH),d=n.findDeterminant(we.ATTACK),p=n.findDeterminant(we.INITIATIVE),h=n.findDeterminant(we.DEXTERITY),u=n.findDeterminant(we.LEADER_SKILLS),E=n.findDeterminant(we.INTELLIGENCE),y=n.findDeterminant(we.CONTROL),g=n.findDeterminant(we.WILL),v=n.findDeterminant(we.CHARISMA);return o.a.createElement("div",a,o.a.createElement("div",{className:t.row1},o.a.createElement(_t,{className:t.firstInRow,value:i.value,onChange:this.updateDeterminant(i),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow,value:s.value,onChange:this.updateDeterminant(s),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow,value:r.value,onChange:this.updateDeterminant(r),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow,value:l.value,onChange:this.updateDeterminant(l),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow,value:c.value,onChange:this.updateDeterminant(c),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow2,value:m.value,onChange:this.updateDeterminant(m),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow,value:p.value,onChange:this.updateDeterminant(p),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow2,value:d.value,onChange:this.updateDeterminant(d),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow2,value:h.value,onChange:this.updateDeterminant(h),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow2,value:u.value,onChange:this.updateDeterminant(u),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow2,value:E.value,onChange:this.updateDeterminant(E),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow2,value:y.value,onChange:this.updateDeterminant(y),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow2,value:g.value,onChange:this.updateDeterminant(g),variant:zt.INT}),o.a.createElement(_t,{className:t.otherInRow,value:v.value,onChange:this.updateDeterminant(v),variant:zt.INT})),o.a.createElement("div",{className:t.row2},o.a.createElement(aa,{ext:i,customClassName:t.firstInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:s,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:r,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:l,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:c,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:m,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:p,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:d,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:h,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:u,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:E,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:y,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:g,customClassName:t.otherInRow2,onChange:this.updateDeterminantExperience}),o.a.createElement(aa,{ext:v,customClassName:t.otherInRow,onChange:this.updateDeterminantExperience})),o.a.createElement("div",{className:t.row3},o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.firstInRow," ")},i.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},s.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},r.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},l.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},c.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},m.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},p.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},d.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},h.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},u.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},E.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},y.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},g.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},v.calculateExperienceValue())))}}var sa=Object(Jt.a)(na)(ia);const ra={control:(e,t)=>({width:"100%",display:"flex"}),dropdownIndicator:(e,t)=>({color:"transparent"}),indicatorSeparator:(e,t)=>({color:"transparent"})},la={control:(e,t)=>({width:"100%",display:"flex"}),dropdownIndicator:(e,t)=>({color:"transparent"}),indicatorSeparator:(e,t)=>({color:"transparent"}),clearIndicator:(e,t)=>({color:"transparent"}),multiValueRemove:(e,t)=>({color:"ghostwhite",maxHeight:"1px"}),singleValue:(e,t)=>({color:"black",maxHeight:"1px"}),multiValueLabel:(e,t)=>({background:"transparent",display:"inline-flex","&::after":{content:'","'}}),multiValue:(e,t)=>({background:"transparent",display:"inline-flex",height:"14px"})};class oa extends l.Component{render(){const e=this.props,t=e.name,a=e.propName,n=void 0===a?t:a,i=e.value,s=void 0===i?K.data.entity[n]:i,r=e.options,l=void 0===r?K.data[t]:r,c=e.multi,m=e.className,d=e.customStyle,p=e.onChange,h=void 0===p?e=>K.updateEntity({[n]:e}):p;return o.a.createElement(De.a,{title:s&&s.description?s.description:""},o.a.createElement("div",{style:Object(v.a)({},{display:"inline-block"},{},d)},o.a.createElement(Z.a,{className:m,styles:c?la:ra,value:s,options:l,onChange:h,components:Object($.a)(),getOptionLabel:e=>o.a.createElement("div",null,e.name),getOptionValue:e=>e.id,filterOption:(e,t)=>e.data.name.startsWith(t),placeholder:o.a.createElement("div",null),isSearchable:!0,isMulti:c})))}}class ca extends l.Component{render(){const e=this.props.pWep,t=e.rangedWeapon,a=t.type,n=a.prepareTime.toString();return o.a.createElement("div",{style:{display:"flex",flexDirection:"column"},onContextMenu:t=>{t.preventDefault(),K.updateEntity({rangedWeapons:Ct(K.data.entity.rangedWeapons,e)})}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:{width:190}},t.name),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.minimumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.mediumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.maximumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.damage.value),o.a.createElement("div",{style:{width:38,textAlign:"center"}},n)),o.a.createElement("div",{style:{width:170,height:45,marginLeft:10,display:"flex"}},o.a.createElement(oa,{name:ht.entityName,customStyle:{width:140,height:45},value:e.ammunition,onChange:t=>{e.ammunition=t,this.setState({newAmmunition:t})}}),o.a.createElement("div",{onContextMenu:t=>{t.preventDefault(),e.ammunition=null,e.ammunitionAmount=0,this.setState({newAmmunition:null})}},e.ammunition?o.a.createElement(_t,{customStyle:{width:40},value:e.ammunitionAmount,variant:zt.INT,onChange:t=>{e.ammunitionAmount=t,this.setState({currentAmount:t})}}):o.a.createElement("div",null))))}}var ma=h()({ammunitionAmountField:{minWidth:40,maxWidth:40}})(ca);a(502);class da extends l.Component{render(){const e=this.props,t=e.classes,a=e.customStyle,n=e.listStyle,i=e.name,s=e.propName,r=void 0===s?i:s,l=e.value,c=(void 0===l&&K.data.entity[i],e.data),m=void 0===c?K.data[i]:c,d=e.onGearAdd,p=void 0===d?e=>K.updateEntity({[r]:Tt(e,K.data.entity[r])}):d,h=e.children,u=Object(ae.a)(e,["classes","customStyle","listStyle","name","propName","value","data","onGearAdd","children"]);Object(v.a)({},t,{},a);return o.a.createElement("div",Object.assign({style:{width:"100%"}},u),o.a.createElement(oa,{name:i,options:m,customStyle:{width:"100%"},onChange:p,value:null}),o.a.createElement(ke.a,{style:Object(v.a)({},{height:"100%",width:"100%"},{},n)},h))}}var pa=h()({container:{width:"100%"},selectComponent:{width:"100%"},itemsList:{height:"100%",width:"100%",overflow:"auto"},itemContainer:{display:"flex",flexDirection:"row"}})(da);const ha={control:(e,t)=>({width:"100%",display:"flex"}),dropdownIndicator:(e,t)=>({color:"transparent"}),indicatorSeparator:(e,t)=>({color:"white"})};class ua extends l.Component{constructor(...e){super(...e),this.getData=e=>e.map(e=>({label:e,value:e})),this.onSelected=e=>{this.props.onChange(e&&e.value)}}render(){const e=this.props,t=e.name,a=e.value,n=void 0===a?K.data.entity[t]:a,i=e.options,s=void 0===i?K.data[t]:i,r=Object(ae.a)(e,["name","value","options"]);return o.a.createElement(Z.a,Object.assign({},r,{styles:ha,options:s,value:{label:n,value:n},getOptionLabel:e=>o.a.createElement("div",null,e.label?e.label:"string"===typeof e?e:void 0),getOptionValue:e=>e,onChange:e=>K.updateEntity({[t]:e}),components:Object($.a)(),isSearchable:!0}))}}class Ea extends l.Component{constructor(...e){super(...e),this.state={anchorEl:null,currentElement:null},this.handleClick=e=>t=>{this.setState({anchorEl:t.currentTarget,currentElement:e})},this.onRemove=e=>()=>{this.handleClose(),this.props.onRemove(e)},this.handleClose=()=>{this.setState({anchorEl:null,currentElement:null})}}render(){const e=this.props,t=e.name,a=e.data,n=void 0===a?K.data.entity[t]:a,i=(e.onRemove,e.listStyle,Object(ae.a)(e,["name","data","onRemove","listStyle"]));return o.a.createElement("div",i,n.map((e,t)=>{const a=e.name||e;return o.a.createElement("div",{key:"listed-entity-"+a,style:{display:"inline-block"}},e.name?e.description?o.a.createElement(De.a,{title:e.description},o.a.createElement("p",{onClick:this.handleClick(e),style:{margin:0}},(t>0?", ":"")+a)):o.a.createElement("p",{onClick:this.handleClick(e),style:{margin:0}},(t>0?", ":"")+a):o.a.createElement("p",{style:{margin:0}},(t>0?", ":"")+a),e.name&&o.a.createElement(Pe.a,{id:"listed-menu-item-"+e.name,anchorEl:this.state.anchorEl,open:e===this.state.currentElement&&null!==this.state.anchorEl,onClose:this.handleClose},o.a.createElement(We.a,{onClick:this.onRemove(e)},"Remove")))}))}}class ya extends l.Component{constructor(...e){super(...e),this.calc=(e,t)=>[e*t,e*t*6,e*t*360/1e3],this.calculateSpeed=e=>[this.calc(e,2),this.calc(e,4),this.calc(e,16)]}render(){const e=this.props,t=e.classes,a=e.entity,n=void 0===a?K.data.entity:a,i=this.calculateSpeed(n.determinants.findDeterminant(we.SPEED).calculateExperienceValue());return o.a.createElement("div",{className:t.container},o.a.createElement("div",{className:t.firstRow},o.a.createElement("div",{className:t.cell},i[0][0]),o.a.createElement("div",{className:t.cell},i[0][1]),o.a.createElement("div",{className:t.cell},i[0][2])),o.a.createElement("div",{className:t.nextRow},o.a.createElement("div",{className:t.cell},i[1][0]),o.a.createElement("div",{className:t.cell},i[1][1]),o.a.createElement("div",{className:t.cell},i[1][2])),o.a.createElement("div",{className:t.nextRow},o.a.createElement("div",{className:t.cell},i[2][0]),o.a.createElement("div",{className:t.cell},i[2][1]),o.a.createElement("div",{className:t.cell},i[2][2])))}}var ga=h()({container:{height:160,width:200,paddingLeft:140,paddingTop:80,display:"flex",flexFlow:"column"},firstRow:{display:"flex",height:45,width:"100%"},nextRow:{display:"flex",height:45,width:"100%"},cell:{width:70,textAlign:"center",alignSelf:"center"}})(ya);class va extends l.Component{constructor(...e){super(...e),this.onContextMenu=e=>t=>{t.preventDefault(),K.updateEntity({spells:It(K.data.entity.spells,e)})}}render(){const e=this.props,t=e.spell,a=e.disabled,n=t.ingredients.map(e=>e.name).join(", "),i=[o.a.createElement("div",{style:{width:155}},t.name),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.level),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.manaCost),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.range),o.a.createElement("div",{style:{textAlign:"center",width:47}},t.durationTime.toString()),o.a.createElement("div",{style:{width:140}},n),o.a.createElement("div",{style:{width:130}},t.effect)];return a?o.a.createElement("div",{style:{display:"flex"}},i):o.a.createElement("div",{style:{display:"flex"},onContextMenu:this.onContextMenu(t)},i)}}var wa=va;class fa extends l.Component{constructor(...e){super(...e),this.state={availableSpellSchools:new Map},this.onSpellSchoolAdd=e=>{const t=K.data.entity.spellSchools,a=t.indexOf(t.find(t=>t.spellSchool.name===e.name));a>=0&&t.splice(a,1);let n=this.state.availableSpellSchools.get(e);K.updateEntity({spellSchools:[...t,n]})},this.onSpellSchoolRemove=e=>t=>{t.preventDefault();let a=It(K.data.entity.spellSchools,e);this.refreshRelevantMagicSchools(),K.updateEntity({spellSchools:a})},this.refreshRelevantMagicSchools=()=>{const e=new Nt;e.currentSpellSchools=K.data.entity.spellSchools,e.realm=K.data.currentRealm,fa.magicService.getAvailableSpellSchools(e,this.setSpellSchools)},this.setSpellSchools=e=>{this.setState({availableSpellSchools:this.assembleSpellSchools(e),currentSpellSchools:K.data.entity.spellSchools})},this.assembleSpellSchools=e=>{const t=this.state.availableSpellSchools;return t.clear(),e.forEach(e=>t.set(e.spellSchool,e)),t}}render(){const e=K.data.entity;this.state.currentSpellSchools!==e.spellSchools&&this.refreshRelevantMagicSchools();const t=[...this.state.availableSpellSchools.keys()];return o.a.createElement("div",null,o.a.createElement(pa,{style:{height:400,width:200,paddingTop:10},listStyle:{height:300,width:"100%",overflow:"auto"},data:t,onGearAdd:this.onSpellSchoolAdd},e.spellSchools.map(e=>o.a.createElement("p",{key:fa.spellSchoolLevelText(e),style:{margin:0},onContextMenu:this.onSpellSchoolRemove(e)},fa.spellSchoolLevelText(e)))))}}fa.magicService=new bt,fa.spellSchoolLevelText=e=>e.spellSchool.name+" p. "+e.level;var Na=fa;const xa=new wt;class Ca extends l.Component{constructor(...e){super(...e),this.state={damageText:""},this.updateDamageValue=()=>{xa.calculateMeleeDamage(this.props.weapon.id,e=>this.setState({damageText:e,weapon:this.props.weapon}))},this.onRightClick=(e,t)=>a=>{a.preventDefault(),K.updateEntity({[e]:Ct(K.data.entity[e],t)})}}render(){const e=this.props,t=e.name,a=e.classes,n=e.customStyle,i=e.weapon,s=e.disabled,r=Object(v.a)({},a,{},n);i!==this.state.weapon&&this.updateDamageValue();const l=[o.a.createElement("div",{className:r.itemName},i.name),o.a.createElement("div",{className:r.itemVariable},i.getFinalValueForType(we.INITIATIVE)),o.a.createElement("div",{className:r.itemVariable},i.getFinalValueForType(we.BATTLE)),o.a.createElement("div",{className:r.damageText},this.state.damageText),o.a.createElement("div",{className:r.itemVariable},i.getFinalValueForType(we.PARRY))];return s?o.a.createElement("div",{className:r.itemContainer},l):o.a.createElement("div",{className:r.itemContainer,onContextMenu:this.onRightClick(t,i)},l)}}var Ta=h()({itemContainer:{display:"flex",flexDirection:"row"},itemName:{minWidth:180,maxWidth:180},itemVariable:{minWidth:51,maxWidth:51,textAlign:"center"},damageText:{minWidth:51,maxWidth:51,textAlign:"center",fontSize:12,paddingTop:5}})(Ca);class Ra extends l.Component{constructor(...e){super(...e),this.determinantService=new vt,this.state={anchorEl:null,currentElement:null,generateStatsAction:()=>{const e=K.data.entity.race;e&&this.determinantService.rollForRace(e)}},this.handleClose=()=>{this.setState({anchorEl:null,showMenu:""})}}render(){const e=this.props,t=e.classes,a=e.t,n=K.data.entity;return o.a.createElement("div",{className:t.root},o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:33,paddingLeft:33,width:860}},o.a.createElement(_t,{name:"name",customStyle:{width:200}}),o.a.createElement(oa,{name:st.entityName,customStyle:{width:140,paddingLeft:20},options:K.data.currentRealmData.races}),o.a.createElement(ua,{name:"gender",className:t.genderSelect}),o.a.createElement(oa,{name:Ve.entityName,customStyle:{width:240}}),o.a.createElement(oa,{name:ct.entityName,propName:"personality",customStyle:{width:148}})),o.a.createElement("div",{style:{paddingTop:30,paddingLeft:33,width:860}},o.a.createElement(_t,{name:"age",variant:zt.INT,customStyle:{width:80}}),o.a.createElement(_t,{name:"height",variant:zt.INT,customStyle:{width:100,paddingLeft:10}}),o.a.createElement(_t,{name:"weight",variant:zt.FLOAT,customStyle:{width:90,paddingLeft:20}}),o.a.createElement(oa,{name:dt.entityName,customStyle:{width:110,paddingLeft:10}}),o.a.createElement(oa,{name:mt.entityName,customStyle:{width:90,paddingLeft:0}}),o.a.createElement(oa,{name:yt.entityName,propName:"physicalFeatures",multi:!0,customStyle:{width:280,paddingLeft:60,maxHeight:70,position:"relative",top:-30,fontSize:"14px"}})),o.a.createElement("div",{style:{paddingTop:30,paddingLeft:33,width:860,height:40,display:"flex"}},o.a.createElement(oa,{name:je.entityName,propName:"currentProfession",options:Pt.getProfessions(),onChange:Pt.updateProfession,customStyle:{width:235,paddingLeft:0}}),o.a.createElement(ke.a,{style:{width:360,height:40}},o.a.createElement(Ea,{name:"professions",onRemove:Pt.removeProfessionFromHistory,style:{display:"inline-block",width:350,fontSize:"14px"}})),o.a.createElement(ke.a,{style:{width:200,height:40}},o.a.createElement(Ea,{name:"outgoingProfessions",data:Pt.nextProfessions(),onRemove:Pt.removeProfessionFromHistory,style:{display:"inline-block",width:200,height:40,fontSize:"14px"}}))),o.a.createElement("div",{style:{paddingTop:43,width:890,display:"flex"}},o.a.createElement("div",{style:{width:230,height:50},onContextMenu:e=>{e.preventDefault(),this.setState({anchorEl:e.target,currentElement:["generateStats"]})}}),o.a.createElement(sa,{style:{width:650}})),o.a.createElement("div",{style:{paddingTop:10,paddingLeft:20,width:860,display:"flex"}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:0,width:430}},o.a.createElement(pa,{style:{width:400,height:220,paddingLeft:40,paddingTop:10},listStyle:{height:180},name:Qe.entityName,propName:"meleeWeapons"},n.meleeWeapons.map(e=>o.a.createElement(Ta,{key:e.name,name:"meleeWeapons",weapon:e}))),o.a.createElement(pa,{style:{width:400,height:230,paddingLeft:30,paddingTop:10},listStyle:{height:180},name:ut.entityName,onGearAdd:wt.addPersonalRangedWeapon},n.rangedWeapons.map(e=>o.a.createElement(ma,{key:e.rangedWeapon.name,name:"meleeWeapons",pWep:e}))),o.a.createElement(pa,{style:{width:400,height:220,paddingLeft:20},name:Ye.entityName},n.armor.map(e=>o.a.createElement(Kt,{key:e.name,name:"meleeWeapons",armor:e})))),o.a.createElement("div",{style:{paddingTop:0,paddingLeft:10,width:210}},o.a.createElement(pa,{style:{width:200,height:360,paddingLeft:0,paddingTop:10},listStyle:{height:300},name:Fe.entityName,propName:"skills",data:xt(K.data.skill,n.skills)},n.skills.map(e=>o.a.createElement(De.a,{title:e.description},o.a.createElement("p",{key:e.name,style:{margin:0},onContextMenu:t=>{t.preventDefault(),K.updateEntity({skills:Ct(n.skills,e)})}},e.name)))),o.a.createElement(Mt,null)),o.a.createElement(Na,null))),o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840,display:"flex"}},o.a.createElement(pa,{style:{width:630},listStyle:{height:220},name:$e.entityName,propName:"spells",data:bt.getRelevantSpells()},n.spells.map(e=>o.a.createElement(wa,{spell:e}))),o.a.createElement("div",{style:{width:200}},o.a.createElement(_t,{name:"fatePoints",variant:zt.INT,customStyle:{width:"100%",height:50,paddingTop:55}}),o.a.createElement(_t,{name:"mana",variant:zt.INT,customStyle:{width:"100%",height:50,paddingTop:30}}),o.a.createElement(_t,{name:"currentMana",variant:zt.INT,customStyle:{width:"100%",height:50,paddingTop:35}}))),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:300,paddingTop:20}},o.a.createElement(pa,{style:{width:300},listStyle:{height:370},name:Xe.entityName,onGearAdd:Ot.addItemToInventory},n.inventory.map(e=>o.a.createElement(Xt,{key:e.item.name,inventory:e}))),o.a.createElement("div",{style:{paddingLeft:200}},Ot.inventoryWeight()," kg"),o.a.createElement(pa,{style:{width:285},listStyle:{height:150},name:nt.entityName,data:K.data.currentRealmData.currencies,onGearAdd:Dt.addMoney},n.money.map(e=>o.a.createElement(qt,{key:e.currency.name,money:e})))),o.a.createElement("div",null,o.a.createElement(ga,null),o.a.createElement("div",{style:{width:350,height:160,paddingTop:10,display:"flex"}},o.a.createElement(pa,{style:{width:100,paddingTop:15},listStyle:{height:100},name:at.entityName,propName:"languages",data:K.data.currentRealmData.languages},n.languages.map(e=>o.a.createElement("div",{onContextMenu:t=>{t.preventDefault(),K.updateEntity({languages:It(n.languages,e)})}},e.name))),o.a.createElement(_t,{name:"health",variant:zt.TEXT,multiline:!0,customStyle:{width:130,height:100,alignSelf:"flex-end"}}),o.a.createElement(_t,{name:"sanityPoints",variant:zt.INT,customStyle:{width:100,paddingLeft:10}})),o.a.createElement("div",{style:{width:350}},o.a.createElement(oa,{name:tt.entityName,customStyle:{width:170,height:50,marginLeft:170,marginTop:50},options:K.data.currentRealmData.nations}),o.a.createElement(_t,{name:"parents",variant:zt.TEXT,customStyle:{width:120,height:35,marginTop:0,marginLeft:220}}),o.a.createElement(_t,{name:"family",variant:zt.TEXT,customStyle:{width:220,height:80,marginLeft:110}})),o.a.createElement("div",{style:{width:350,display:"flex"}},o.a.createElement(_t,{name:"socialLevel",variant:zt.TEXT,customStyle:{width:80,height:60,marginTop:10,marginLeft:110}}),o.a.createElement(oa,{name:rt.entityName,customStyle:{width:150,marginTop:35,marginLeft:5},data:K.data.currentRealmData.religions}))),o.a.createElement("div",{style:{marginLeft:20,marginTop:50}},o.a.createElement("div",{style:{marginTop:20}},"aktualnie:"),o.a.createElement(_t,{name:"experience",variant:zt.INT,customStyle:{width:150,height:150}}),o.a.createElement("div",{style:{marginTop:20}},"ca\u0142kowicie:"),o.a.createElement(_t,{name:"totalExperience",variant:zt.INT,customStyle:{width:150,height:150}}))),o.a.createElement(pa,{style:{width:700},listStyle:{height:100},name:ot.entityName,propName:"animals"},n.animals.map(e=>o.a.createElement(Wt,{animal:e}))))),o.a.createElement(Pe.a,{anchorEl:this.state.anchorEl,open:this.state.currentElement&&null!==this.state.anchorEl,onClose:this.handleClose},this.state.currentElement&&this.state.currentElement.map(e=>o.a.createElement(We.a,{onClick:()=>{this.handleClose(),this.state[e+"Action"]()}},a(e)))))}}var Ia=h()(()=>({root:{marginTop:5,background:"url(".concat(Lt.a,")"),fontFamily:"wfrp",fontSize:"24px",backgroundSize:"cover",height:"1231px",width:"1800px",display:"flex"},genderSelect:{display:"inline-block",width:85}}))(Object(g.b)()(Ra));const ba=e=>o.a.createElement(Zt.a,Object.assign({style:{fontSize:14,margin:-2}},e));class Sa extends l.Component{render(){const e=this.props,t=e.ext,a=e.classes,n=e.customClassName,i=Object(ae.a)(e,["ext","classes","customClassName"]);let s="0",r=[];if(t){r=t.getExperienceExtensions();const e=t?t.modifiers.find(e=>e.type===ye.PROFESSION):null;e&&(s=e.value)}return o.a.createElement("div",Object.assign({className:"".concat(a.fieldContainer," ").concat(n)},i),o.a.createElement("p",{className:a.extension},"+"+s),o.a.createElement("div",{className:a.checkboxContainer},r.map(e=>o.a.createElement(ba,{key:e.value+"-"+e.type}))))}}var La=Object(Jt.a)({fieldContainer:{position:"relative"},extension:{position:"absolute",top:"-10px",textAlign:"center",width:"100%"},checkboxContainer:{position:"absolute",right:"5px",display:"flex",flexFlow:"row",flexWrap:"wrap",maxWidth:40,zIndex:1}})(Sa);class Aa extends l.Component{render(){const e=this.props,t=e.classes,a=Object(ae.a)(e,["classes"]),n=K.data.entity.determinants,i=n.findDeterminant(we.SPEED),s=n.findDeterminant(we.BATTLE),r=n.findDeterminant(we.SHOOTING),l=n.findDeterminant(we.STRENGTH),c=n.findDeterminant(we.DURABILITY),m=n.findDeterminant(we.HEALTH),d=n.findDeterminant(we.ATTACK),p=n.findDeterminant(we.INITIATIVE),h=n.findDeterminant(we.DEXTERITY),u=n.findDeterminant(we.LEADER_SKILLS),E=n.findDeterminant(we.INTELLIGENCE),y=n.findDeterminant(we.CONTROL),g=n.findDeterminant(we.WILL),v=n.findDeterminant(we.CHARISMA);return o.a.createElement("div",a,o.a.createElement("div",{className:t.row1,style:{paddingLeft:15}},o.a.createElement("div",{className:t.firstInRow},i.value),o.a.createElement("div",{className:t.otherInRow},s.value),o.a.createElement("div",{className:t.otherInRow},r.value),o.a.createElement("div",{className:t.otherInRow},l.value),o.a.createElement("div",{className:t.otherInRow},c.value),o.a.createElement("div",{className:t.otherInRow2},m.value),o.a.createElement("div",{className:t.otherInRow},p.value),o.a.createElement("div",{className:t.otherInRow2},d.value),o.a.createElement("div",{className:t.otherInRow2},h.value),o.a.createElement("div",{className:t.otherInRow2},u.value),o.a.createElement("div",{className:t.otherInRow2},E.value),o.a.createElement("div",{className:t.otherInRow2},y.value),o.a.createElement("div",{className:t.otherInRow2},g.value),o.a.createElement("div",{className:t.otherInRow},v.value)),o.a.createElement("div",{className:t.row2},o.a.createElement(La,{ext:i,customClassName:t.firstInRow}),o.a.createElement(La,{ext:s,customClassName:t.otherInRow}),o.a.createElement(La,{ext:r,customClassName:t.otherInRow}),o.a.createElement(La,{ext:l,customClassName:t.otherInRow}),o.a.createElement(La,{ext:c,customClassName:t.otherInRow}),o.a.createElement(La,{ext:m,customClassName:t.otherInRow2}),o.a.createElement(La,{ext:p,customClassName:t.otherInRow}),o.a.createElement(La,{ext:d,customClassName:t.otherInRow2}),o.a.createElement(La,{ext:h,customClassName:t.otherInRow2}),o.a.createElement(La,{ext:u,customClassName:t.otherInRow2}),o.a.createElement(La,{ext:E,customClassName:t.otherInRow2}),o.a.createElement(La,{ext:y,customClassName:t.otherInRow2}),o.a.createElement(La,{ext:g,customClassName:t.otherInRow2}),o.a.createElement(La,{ext:v,customClassName:t.otherInRow})),o.a.createElement("div",{className:t.row3},o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.firstInRow," ")},i.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},s.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},r.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},l.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},c.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},m.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},p.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},d.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},h.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},u.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},E.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},y.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow2)},g.calculateExperienceValue()),o.a.createElement("p",{className:"".concat(t.lastRowChild," ").concat(t.otherInRow," ")},v.calculateExperienceValue())))}}var Oa=Object(Jt.a)(na)(Aa);class Da extends l.Component{render(){const e=this.props.pWep,t=e.rangedWeapon,a=t.type,n=a.prepareTime.toString();return o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{style:{width:190}},t.name),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.minimumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.mediumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.maximumRange),o.a.createElement("div",{style:{width:38,textAlign:"center"}},a.damage.value),o.a.createElement("div",{style:{width:38,textAlign:"center"}},n)),o.a.createElement("div",{style:{width:170,height:45,marginLeft:10,display:"flex"}},o.a.createElement("div",{style:{width:140,height:45}},e.ammunition&&e.ammunition.name),o.a.createElement("div",null,e.ammunition?o.a.createElement("div",{style:{width:40}},e.ammunitionAmount):o.a.createElement("div",null))))}}var Pa=Da;class Wa extends l.Component{render(){const e=this.props,t=e.children,a=e.data,n=e.listStyle,i=Object(ae.a)(e,["children","data","listStyle"]);return o.a.createElement("div",i,o.a.createElement(ke.a,{style:Object(v.a)({},{height:"100%",width:"100%"},{},n)},t,a&&a.map(e=>o.a.createElement("div",null,e.name||e))))}}var ka=Wa;class Fa extends l.Component{constructor(...e){super(...e),this.determinantService=new vt,this.state={anchorEl:null,currentElement:null,generateStatsAction:()=>{const e=K.data.entity.race;e&&this.determinantService.rollForRace(e)}},this.handleClose=()=>{this.setState({anchorEl:null,showMenu:""})},this.listToDivs=e=>e?e.map(e=>o.a.createElement("div",null,e.name)):o.a.createElement("div",null)}render(){const e=this.props,t=e.classes,a=e.t,n=(e.editable,K.data.entity);return o.a.createElement("div",{className:t.root},o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:40,paddingLeft:33,width:860,display:"flex"}},o.a.createElement("div",{style:{width:200}},n.name),o.a.createElement("div",{style:{width:140,paddingLeft:20}},n.race&&n.race.name),o.a.createElement("div",{style:{display:"inline-block",width:85}},"MALE"===n.gender?"M":"K"),o.a.createElement("div",{style:{width:240}},n.professionClass&&n.professionClass.name),o.a.createElement("div",{style:{width:148}},a(n.personality&&n.personality.name))),o.a.createElement("div",{style:{paddingTop:40,paddingLeft:33,width:860,display:"flex"}},o.a.createElement("div",{style:{width:80,paddingLeft:5}},n.age),o.a.createElement("div",{style:{width:100,paddingLeft:10}},n.height," cm"),o.a.createElement("div",{style:{width:90,paddingLeft:20}},n.weight," kg"),o.a.createElement("div",{style:{width:110,paddingLeft:10}},n.hairColor&&n.hairColor.name),o.a.createElement("div",{style:{width:90,paddingLeft:0}},n.eyeColor&&n.eyeColor.name),o.a.createElement("div",{style:{width:265,paddingLeft:70,maxHeight:70,position:"relative",top:-30,fontSize:"14px"}},this.listToDivs(n.physicalFeatures))),o.a.createElement("div",{style:{paddingTop:40,paddingLeft:33,width:860,display:"flex"}},o.a.createElement("div",{style:{width:240,paddingLeft:10}},n.currentProfession&&n.currentProfession.name),o.a.createElement(ka,{data:n.professions,style:{display:"inline-block",width:350,fontSize:"14px"}}),o.a.createElement(Ea,{name:"outgoingProfessions",data:Pt.nextProfessions(),onRemove:Pt.removeProfessionFromHistory,style:{display:"inline-block",width:200,height:40,fontSize:"14px"}})),o.a.createElement("div",{style:{paddingTop:50,width:890,display:"flex"}},o.a.createElement("div",{style:{width:230,height:50}}),o.a.createElement(Oa,{style:{width:650}})),o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:860,display:"flex"}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:0,width:430}},o.a.createElement(ka,{style:{width:400,height:170,paddingLeft:40,paddingTop:60}},n.meleeWeapons.map(e=>o.a.createElement(Ta,{key:e.name,name:"meleeWeapons",weapon:e,disabled:!0}))),o.a.createElement(ka,{style:{width:400,height:180,paddingLeft:30,paddingTop:60}},n.rangedWeapons.map(e=>o.a.createElement(Pa,{key:e.rangedWeapon.name,pWep:e}))),o.a.createElement(ka,{style:{width:400,height:230,paddingLeft:20,paddingTop:50}},n.armor.map(e=>o.a.createElement(Kt,{key:e.name,name:"meleeWeapons",armor:e,disabled:!0})))),o.a.createElement("div",{style:{paddingTop:0,paddingLeft:10,width:210}},o.a.createElement(ka,{style:{width:200,height:315,paddingLeft:0,paddingTop:60}},n.skills.map(e=>o.a.createElement(De.a,{title:e.description},o.a.createElement("p",{key:e.name,style:{margin:0}},e.name)))),o.a.createElement(Mt,null)),o.a.createElement(ka,{style:{height:350,width:200,paddingTop:60},listStyle:{height:250,width:"100%",overflow:"auto"}},n.spellSchools.map(e=>o.a.createElement("p",{key:Na.spellSchoolLevelText(e),style:{margin:0}},Na.spellSchoolLevelText(e)))))),o.a.createElement("div",{style:{width:900,height:1230}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840}},o.a.createElement("div",{style:{paddingTop:0,paddingLeft:20,width:840,display:"flex"}},o.a.createElement(ka,{style:{width:630,height:170,paddingTop:50}},n.spells.map(e=>o.a.createElement(wa,{spell:e,disabled:!0}))),o.a.createElement("div",{style:{width:200}},o.a.createElement("div",{style:{width:"100%",height:50,paddingTop:60,textAlign:"center"}},n.fatePoints),o.a.createElement("div",{style:{width:"100%",height:50,paddingTop:35,textAlign:"center"}},n.mana),o.a.createElement("div",{style:{width:"100%",height:50,paddingTop:40,textAlign:"center"}},n.currentMana))),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:300,paddingTop:20}},o.a.createElement(ka,{style:{width:300,height:368,paddingTop:30}},n.inventory.map(e=>o.a.createElement("div",{key:e.id,style:{width:290,display:"flex"}},o.a.createElement("div",{style:{width:150,minWidth:150}},e.item.name),o.a.createElement("div",{style:{width:70,textAlign:"center"}},Xt.calculateWeight(e)," kg"),o.a.createElement("div",{style:{width:50,textAlign:"center"}},e.amount)))),o.a.createElement("div",{style:{paddingLeft:200}},Ot.inventoryWeight()," kg"),o.a.createElement(ka,{style:{width:285,height:150,paddingTop:50}},n.money.map(e=>o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{width:150}},e.currency.name),o.a.createElement("div",{style:{width:35,textAlign:"center"}},e.amount.gold),o.a.createElement("div",{style:{width:35,textAlign:"center"}},e.amount.silver),o.a.createElement("div",{style:{width:50,textAlign:"center"}},e.amount.lead))))),o.a.createElement("div",null,o.a.createElement(ga,null),o.a.createElement("div",{style:{width:350,height:160,paddingTop:55,display:"flex"}},o.a.createElement(ka,{style:{width:90,height:100}},n.languages.map(e=>o.a.createElement("div",null,e.name))),o.a.createElement("div",{style:{width:130,height:100,paddingLeft:10}},n.health),o.a.createElement("div",{style:{width:100,paddingLeft:10,textAlign:"center"}},n.sanityPoints)),o.a.createElement("div",{style:{width:350}},o.a.createElement("div",{style:{width:170,height:50,marginLeft:170,marginTop:50}},n.nation&&n.nation.name),o.a.createElement("div",{style:{width:120,height:35,marginTop:0,marginLeft:220}},n.parents),o.a.createElement("div",{style:{width:220,height:80,marginLeft:110}},n.family)),o.a.createElement("div",{style:{width:350,display:"flex"}},o.a.createElement("div",{style:{width:80,height:60,marginTop:10,marginLeft:110}},n.socialLevel),o.a.createElement("div",{style:{width:150,marginTop:35,marginLeft:5}},n.religion&&n.religion.name))),o.a.createElement("div",{style:{marginLeft:20,marginTop:50}},o.a.createElement("div",{style:{marginTop:20}},"aktualnie:"),o.a.createElement("div",{style:{width:150,height:150}},n.experience),o.a.createElement("div",{style:{marginTop:20}},"ca\u0142kowicie:"),o.a.createElement("div",{style:{width:150,height:150}},n.totalExperience))),o.a.createElement(ka,{style:{width:700},listStyle:{height:100},name:ot.entityName,propName:"animals"},n.animals.map(e=>o.a.createElement(Wt,{animal:e}))))),o.a.createElement(Pe.a,{anchorEl:this.state.anchorEl,open:this.state.currentElement&&null!==this.state.anchorEl,onClose:this.handleClose},this.state.currentElement&&this.state.currentElement.map(e=>o.a.createElement(We.a,{onClick:()=>{this.handleClose(),this.state[e+"Action"]()}},a(e)))))}}var Va=h()(()=>({root:{marginTop:5,background:"url(".concat(Lt.a,")"),fontFamily:"wfrp",fontSize:"24px",backgroundSize:"cover",height:"1231px",width:"1800px",display:"flex"},genderSelect:{display:"inline-block",width:85}}))(Object(g.b)()(Fa));const Ha={root:{display:"flex"},field:{width:"100%"}},ja=(e,t,a)=>{const n=e.name,i=e.type,s=e.suggestions,r=e.toView,l=e.toModel;let c=K.data.entity[n];c=r?r(c):c;const m=Ma(n,l);switch(i){case f:return o.a.createElement(J.a,{key:n,label:t(n),value:c||"",onChange:m,style:Ha.field,InputProps:{readOnly:!a}});case N:return o.a.createElement(J.a,{key:n,label:t(n),value:c||"",onChange:m,style:Ha.field,type:"password",InputProps:{readOnly:!a}});case x:return o.a.createElement(J.a,{key:n,label:t(n),value:c||"",onChange:m,multiline:!0,style:Ha.field,InputProps:{readOnly:!a}});case T:return o.a.createElement(ie,{key:n,label:t(n),value:c||"",onChange:m,style:Ha.field,InputProps:{readOnly:!a}});case R:return o.a.createElement(J.a,{key:n,label:t(n),value:c||"",type:"number",onChange:m,style:Ha.field,InputProps:{readOnly:!a}});case D:return o.a.createElement(Te,{key:n,name:n,value:c,editable:a});case S:return o.a.createElement(Ie,{key:n,name:n,suggestions:s,editable:a});case L:return o.a.createElement(Ie,{key:n,name:n,suggestions:s,multi:!0,editable:a});case I:return o.a.createElement(te,{key:n,name:n,suggestions:s,value:c,editable:a});case b:return o.a.createElement(te,{key:n,name:n,suggestions:s,value:c,multi:!0,editable:a});case A:return o.a.createElement(Se,{key:n,name:n,editable:a});case O:return o.a.createElement(oe,{key:n,name:n,editable:a});case P:return o.a.createElement(xe,{id:n,name:n,value:c,editable:a});case W:return o.a.createElement(me,{key:n,name:n,suggestions:s,editable:a});case k:return o.a.createElement(Oe,{key:n});case F:return a?o.a.createElement(Ia,null):o.a.createElement(Va,null)}throw e},Ma=(e,t)=>a=>{const n=a.target?a.target.value:a,i=t?t(n):n,s=K.data.entity;s.updateWith({[e]:i}),K.update({entity:s})};class Ua extends l.Component{constructor(...e){super(...e),this.saveForm=()=>{const e=this.props,t=e.entity,a=e.entityName;K.services[a].save(t,()=>K.showTable(a))},this.getFormFields=()=>{const e=this.props,t=e.entityName,a=e.t,n=q.hasAuthority(t);return K.formFields[t].map(e=>ja(e,a,n)).map(e=>o.a.createElement(m.a,{key:e.key,item:!0},e))},this.updateEntity=(e,t)=>a=>{const n=t?t(a.target.value):a.target.value;this.updateForm({[e]:n})},this.updateForm=e=>{this.props.entity.updateWith(e),this.setState({entity:this.props.entity})}}render(){const e=this.props,t=e.entityName,a=e.classes,n=q.hasAuthority(t);return o.a.createElement(m.a,{container:!0,direction:"column",className:a.root},this.getFormFields(),o.a.createElement(m.a,{item:!0},n?[o.a.createElement(d.a,{onClick:this.saveForm},o.a.createElement(u.a,null)),o.a.createElement(d.a,{onClick:()=>K.showTable(t)},o.a.createElement(E.a,null))]:o.a.createElement(d.a,{onClick:()=>{K.data.afterForm?K.data.afterForm():K.showTable(t)}},o.a.createElement(y.a,null))))}}var Ba=Object(g.b)()(h()(e=>({root:{width:"95%",margin:"auto"}}))(Ua)),Ka=a(612);class Ga extends j{updateWith(e){return super.updateWith(e),this.updateEntityProp("nation",()=>new tt),this}}Ga.entityName="place",B(Ga,[M("name",f),M("description",x),M("nation",S)],[U("name",f),U("description",x),U("nation",S,tt.entityName)]);class _a extends j{updateWith(e){return super.updateWith(e),this.updateEntityProp("place",()=>new Ga),this}}_a.entityName="picture",B(_a,[M("name",f),M("place",S)],[]);const za=new class extends G{uploadPicture(e,t){this.rawPostRequest(_a.entityName,e,t)}updateMetadata(e,t){this.postRequestWithoutResponse(e,_a.entityName,t)}};class Ya extends l.Component{constructor(...e){super(...e),this.onResponse=()=>{K.showTable(_a.entityName),K.services.picture.loadData()},this.upload=e=>{const t=e[0];if(!t)return;const a=new FormData;a.append("file",t),za.uploadPicture(a,this.onResponse)},this.setName=e=>{const t=e.target.value;this.props.value.name=t,this.setState({name:t})},this.setPlace=e=>{this.props.value.place=e,this.setState({place:e})},this.save=()=>{const e=this.props.value,t={id:e.id,name:e.name};e.place&&(t.placeId=e.place.id),za.updateMetadata(t,this.onResponse)}}render(){const e=this.props,t=e.value,a=e.t,n=q.hasAuthority(_a.entityName);return o.a.createElement("div",{style:{margin:10}},t?o.a.createElement(m.a,{container:!0,spacing:2},o.a.createElement(m.a,{item:!0,container:!0,xs:12,alignItems:"center"},o.a.createElement(m.a,{item:!0,xs:4},o.a.createElement(J.a,{value:t?t.name:"",onChange:this.setName,disabled:!t})),o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(Ie,{name:Ga.entityName,onChange:this.setPlace,value:t.place,editable:!0})),o.a.createElement(m.a,{item:!0,xs:2},n?o.a.createElement(de.a,{onClick:this.save},a("save")):o.a.createElement("div",null))),o.a.createElement(m.a,{item:!0,xs:12},o.a.createElement("img",{src:_a.entityName+"/"+t.id,alt:t.name,style:{maxWidth:"80vw",maxHeight:"50vh"}}))):o.a.createElement(Ka.a,{acceptedFiles:["image/jpeg","image/jpg","image/png"],onChange:this.upload}),o.a.createElement(d.a,{onClick:()=>K.showTable(_a.entityName)},o.a.createElement(E.a,null)))}}var Xa=Object(g.b)()(Ya),qa=a(411),Ja=a(611);class Qa extends j{constructor(...e){super(...e),this.places=[],this.persons=[]}updateWith(e){return this.updateProp(e,"id"),this.updateProp(e,"uuid"),this.updateProp(e,"name"),this.updateEntityProp(e,"realm",()=>new ft),this.updateEntityList(e,"places",()=>new Ga),this.updateEntityList(e,"persons",()=>new gt),this}}Qa.entityName="scenario",B(Qa,[M("name",f),M("realm",S)],[U("name",f),U("realm",S,ft.entityName),U("places",L,Ga.entityName),U("persons",L,gt.entityName)]);class Za extends l.Component{constructor(...e){super(...e),this.state={currentScenario:void 0,images:[],imgStyle:{maxWidth:"40vw",height:"30vh"},viewerIsOpen:!1,currentImage:null},this.fetchImages=e=>{(class{static fetchPicturesForScenario(e,t){fetch("".concat(_a.entityName,"/").concat(Qa.entityName,"/").concat(e.id),{method:"get"}).then(e=>{e.ok?e.json().then(t):alert(e.status)})}}).fetchPicturesForScenario(e,e=>{const t=e.map(e=>"picture/".concat(e));this.setState({images:t})})}}render(){const e=K.data.entity,t=this.state,a=t.images,n=t.imgStyle,i=t.viewerIsOpen,s=t.currentImage;return o.a.createElement("div",{style:{paddingTop:10}},e?o.a.createElement(m.a,{container:!0,spacing:2},o.a.createElement(m.a,{item:!0,container:!0,xs:3},e.persons.map(t=>o.a.createElement(m.a,{item:!0,xs:3},o.a.createElement(de.a,{onClick:()=>{K.showForm(gt.entityName,t),K.update({afterForm:()=>K.updateScenario(e)})}},t.name)))),o.a.createElement(m.a,{item:!0,container:!0,xs:9,spacing:2},a.map((e,t)=>o.a.createElement(m.a,{item:!0},o.a.createElement(pe.a,{elevation:6},o.a.createElement("img",{src:e,alt:e,style:n,onClick:()=>this.setState({currentImage:t,viewerIsOpen:!0})})))))):o.a.createElement("div",null,o.a.createElement(Ie,{name:Qa.entityName,onChange:e=>{K.updateScenario(e),this.fetchImages(e)},value:null,editable:!0})),o.a.createElement(Ja.a,null,o.a.createElement(qa.a,{onClose:()=>this.setState({viewerIsOpen:!1,currentImage:null}),open:i},o.a.createElement(Ja.b,{currentIndex:s,views:a.map(e=>({source:e}))}))))}}var $a=Object(g.b)()(Za),en=a(655),tn=a(656),an=a(657),nn=a(658),sn=a(591),rn=a.n(sn);class ln extends l.Component{constructor(...e){super(...e),this.options={filterType:"textField",selectableRows:"single",selectableRowsOnClick:!0,disableToolbarSelect:!0,selectableRowsHeader:!1,customToolbarSelect:(e,t,a)=>{if(e.data.length>0){const t=K.data.showTable,a=K.data[t][e.data[0].dataIndex];return q.hasAuthority(t)?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(d.a,{onClick:()=>K.showForm(t,a)},o.a.createElement(en.a,null)),o.a.createElement(d.a,{onClick:()=>K.services[t].delete(a)},o.a.createElement(tn.a,null)))):o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{onClick:()=>K.showForm(t,a)},o.a.createElement(an.a,null)))}return o.a.createElement(o.a.Fragment,null)}},this.translateColumns=e=>{const t=this.props.t;return e.forEach(e=>e.label=t(e.name)),e}}render(){const e=K.data.showTable,t=this.props.t,a=q.hasAuthority(e),n=o.a.createElement("div",null,t(e),a?o.a.createElement(d.a,{onClick:()=>K.update({showTable:null,showForm:e,entity:K.suppliers[e]()})},o.a.createElement(nn.a,null)):o.a.createElement("div",null));return o.a.createElement(rn.a,{title:n,options:this.options,columns:this.translateColumns(K.columns[e]),data:K.data[e]})}}var on=Object(g.b)()(ln);class cn extends l.Component{render(){const e=K.data,t=e.showTable,a=e.showForm,n=e.showScenario,i=e.entity;let s=o.a.createElement("div",null);return t?s=o.a.createElement(on,null):a?s="picture"===a?o.a.createElement(Xa,{value:i.id?i:void 0}):o.a.createElement(Ba,{entity:i,entityName:a}):n&&(s=o.a.createElement($a,null)),s}}var mn=cn,dn=a(654),pn=a(404),hn=a(111),un=a(607),En=a.n(un);class yn extends He{constructor(...e){super(...e),this.price=new Ke,this.availability="COMMON",this.placement=_e.NECK}updateWith(e){return super.updateWith(e),this.updateEntityProp(e,"price",()=>new Ke),this.updateEntityProp(e,"primaryResource",()=>new Ge),this.updateEntityProp(e,"secondaryResource",()=>new Ge),this}}yn.entityName="jewelry",B(yn,[M("name",f),M("description",x),M("price",A),M("availability",f)],[U("name",f),U("description",x),U("weight",R),U("price",A),U("availability",I,"availability"),U("primaryResource",S,Ge.entityName),U("secondaryResource",S,Ge.entityName),U("placement",I,"placementJewelry")]);class gn extends l.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.handleClick=e=>{this.setState({anchorEl:e.currentTarget})},this.handleClose=()=>{this.setState({anchorEl:null})},this.handleItemClick=e=>()=>{this.handleClose(),K.showTable(e)}}render(){const e=this.props,t=e.t,a=e.name,n=e.entities;return o.a.createElement("div",null,o.a.createElement(de.a,{id:a,onClick:this.handleClick},t(a)),o.a.createElement(Pe.a,{id:a,anchorEl:this.state.anchorEl,open:null!==this.state.anchorEl,onClose:this.handleClose},n.map(e=>o.a.createElement(We.a,{key:e,onClick:this.handleItemClick(e)},t(e)))))}}var vn=Object(g.b)()(gn),wn=a(608),fn=a.n(wn);class Nn extends l.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.handleClick=e=>{this.setState({anchorEl:e.currentTarget})},this.handleClose=()=>{this.setState({anchorEl:null})},this.showPictureForm=()=>{this.handleClose(),K.showTable(_a.entityName)},this.showScenarioView=()=>{this.handleClose(),K.updateScenario(null)},this.showUsersTable=()=>{this.handleClose(),K.showTable(z.entityName)}}render(){const e=this.props.t,t=q.hasAuthority("admin");return o.a.createElement("div",null,o.a.createElement(d.a,{"aria-label":"More","aria-owns":null!==this.state.anchorEl?"app-tools-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},o.a.createElement(fn.a,null)),o.a.createElement(Pe.a,{id:"app-tools-menu",anchorEl:this.state.anchorEl,open:null!==this.state.anchorEl,onClose:this.handleClose},t&&o.a.createElement(We.a,{onClick:this.showUsersTable},e("user")),o.a.createElement(We.a,{onClick:this.showPictureForm},e("picture")),o.a.createElement(We.a,{onClick:this.showScenarioView},e("scenario"))))}}var xn=Object(g.b)()(Nn);const Cn=new class extends G{constructor(...e){super(...e),this.getRealmData=e=>{e&&this.requestForPath("realmData/".concat(e.id),t=>K.update({currentRealmData:t,currentRealm:e}))}}};class Tn extends l.Component{constructor(...e){super(...e),this.showTable=e=>()=>{K.update({showTable:e})}}render(){const e=this.props,t=e.i18n,a=e.classes,n=q.hasAuthority("gamemaster")?[o.a.createElement(vn,{name:"world",entities:[tt.entityName,nt.entityName,at.entityName,st.entityName,rt.entityName,Ga.entityName,ft.entityName,Qa.entityName]}),o.a.createElement(vn,{name:"knowledge",entities:[Fe.entityName,Ve.entityName,je.entityName,Ze.entityName,$e.entityName]}),o.a.createElement(vn,{name:"crafting",entities:[Xe.entityName,Ye.entityName,Qe.entityName,ut.entityName,ht.entityName,yn.entityName]}),o.a.createElement(vn,{name:"types",entities:[ze.entityName,Je.entityName,pt.entityName,Be.entityName,Ge.entityName]}),o.a.createElement(vn,{name:"creature",entities:[...K.data.currentRealm?[gt.entityName]:[],ct.entityName,mt.entityName,dt.entityName,yt.entityName,ot.entityName,lt.entityName]})]:o.a.createElement("div",null);return o.a.createElement(dn.a,{position:"relative"},o.a.createElement(pn.a,null,o.a.createElement(xn,null),n,o.a.createElement("div",{className:a.languageIcon},K.data.fetching.size>0&&o.a.createElement(d.a,null,o.a.createElement(hn.a,{color:"secondary"})),o.a.createElement(Z.a,{className:a.realmSelect,options:K.data.realm,getOptionLabel:e=>o.a.createElement("div",null,e.name),getOptionValue:e=>e.id,filterOption:(e,t)=>e.data.name.startsWith(t),value:K.data.currentRealm,onChange:e=>Cn.getRealmData(e)}),o.a.createElement(d.a,{onClick:()=>t.changeLanguage("en")},o.a.createElement(En.a,{code:"gb",height:16})),o.a.createElement(d.a,{onClick:()=>t.changeLanguage("pl")},o.a.createElement(En.a,{code:"pl",height:16})))))}}var Rn=h()(e=>({languageIcon:{marginLeft:"auto",display:"flex"},realmSelect:{width:200}}))(Object(g.b)()(Tn));var In=a(105),bn=a(609),Sn=a.n(bn);const Ln=new V;Ln.name="username",Ln.type=f;const An=new V;An.name="password",An.type=N;class On extends l.Component{constructor(...e){super(...e),this.login=()=>{const e=K.data.entity;e&&e.username&&e.password&&fetch("login",{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{e.token&&(K.updateUser(e),q.updateAdminAuthoritiesIfNeeded())})}}render(){const e=this.props.t;return(new V).name="username",o.a.createElement(m.a,{container:!0,alignItems:"center",spacing:2,xs:12,direction:"column"},o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(In.a,null,"WFRP Helper")),o.a.createElement(m.a,{item:!0,xs:6},ja(Ln,e,!0)),o.a.createElement(m.a,{item:!0,xs:6},ja(An,e,!0)),o.a.createElement(m.a,{item:!0,xs:8},o.a.createElement(de.a,{onClick:this.login},e("login")),o.a.createElement(de.a,null,e("signup"))),o.a.createElement(m.a,{item:!0,xs:6},o.a.createElement(de.a,null,o.a.createElement("img",{src:Sn.a,alt:e("login with Google"),style:{width:50,height:50}}),o.a.createElement("a",{href:"https://wfrp-helper.ey.r.appspot.com/oauth2/authorize/google?redirect_uri=https://wfrp-helper-frontend-dot-wfrp-helper.ey.r.appspot.com/oauth2/redirect",style:{fontSize:18}},e("login with Google")))))}}var Dn=Object(g.b)()(On);class Pn extends l.Component{render(){const e=new RegExp("[\\?&]token=([^&#]*)").exec(this.props.location.search)[1];return K.updateUser({token:e}),o.a.createElement(c.a,{to:"/"})}}var Wn=Pn;const kn=new q;class Fn extends l.Component{constructor(...e){super(...e),this.state={password:null,repeat:null},this.onChange=e=>t=>{this.setState({[e]:t.target.value})},this.savePassword=()=>{const e=this.state,t=e.password;t===e.repeat&&kn.updatePassword(t)}}render(){const e=this.state,t=e.password,a=e.repeat,n=this.props.t;return o.a.createElement("div",null,o.a.createElement(J.a,{key:"password",label:n("password"),value:t||"",type:"password",onChange:this.onChange("password")}),o.a.createElement(J.a,{key:"passwordRepeat",label:n("passwordRepeat"),value:a||"",type:"password",onChange:this.onChange("repeat")}),o.a.createElement(de.a,{onClick:this.savePassword},n("save")))}}var Vn=Object(g.b)()(Fn);const Hn=Object(s.a)({palette:{primary:n.a,secondary:i.a}}),jn=new q;class Mn extends l.Component{constructor(e,t){super(e,t),K.onUpdate=e=>{this.setState({data:e})},K.data.entity=new z}render(){const e=K.data.currentUser,t=e.token,a=e.oneTimePassword;return t?a?o.a.createElement(r.a,{theme:Hn},o.a.createElement(Vn,null)):(K.data.currentUser.authorities||jn.refreshAuthorities(),K.data.initialized||(class{static refreshData(){Object.keys(K.services).forEach(e=>K.services[e].loadData())}}.refreshData(),K.data.initialized=!0),o.a.createElement(r.a,{theme:Hn},o.a.createElement(Rn,null),o.a.createElement(mn,null))):o.a.createElement(r.a,{theme:Hn},o.a.createElement(c.d,null,o.a.createElement(c.b,{exact:!0,path:"/",component:Dn}),o.a.createElement(c.b,{path:"/oauth2/redirect",component:Wn})))}}}}]);
//# sourceMappingURL=4.f3b8efea.chunk.js.map